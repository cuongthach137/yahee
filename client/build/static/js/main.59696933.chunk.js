(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{521:function(e,t,n){},621:function(e,t,n){},649:function(e,t,n){},655:function(e,t,n){},675:function(e,t){},677:function(e,t){},691:function(e,t){},693:function(e,t){},721:function(e,t){},723:function(e,t){},724:function(e,t){},729:function(e,t){},731:function(e,t){},737:function(e,t){},739:function(e,t){},758:function(e,t){},770:function(e,t){},773:function(e,t){},790:function(e,t,n){},791:function(e,t,n){},807:function(e,t,n){},808:function(e,t,n){},809:function(e,t,n){},810:function(e,t,n){},811:function(e,t,n){},812:function(e,t,n){},813:function(e,t,n){},815:function(e,t,n){},914:function(e,t,n){},915:function(e,t,n){},916:function(e,t,n){},917:function(e,t,n){},918:function(e,t,n){},919:function(e,t,n){},920:function(e,t,n){},921:function(e,t,n){},922:function(e,t,n){},923:function(e,t,n){},924:function(e,t,n){},925:function(e,t,n){},926:function(e,t,n){},927:function(e,t,n){},928:function(e,t,n){},929:function(e,t,n){},930:function(e,t,n){},931:function(e,t,n){},932:function(e,t,n){},933:function(e,t,n){},934:function(e,t,n){},935:function(e,t,n){},936:function(e,t,n){},937:function(e,t,n){},942:function(e,t,n){},943:function(e,t,n){},946:function(e,t,n){},947:function(e,t,n){},948:function(e,t,n){},949:function(e,t,n){},950:function(e,t,n){},951:function(e,t,n){},952:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(28),i=n.n(s),r=(n(621),n(338)),o=(n(648),n(649),n(9)),l=n(26),d=n(21),u=n(5),j=n(22),b=n(19),m=n(51),h=n(996),p=n(37),O=p.withStyles,f=p.TextField,v=O({root:{"& label.Mui-focused":{color:"green"},"& .MuiInputBase-input":{padding:"15.5px 14px"},"& .MuiInput-underline:after":{borderBottomColor:"green"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(f),x=n(1),g=["name","shouldUnregister","label","defaultValue","adornment"],_=function(e){var t=e.name,n=e.shouldUnregister,c=void 0!==n&&n,a=e.label,s=e.defaultValue,i=e.adornment,r=Object(m.a)(e,g),o=Object(b.g)(),l=o.control,d=o.formState.errors;return Object(x.jsx)("div",{className:"productInfo__".concat(t),children:Object(x.jsx)(b.a,{shouldUnregister:c,name:t,control:l,defaultValue:s||"",render:function(e){var n,c=e.field;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(v,Object(u.a)(Object(u.a)({type:"text",label:a,variant:"outlined",fullWidth:!0,margin:"normal",error:!!d[t],helperText:null===(n=d[t])||void 0===n?void 0:n.message,InputProps:{startAdornment:i&&Object(x.jsx)(h.a,{position:"start",children:"$"}),step:.1}},c),r))})}})})},y=["children"],N=function(e){var t=e.children,n=Object(m.a)(e,y);return Object(x.jsx)("form",Object(u.a)(Object(u.a)({},n),{},{children:t}))},C=(n(655),n(531)),k=n.n(C),w=n(530),S=n.n(w),T=n(18),E=n(11),A=n.n(E),I=n(23),M=n(59),P=n(92),R=n.n(P),D=R.a.create({baseURL:"http://localhost:8000/api/v1"});D.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e.response&&e.response.data||"Something went wrong")}));var L,F,B=D,U=n(528),V=(n(302),function(e){if(!e)return!1;var t=Object(U.a)(e).exp,n=Date.now()/1e3;return{isValid:t>n,timeLeft:1e3*(t-n)}}),W=function(e){e?(localStorage.setItem("accessToken",e),B.defaults.headers.common.Authorization="Bearer ".concat(e)):(localStorage.removeItem("accessToken"),delete B.defaults.headers.common.Authorization)},G=Object(M.b)("user/init",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a,s,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.dispatch,a=n.getState,e.prev=1,!(s=window.localStorage.getItem("accessToken"))||!V(s).isValid){e.next=13;break}return W(s),e.next=7,B.get("/user");case 7:i=e.sent,qo.emit("user-init",i.data.user._id),setTimeout((function(){c(te()),d.b.error("Your session has expired. Please login again!"),qo.emit("sign-out",i.data.user._id);var e=a().chat.activeConversation;Ho.emit("leaveAllRooms",{userId:i.data.user._id,conversationId:null===e||void 0===e?void 0:e.id})}),V(s).timeLeft),c(Q({isAuthenticated:!0,user:i.data.user})),e.next=14;break;case 13:c(Q({isAuthenticated:!1,user:null}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),c(Q({isAuthenticated:!1,user:null}));case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,n){return e.apply(this,arguments)}}()),z=Object(M.b)("user/register",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,B.post("/user/register",t);case 3:a=e.sent,s=a.data.token,W(s),c(X(a.data));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),H=Object(M.b)("user/login",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,B.post("/user/login",t);case 3:a=e.sent,s=a.data.token,t.keep&&(W(s),setTimeout((function(){c(te())}),174e4)),c(ee(a.data));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),q=Object(M.b)("user/update",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,B.put("/user/update",t);case 3:a=e.sent,c(ne(a.data));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Y=Object(M.b)("user/update-activity",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,B.patch("/user/update-activity",t);case 3:c(ce(t));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),$=Object(M.b)("user/logout",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,a=n.getState,console.log(a()),e.next=4,B.patch("/user/update-activity",{status:"offline",lastActivity:Date.now()});case 4:W(null),c(te());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),J=Object(M.b)("user/changepassword",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,B.put("/user/update/password",t);case 3:a=e.sent,c(ee(a.data));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),K=Object(M.c)({name:"user",initialState:{user:{},isAuthenticated:!1,isInitialized:!1,status:null,isLoading:!1,hasError:!1,notifications:{newMessages:0}},reducers:{INITIALIZE:function(e,t){e.isAuthenticated=t.payload.isAuthenticated,e.isInitialized=!0,e.user=t.payload.user},REGISTER:function(e,t){e.user=t.payload.user,e.isAuthenticated=!0},LOGIN:function(e,t){e.user=t.payload.user,e.isAuthenticated=!0},LOGOUT:function(e){e.user=null,e.isAuthenticated=!1},UPDATE:function(e,t){e.user=t.payload.user},STATUS:function(e,t){e.user.user.status=t.payload}},extraReducers:(L={},Object(T.a)(L,q.pending,(function(e){e.status="PENDING",e.isLoading=!0})),Object(T.a)(L,q.fulfilled,(function(e,t){e.status="SUCCESS",e.isLoading=!1,e.hasError=!1,d.b.success("User updated successfully")})),Object(T.a)(L,q.rejected,(function(e,t){e.status="FAILED",e.isLoading=!1,e.hasError=!0,d.b.error(t.error.message.startsWith("E11000")?"That user name has already been taken. Please choose another":t.error.message)})),Object(T.a)(L,G.pending,(function(e){e.status="PENDING",e.isLoading=!0})),Object(T.a)(L,G.fulfilled,(function(e){e.status="SUCCESS",e.isLoading=!1,e.user&&qo.emit("user-init",e.user._id)})),Object(T.a)(L,G.rejected,(function(e){e.status="FAILED",e.isLoading=!1,d.b.error("Something went wrong")})),Object(T.a)(L,H.pending,(function(e){e.status="PENDING",e.isLoading=!0})),Object(T.a)(L,H.fulfilled,(function(e){e.status="SUCCESS",e.isLoading=!1,qo.emit("sign-in",e.user._id),d.b.success("Welcome back, ".concat(e.user.name," \ud83d\udd25\ud83d\udd25"))})),Object(T.a)(L,H.rejected,(function(e,t){var n;e.status="FAILED",e.isLoading=!1,d.b.error(null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)})),Object(T.a)(L,$.pending,(function(e){e.status="PENDING",e.isLoading=!0,qo.emit("sign-out",e.user._id),Ho.emit("leaveAllRooms",e)})),Object(T.a)(L,$.fulfilled,(function(e){e.status="SUCCESS",e.isLoading=!1})),Object(T.a)(L,$.rejected,(function(e){e.status="FAILED",e.isLoading=!1})),Object(T.a)(L,J.pending,(function(e){e.status="PENDING",e.isLoading=!0})),Object(T.a)(L,J.fulfilled,(function(e){e.status="SUCCESS",e.isLoading=!1,e.hasError=!1,d.b.success("Password updated successfully")})),Object(T.a)(L,J.rejected,(function(e,t){var n;e.status="FAILED",e.isLoading=!1,e.hasError=!0,d.b.error((null===t||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message.startsWith("jwt"))?"Session expired. Please login again!":"Something went wrong. We just don't know what thing yet hehe")})),Object(T.a)(L,z.pending,(function(e){e.status="PENDING",e.isLoading=!0})),Object(T.a)(L,z.fulfilled,(function(e){e.status="SUCCESS",e.isLoading=!1,d.b.success("Yo welcome to the club")})),Object(T.a)(L,z.rejected,(function(e,t){e.status="FAILED",e.isLoading=!1,d.b.error(t.error.message.startsWith("E11000")?"".concat(t.error.message.slice(t.error.message.indexOf("{")+1,t.error.message.indexOf("}"))," has already been taken"):"Something went wrong. Please try again in a few seconds!")})),L)}),Z=K.actions,Q=Z.INITIALIZE,X=Z.REGISTER,ee=Z.LOGIN,te=Z.LOGOUT,ne=Z.UPDATE,ce=(Z.PENDING,Z.SUCCESS,Z.REJECT,Z.STATUS),ae=K.reducer,se=function(){return function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.user})),n=t.isAuthenticated,a=t.isInitialized,s=t.isLoading,i=Object(l.c)((function(e){return e.user.user?e.user.user:{}}));return{login:function(t){e(H(t))},initialize:Object(c.useCallback)((function(){e(G())}),[e]),register:function(t){e(z(t))},logout:function(){e($())},isAuthenticated:n,isInitialized:a,update:function(t){e(q(t))},deactivateAccount:function(){},resetPassword:function(){},changePassword:function(t){e(J(t))},isLoading:s,user:i,updateActivity:function(t){e(Y(t))}}}()},ie=function(e,t){var n=Object(c.useCallback)((function(n){e.current&&(e.current.contains(n.target)?t(!0):t(!1))}),[t,e]);Object(c.useEffect)((function(){return document.addEventListener("mousedown",n),function(){return document.removeEventListener("mousedown",n)}}),[e,t,n])},re=n(43),oe=["_id","replyingTo","createdAt","updatedAt","reactions","__v","seenByIds"],le=Object(M.b)("chat/conversations",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,e.next=3,B.get("/conversations/"+t);case 3:a=e.sent,s=a.data.conversations,c(me(s));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),de=Object(M.b)("chat/getMoreMessages",function(){var e=Object(I.a)(A.a.mark((function e(t,n){var c,a,s,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.conversationId,a=t.lastMessageDate,s=n.dispatch,e.next=4,B.post("/messages/getMore",{conversationId:c,lastMessageDate:a});case 4:i=e.sent,console.log("1"),s(Te(i.data.messages));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());function ue(e){e.conversations=e.conversations.sort((function(e,t){return e.latestMessage&&t.latestMessage&&t.latestMessage!==e.latestMessage?new Date(t.latestMessage.createdAt).getTime()-new Date(e.latestMessage.createdAt).getTime():0}))}var je=Object(M.c)({name:"chat",initialState:{isLoading:!1,hasError:!1,conversations:[],activeModal:"",messageToReply:{},activeConversation:{conversationType:"",id:"",messages:[],otherEndActions:{id:"",action:""},animation:{class:""},conversationTheme:{},totalMessages:0,memberNickNames:{},defaultEmoji:"",noMoreMessages:!1,hasMore:!0,pinnedMessage:null,messageToReply:null,inputMode:"normal",lastSeenMessage:{},block:{},conversationName:"",conversationPhoto:{},members:[],isMemberPresent:!1},onlineUsers:[],unreadCount:0,unreadMessages:[],activeVideoCall:{participants:[],type:"",status:""},forwardMessage:{}},reducers:{SET_CONVERSATIONS:function(e,t){e.conversations=t.payload.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{messages:[e.latestMessage]||!1})})),ue(e)},UPDATE_CONVERSATION_LIST:function(e,t){e.conversations=[].concat(Object(j.a)(e.conversations),[t.payload])},UPDATE_CONVERSATION_LATEST_MESSAGE:function(e,t){var n;(null===(n=e.conversations)||void 0===n?void 0:n.length)&&(e.conversations=e.conversations.map((function(e){return e._id===t.payload.conversationId?Object(u.a)(Object(u.a)({},e),{},{latestMessage:t.payload}):e})))},REARRANGE_CONVERSATION_LIST:function(e){ue(e)},SET_ACTIVE_CONVERSATION:function(e,t){e.activeConversation=t.payload},ACTIVE_CONVERSATION_LASTSEEN:function(e,t){e.activeConversation.lastSeenMessage=Object(u.a)(Object(u.a)({},e.activeConversation.lastSeenMessage),{},Object(T.a)({},t.payload.readById,t.payload.messageId))},UPDATE_CONVERSATION_MEMBERS:function(e,t){e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.members=[].concat(Object(j.a)(e.activeConversation.members),Object(j.a)(t.payload.membersToAdd))),e.conversations=e.conversations.map((function(e){return e._id===t.payload.conversationId?Object(u.a)(Object(u.a)({},e),{},{members:[].concat(Object(j.a)(e.members),Object(j.a)(t.payload.membersToAdd))}):e}))},UPDATE_ACTIVE_CONVERSATION_THEME:function(e,t){e.activeConversation&&e.activeConversation.id===t.payload.id&&(e.activeConversation.conversationTheme=t.payload.theme,e.activeConversation.defaultEmoji=t.payload.theme.emoji),e.conversations=e.conversations.map((function(e){return e._id===t.payload.id?Object(u.a)(Object(u.a)({},e),{},{conversationTheme:t.payload.theme,defaultEmoji:t.payload.theme.emoji}):e}))},SET_MESSAGE_LIST:function(e,t){e.activeConversation.id&&(e.activeConversation.hasMore=30===t.payload.length,e.activeConversation.messages=t.payload)},UPDATE_MESSAGE_LIST:function(e,t){e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.messages.push(t.payload),t.payload.isSenderCurrentUser||e.activeConversation.isMemberPresent||(e.activeConversation.isMemberPresent=!0)),e.conversations=e.conversations.map((function(e){return e._id===t.payload.conversationId?Object(u.a)(Object(u.a)({},e),{},{latestMessage:t.payload}):e})),ue(e)},UPDATE_MESSAGE_LIST_STATUS:function(e,t){e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.messages=e.activeConversation.messages.map((function(e){return e._id===t.payload.messageId?Object(u.a)(Object(u.a)({},e),{},{status:t.payload.status}):e})))},UPDATE_MESSAGE_LIST_ON_FILE_UPLOAD:function(e,t){e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.messages=e.activeConversation.messages.map((function(e){return t.payload.createdAt===e.createdAt?t.payload:e})))},UPDATE_MESSAGE_REACTIONS:function(e,t){e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.messages=e.activeConversation.messages.map((function(e){return t.payload._id===e._id?t.payload:e})))},UNSHIFT_MESSAGE_LIST:function(e,t){if(e.activeConversation.id){if(!t.payload.length)return void(e.activeConversation.hasMore=!1);e.activeConversation.messages=[].concat(Object(j.a)(t.payload.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}))),Object(j.a)(e.activeConversation.messages))}},UPDATE_MESSAGE_LIST_WITH_SEEN_BY_IDS:function(e,t){e.activeConversation.id===t.payload.message.conversationId&&(e.activeConversation.messages=e.activeConversation.messages.map((function(e){return t.payload.message._id===e._id||new Date(t.payload.message.createdAt).getTime()===e.createdAt?Object(u.a)(Object(u.a)({},e),{},{seenByIds:t.payload.message.seenByIds,status:"seen",_id:t.payload.message._id}):e})),e.activeConversation.lastSeenMessage=Object(u.a)(Object(u.a)({},e.activeConversation.lastSeenMessage),{},Object(T.a)({},t.payload.readById,t.payload.message._id)))},ON_USER_ENTERED_AND_READ_MESSAGES:function(e,t){e.activeConversation.id&&(e.activeConversation.isMemberPresent=!0,t.payload.newlyReadMes.forEach((function(n,c){e.activeConversation.messages=e.activeConversation.messages.map((function(e){return n._id===e._id||new Date(n.createdAt).getTime()===e.createdAt?Object(u.a)(Object(u.a)({},e),{},{seenByIds:n.seenByIds,status:"seen"}):e})),c===t.payload.newlyReadMes.length-1&&(e.conversations=e.conversations.map((function(c){return c._id===e.activeConversation.id&&c.lastSeenMessage?Object(u.a)(Object(u.a)({},c),{},{lastSeenMessage:Object(u.a)(Object(u.a)({},c.lastSeenMessage),{},Object(T.a)({},t.payload.userId,n._id))}):c._id!==e.activeConversation.id||c.lastSeenMessage?c:Object(u.a)(Object(u.a)({},c),{},{lastSeenMessage:Object(T.a)({},t.payload.userId,n._id)})})),e.activeConversation.lastSeenMessage||(e.activeConversation.lastSeenMessage={}),e.activeConversation.lastSeenMessage[t.payload.userId]=n._id)})))},SET_CHAT_ANIMATION:function(e,t){e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.animation={class:t.payload.class})},RESET_CHAT_ON_LOGOUT:function(e){e.conversations=[],e.activeConversation={}},SET_PARTICIPANT_ACTION:function(e,t){e.activeConversation.otherEndActions=t.payload},UPDATE_ONLINE_USERS:function(e,t){e.onlineUsers=t.payload},UPDATE_MESSAGES:function(e,t){e.conversations=e.conversations.map((function(e){return e._id===t.payload.conversationId?Object(u.a)(Object(u.a)({},e),{},{unread:t.payload.status}):e}))},UPDATE_MESSAGE_STATUS:function(e,t){e.conversations=e.conversations.map((function(e){return e._id===t.payload?Object(u.a)(Object(u.a)({},e),{},{unread:!1}):e}))},UPDATE_SENT_MESSAGE_STATUS:function(e,t){e.activeConversation&&e.activeConversation.messages&&(e.activeConversation.messages=e.activeConversation.messages.map((function(e){return new Date(t.payload.createdAt).getTime()===e.createdAt||t.payload._id===e._id?t.payload:e})))},UNREAD_MESSAGES:function(e,t){e.unreadMessages=t.payload},UPDATE_ACTIVE_CONVERSATION_MEMBER_NICKNAMES:function(e,t){e.activeConversation&&e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.memberNickNames=Object(u.a)(Object(u.a)({},e.activeConversation.memberNickNames),t.payload.memberNickNames))},SET_ACTIVE_VIDEO_CALL:function(e,t){e.activeVideoCall=t.payload},MESSAGE_TO_REPLY:function(e,t){e.activeConversation.messageToReply=t.payload.message,e.activeConversation.inputMode=t.payload.mode},SET_INPUT_MODE:function(e,t){e.activeConversation.inputMode=t.payload},SET_PIN_MESSAGE:function(e,t){e.activeConversation.pinnedMessage=t.payload.message},SET_FORWARD_MESSAGE:function(e,t){var n=t.payload,c=(n._id,n.replyingTo,n.createdAt,n.updatedAt,n.reactions,n.__v,n.seenByIds,Object(m.a)(n,oe));e.forwardMessage=c},SET_MODAL:function(e,t){e.activeModal=t.payload},UPDATE_BLOCK:function(e,t){t.payload._id===e.activeConversation.id&&(e.activeConversation.block=t.payload.block),e.conversations=e.conversations.map((function(e){return e._id===t.payload._id?Object(u.a)(Object(u.a)({},e),{},{block:t.payload.block}):e}))},UPDATE_CHAT_NAME:function(e,t){t.payload.conversationId===e.activeConversation.id&&(e.activeConversation.conversationName=t.payload.conversationName),e.conversations=e.conversations.map((function(e){return e._id===t.payload.conversationId?Object(u.a)(Object(u.a)({},e),{},{conversationName:t.payload.conversationName}):e}))},UPDATE_CHAT_PHOTO:function(e,t){t.payload.conversationId===e.activeConversation.id&&(e.activeConversation.conversationPhoto=t.payload.photo),e.conversations=e.conversations.map((function(e){return e._id===t.payload.conversationId?Object(u.a)(Object(u.a)({},e),{},{conversationPhoto:t.payload.photo}):e}))},REMOVE_CONVERSATION:function(e,t){e.activeConversation={},e.conversations=e.conversations.filter((function(e){return e._id!==t.payload}))},USER_LEFT_CONVERSATION:function(e,t){e.activeConversation.id===t.payload.conversationId&&(e.activeConversation.members=e.activeConversation.members.filter((function(e){return e._id!==t.payload.userId}))),e.conversations=e.conversations.map((function(e){return e._id===t.payload.conversationId?Object(u.a)(Object(u.a)({},e),{},{members:e.members.filter((function(e){return e._id!==t.payload.userId}))}):e}))},JUST_ONLINE:function(e,t){var n,c,a=t.payload[0]._id,s=t.payload[0].conversationId,i=null===(n=e.activeConversation)||void 0===n||null===(c=n.messages)||void 0===c?void 0:c.findIndex((function(e){return e._id===a}));e.activeConversation.id===s&&i&&(e.activeConversation.messages.splice(i),e.activeConversation.messages=[].concat(Object(j.a)(e.activeConversation.messages),Object(j.a)(t.payload)))},UPDATE_INDIVIDUAL_MESSAGE:function(e,t){var n=t.payload,c=n.message,a=n.updatedMessagesReplyingToRecalled;if(e.activeConversation.id===c.conversationId&&(e.activeConversation.messages=e.activeConversation.messages.map((function(e){return e._id===c._id?c:e}))),e.conversations=e.conversations.map((function(e){return e._id===c.conversationId?Object(u.a)(Object(u.a)({},e),{},{latestMessage:e.latestMessage._id===c._id?c:e.latestMessage}):e})),null===a||void 0===a?void 0:a.length){var s,i=Object(re.a)(a);try{var r=function(){var t=s.value;e.activeConversation.id===c.conversationId&&(e.activeConversation.messages=e.activeConversation.messages.map((function(e){return e._id===t._id?t:e})))};for(i.s();!(s=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}}},UPDATE_CONVERSATION:function(e,t){e.activeConversation.id===t.payload._id&&(e.activeConversation=Object(u.a)(Object(u.a)({},t.payload),{},{messages:e.activeConversation.messages})),e.conversations=e.conversations.map((function(e){return e._id===t.payload._id?t.payload:e}))}},extraReducers:(F={},Object(T.a)(F,le.pending,(function(e){e.isLoading=!0})),Object(T.a)(F,le.fulfilled,(function(e){e.isLoading=!1,e.hasError=!1})),Object(T.a)(F,le.rejected,(function(e){e.isLoading=!1,e.hasError=!0})),Object(T.a)(F,de.pending,(function(e){e.isLoading=!0})),Object(T.a)(F,de.fulfilled,(function(e){e.isLoading=!1,e.hasError=!1})),Object(T.a)(F,de.rejected,(function(e){e.isLoading=!1,e.hasError=!0})),F)}),be=je.actions,me=be.SET_CONVERSATIONS,he=be.UPDATE_CONVERSATION_LIST,pe=be.SET_ACTIVE_CONVERSATION,Oe=be.SET_MESSAGE_LIST,fe=be.UPDATE_MESSAGE_LIST,ve=be.SET_CHAT_ANIMATION,xe=be.RESET_CHAT_ON_LOGOUT,ge=be.SET_PARTICIPANT_ACTION,_e=be.UPDATE_ONLINE_USERS,ye=be.UPDATE_MESSAGES,Ne=(be.UPDATE_MESSAGE_STATUS,be.UPDATE_ACTIVE_CONVERSATION_THEME),Ce=be.UPDATE_SENT_MESSAGE_STATUS,ke=be.UNREAD_MESSAGES,we=be.UPDATE_MESSAGE_LIST_WITH_SEEN_BY_IDS,Se=be.UPDATE_ACTIVE_CONVERSATION_MEMBER_NICKNAMES,Te=be.UNSHIFT_MESSAGE_LIST,Ee=be.SET_ACTIVE_VIDEO_CALL,Ae=be.UPDATE_MESSAGE_LIST_ON_FILE_UPLOAD,Ie=be.UPDATE_MESSAGE_REACTIONS,Me=be.MESSAGE_TO_REPLY,Pe=be.SET_PIN_MESSAGE,Re=be.SET_INPUT_MODE,De=be.SET_MODAL,Le=be.UPDATE_CONVERSATION_LATEST_MESSAGE,Fe=be.REARRANGE_CONVERSATION_LIST,Be=be.UPDATE_MESSAGE_LIST_STATUS,Ue=be.ACTIVE_CONVERSATION_LASTSEEN,Ve=be.ON_USER_ENTERED_AND_READ_MESSAGES,We=be.SET_FORWARD_MESSAGE,Ge=be.UPDATE_BLOCK,ze=be.UPDATE_CHAT_NAME,He=be.REMOVE_CONVERSATION,qe=be.UPDATE_CHAT_PHOTO,Ye=be.UPDATE_CONVERSATION_MEMBERS,$e=be.USER_LEFT_CONVERSATION,Je=be.UPDATE_INDIVIDUAL_MESSAGE,Ke=be.JUST_ONLINE,Ze=be.UPDATE_CONVERSATION,Qe=je.reducer,Xe=function(){return function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.user.user||{}}))._id,n=Object(l.c)((function(e){return e.chat})),a=n.activeConversation,s=n.conversations,i=n.unreadMessages,r=n.onlineUsers,o=n.isLoading,d=n.activeVideoCall,j=n.forwardMessage,b=Object(c.useCallback)((function(){return e(le(t))}),[e,t]),m=Object(c.useCallback)((function(t){return e(he(t))}),[e]),h=Object(c.useCallback)((function(t){return e(Le(t))}),[e]),p=Object(c.useCallback)((function(t){return e(pe(t))}),[e]),O=Object(c.useCallback)((function(t){return e(Ue(t))}),[e]),f=Object(c.useCallback)((function(t){return e(Oe(t))}),[e]),v=Object(c.useCallback)((function(t){return e(fe(t))}),[e]),x=Object(c.useCallback)((function(){return e(Fe())}),[e]),g=Object(c.useCallback)((function(t){return e(Be(t))}),[e]),_=Object(c.useCallback)((function(t){return e(Ae(t))}),[e]),y=Object(c.useCallback)((function(t){return e(Ie(t))}),[e]);return{setConversations:b,setActiveConversation:p,setMessageList:f,updateMessageList:v,setChatAnimation:function(t){e(ve(t))},resetChatOnLogout:Object(c.useCallback)((function(){return e(xe())}),[e]),setParticipantAction:function(t){return e(ge(t))},updateOnlineUsers:Object(c.useCallback)((function(t){e(_e(t))}),[e]),activeConversation:a,conversations:s,updateMessages:function(n){n.sender===t?e(ye(Object(u.a)(Object(u.a)({},n),{},{status:!1}))):e(ye(Object(u.a)(Object(u.a)({},n),{},{status:!0})))},updateMessageListWithSeenByIds:function(t){return e(we(t))},updateActiveConversationTheme:function(t){return e(Ne(t))},updateSentMessageStatus:function(t){return e(Ce(t))},setUnreadMessages:function(t){return e(ke(t))},unreadMessages:i,onlineUsers:r,updateActiveConversationMemberNames:function(t){return e(Se(t))},unshiftMessageList:Object(c.useCallback)((function(t){return e(Te(t))}),[e]),getMore:function(t){return e(Te(t))},isLoading:o,setActiveVideoCall:function(t){return e(Ee(t))},activeVideoCall:d,updateMessageListOnFileUpload:_,updateMessageReaction:y,setPinnedMessage:function(t){return e(Pe(t))},messageToReply:function(t){return e(Me(t))},setInputMode:function(t){return e(Re(t))},setActiveModal:function(t){return e(De(t))},updateConversationList:m,updateConversationListLatestMessage:h,rearrangeConversationList:x,updateMessageListStatus:g,updateActiveConversationLastSeenMessage:O,userEnteredAndReadMessages:function(t){return e(Ve(t))},setForwardMessage:function(t){return e(We(t))},forwardMessage:j,updateBlock:function(t){return e(Ge(t))},updateChatName:function(t){return e(ze(t))},removeConversation:function(t){return e(He(t))},updateChatPhoto:function(t){return e(qe(t))},updateConversationMembers:function(t){return e(Ye(t))},userLeftConversation:function(t){return e($e(t))},updateIndividualMessage:function(t){return e(Je(t))},justOnline:function(t){return e(Ke(t))},updateConversation:function(t){return e(Ze(t))}}}()},et=n(39),tt=function(){var e=Object(c.useRef)(),t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(et.h)().pathname;Object(c.useEffect)((function(){var t=window.scrollY;return document.addEventListener("scroll",(function(){var n=window.scrollY;s(!1),a||e.current&&(n>t?(e.current.style.transform="translateY(10rem)",e.current.style.transition="transform 200ms"):(e.current.style.transform="translateY(0)",e.current.style.transition="transform 200ms")),t=n})),function(){document.removeEventListener("scroll",(function(){s(!1)}))}}),[a]);var r=se(),l=r.user,d=r.isAuthenticated,m=Object(c.useState)({}),h=Object(o.a)(m,2),p=h[0],O=(h[1],Xe().setChatAnimation,Object(c.useState)([])),f=Object(o.a)(O,2),v=f[0],g=f[1];ie(e,s);var y=l._id,C=Object(b.f)({defaultValues:{message:""}}),w=C.handleSubmit;C.reset,C.formState.isSubmitSuccessful;return!d||i.startsWith("/admin")||i.startsWith("/auth")||i.startsWith("/user")||"admin"===(null===l||void 0===l?void 0:l.role)?"":Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{ref:e,className:"chatBox",children:[Object(x.jsxs)("div",{className:"chatBox__instance ".concat(a?"open":null),children:[Object(x.jsxs)("div",{className:"instance__header",children:[Object(x.jsx)("span",{}),Object(x.jsx)("span",{onClick:function(){s(!1)},className:"closeMessage",children:Object(x.jsx)(S.a,{})})]}),Object(x.jsx)("div",{className:"instance__messages",children:(null===v||void 0===v?void 0:v.length)>0&&v.map((function(e){return Object(x.jsxs)("div",{className:"messageContainer ".concat(e.sender===y?"ownMessage":""),children:[Object(x.jsx)("span",{}),Object(x.jsx)("span",{children:e.text})]},e._id)}))}),Object(x.jsx)("div",{className:"instance__footer",children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},C),{},{children:Object(x.jsx)(N,{onSubmit:w((function(e){var t={sender:y,text:e.message?e.message:"\u2764\ufe0f",conversationId:p._id,room:p._id,animation:e.message.includes("\u2764\ufe0f")||!e.message?"shakeIt":"",recipient:["61691f7dbd648e8cec20c90a"]};Ho.emit("sendMessage",t),g([].concat(Object(j.a)(v),[t]))})),children:Object(x.jsxs)("div",{className:"inputBox",children:[Object(x.jsx)(_,{name:"message",margin:"none"}),Object(x.jsx)("button",{type:"submit",children:"send"})]})})}))})]}),Object(x.jsx)("div",{className:"chatBox__bubble ".concat(a?"hidden":null),children:Object(x.jsx)("div",{className:"openMessage",onClick:function(){return s(!0)},children:Object(x.jsx)(k.a,{})})})]})})},nt=(n(790),function(){var e=Object(et.h)().pathname;return Object(x.jsx)(x.Fragment,{children:e.startsWith("/admin")||e.startsWith("/auth")||e.startsWith("/checkout")||e.startsWith("/user")||e.startsWith("/cart")?"":Object(x.jsx)("div",{className:"footer",children:Object(x.jsx)("div",{className:"container",children:"footer"})})})}),ct=a.a.createContext(),at=a.a.createContext(),st=function(e){var t=e.children,n=Object(c.useState)(!1),a=Object(o.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)(!1),l=Object(o.a)(r,2),d=l[0],u=l[1];return Object(x.jsx)(ct.Provider,{value:[s,i],children:Object(x.jsx)(at.Provider,{value:[d,u],children:t})})},it=Object(M.c)({name:"cart",initialState:{items:[],quantity:0,cartTotal:0,totalAfterDiscount:0,totalWeight:0,isCouponApplied:!1,cartId:"",cartOwner:"",coupon:{}},reducers:{persistCartToRedux:function(e,t){e.items=t.payload,e.items&&(e.cartTotal=+e.items.reduce((function(e,t){return e+t.itemTotalAfterDiscount}),0),e.totalAfterDiscount=e.cartTotal,e.quantity=e.items.reduce((function(e,t){return e+t.buying}),0),e.totalWeight=e.items.reduce((function(e,t){return e+t.buying*(t.selectedSize||0)}),0))},persistSavedCartToRedux:function(e,t){e.items=t.payload.items,e.cartId=t.payload._id,e.cartOwner=t.payload.cartOwner||"guest",e.cartTotal=t.payload.cartTotal,e.quantity=t.payload.quantity,e.totalWeight=t.payload.totalWeight,e.totalAfterDiscount=t.payload.totalAfterDiscount||e.cartTotal,e.isCouponApplied=t.payload.isCouponApplied||!1,e.coupon=t.payload.coupon},removeCoupon:function(e){e.coupon={},e.isCouponApplied=!1,e.totalAfterDiscount=e.cartTotal}}}),rt=it.actions,ot=rt.persistCartToRedux,lt=rt.persistSavedCartToRedux,dt=rt.removeCoupon,ut=it.reducer,jt=(n(791),n(122)),bt=n.n(jt),mt=[{id:"61486e0d7ccfd049807353d0",name:"flower",slug:"flower",subCates:[{name:"dried flower",slug:"dried-flower"},{name:"pre-rolls",slug:"pre-rolls"},{name:"seeds",slug:"seeds"}],image:{scr:"https://cdn.shopify.com/s/files/1/2636/1928/files/MegaNav-Flower_f2b0924b-db88-4b79-899b-223c0982f45c_400x.jpg?v=1631023163",title:"High-THC Ounces",subTitle:"High quality, high potency"},shopBy:[{name:"shop by plant type",options:[{name:"indica-dominant",slug:"indica-dominant"},{name:"sativa-dominant",slug:"sativa-dominant"},{name:"hybrid",slug:"hybrid"}]},{name:"shop by value picks",options:[{name:"price drops",slug:"price-drops"},{name:"bulk buys",slug:"bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"}]},{name:"shop by potency",options:[{name:"thc > 22%",slug:"thc->-22"},{name:"balanced 1:1",slug:"balanced-1-1"},{name:"cbd dominant",slug:"cbd-dominant"}]},{name:"featured collections",options:[{name:"new flower",slug:"new-flower"},{name:"craft cannabis",slug:"craft-cannabis"},{name:"limited release",slug:"limited-release"},{name:"milled flower",slug:"milled-flower"}]}]},{name:"vapes",slug:"vapes",subCates:[{name:"510 thread cartridges",slug:"510-thread-cartridges"},{name:"pad pods",slug:"pad-pods"},{name:"closed loop",slug:"seeds"},{name:"disposable pens",slug:"disposable-pens"},{name:"starter kits",slug:"starter-kits"},{name:"vape batteries",slug:"vape-batteries"}],image:{scr:"https://cdn.shopify.com/s/files/1/2636/1928/files/MegaNav-Vapes_dfdec766-3076-44a1-a350-059013990e72_400x.jpg?v=1631023196",title:"best vapes",subTitle:"explore our high quality vapes"},shopBy:[{name:"shop by plant type",options:[{name:"indica-dominant",slug:"indica-dominant"},{name:"sativa-dominant",slug:"sativa-dominant"},{name:"hybrid",slug:"hybrid"}]},{name:"shop by value picks",options:[{name:"price drops",slug:"price-drops"},{name:"1g catridges",slug:"1g-catridges"},{name:"vapes under $5 /0.1g",slug:"vapes-under-$5-0.1g"},{name:"1g vapes under $50",slug:"1g-vapes-under-$50"}]},{name:"shop by potency",options:[{name:"thc > 22%",slug:"thc->-22"},{name:"balanced 1:1",slug:"balanced-1-1"},{name:"cbd dominant",slug:"cbd-dominant"}]},{name:"featured collections",options:[{name:"new vape",slug:"new-vape"},{name:"flavored cannabis",slug:"flavored-cannabis"},{name:"pax era pods",slug:"pax-era-pods"},{name:"full spectrum vapes",slug:"full-spectrum-vapes"}]}]},{name:"extracts",slug:"extracts",subCates:[{name:"oils",slug:"oils"},{name:"capsules",slug:"capsules"},{name:"hash",slug:"hash"},{name:"kief and sift",slug:"kief-and-sift"},{name:"resin",slug:"resin"},{name:"rosin",slug:"rosin"},{name:"shatter and wax",slug:"shatter-and-wax"},{name:"isolates and distilates",slug:"isolates and distilates"}],image:{scr:"https://cdn.shopify.com/s/files/1/2636/1928/files/MegaNav-Concentrates_646767c4-62fb-41ef-b7cc-7f5a556b684b_400x.jpg?v=1631023236",title:"High-THC Ounces",subTitle:"High quality, high potency"},shopBy:[{name:"shop by plant type",options:[{name:"indica-dominant",slug:"indica-dominant"},{name:"sativa-dominant",slug:"sativa-dominant"},{name:"hybrid",slug:"hybrid"}]},{name:"shop by value picks",options:[{name:"price drops",slug:"price-drops"},{name:"bulk buys",slug:"bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"}]},{name:"shop by potency",options:[{name:"thc > 22%",slug:"thc->-22"},{name:"balanced 1:1",slug:"balanced-1-1"},{name:"cbd dominant",slug:"cbd-dominant"}]},{name:"featured collections",options:[{name:"new flower",slug:"new-flower"},{name:"craft cannabis",slug:"craft-cannabis"},{name:"limited release",slug:"limited-release"},{name:"milled flower",slug:"milled-flower"}]}]},{name:"edibles",slug:"edibles",subCates:[{name:"soft chews",slug:"soft-chews"},{name:"hard edibles",slug:"hard-edibles"},{name:"chocolates",slug:"chocolates"},{name:"baked goods",slug:"baked-goods"},{name:"beverages",slug:"beverages"}],image:{scr:"https://cdn.shopify.com/s/files/1/2636/1928/files/MegaNav-Edibles_5a856545-4a0b-4ee3-9a0c-1c3cd76a9c81_400x.jpg?v=1631023297",title:"High-THC Ounces",subTitle:"High quality, high potency"},shopBy:[{name:"shop by plant type",options:[{name:"indica-dominant",slug:"indica-dominant"},{name:"sativa-dominant",slug:"sativa-dominant"},{name:"hybrid",slug:"hybrid"}]},{name:"shop by value picks",options:[{name:"price drops",slug:"price-drops"},{name:"bulk buys",slug:"bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"}]},{name:"shop by potency",options:[{name:"thc > 22%",slug:"thc->-22"},{name:"balanced 1:1",slug:"balanced-1-1"},{name:"cbd dominant",slug:"cbd-dominant"}]},{name:"featured collections",options:[{name:"new flower",slug:"new-flower"},{name:"craft cannabis",slug:"craft-cannabis"},{name:"limited release",slug:"limited-release"},{name:"milled flower",slug:"milled-flower"}]}]},{name:"cbd & topicals",slug:"cbd-&-topicals",subCates:[{name:"dried flower",slug:"dried-flower"},{name:"pre-rolls",slug:"pre-rolls"},{name:"seeds",slug:"seeds"}],image:{scr:"https://cdn.shopify.com/s/files/1/2636/1928/files/MegaNav-CBD_22b1f71b-7b41-40e3-92d4-9f8224d050f0_400x.jpg?v=1631023315",title:"High-THC Ounces",subTitle:"High quality, high potency"},shopBy:[{name:"shop by plant type",options:[{name:"indica-dominant",slug:"indica-dominant"},{name:"sativa-dominant",slug:"sativa-dominant"},{name:"hybrid",slug:"hybrid"}]},{name:"shop by value picks",options:[{name:"price drops",slug:"price-drops"},{name:"bulk buys",slug:"bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"}]},{name:"shop by potency",options:[{name:"thc > 22%",slug:"thc->-22"},{name:"balanced 1:1",slug:"balanced-1-1"},{name:"cbd dominant",slug:"cbd-dominant"}]},{name:"featured collections",options:[{name:"new flower",slug:"new-flower"},{name:"craft cannabis",slug:"craft-cannabis"},{name:"limited release",slug:"limited-release"},{name:"milled flower",slug:"milled-flower"}]}]},{name:"accessories",slug:"accessories",subCates:[{name:"dried flower",slug:"dried-flower"},{name:"pre-rolls",slug:"pre-rolls"},{name:"seeds",slug:"seeds"}],image:{scr:"https://cdn.shopify.com/s/files/1/2636/1928/files/MegaNav-Accessories_400x.jpg?v=1631023355",title:"High-THC Ounces",subTitle:"High quality, high potency"},shopBy:[{name:"shop by plant type",options:[{name:"indica-dominant",slug:"indica-dominant"},{name:"sativa-dominant",slug:"sativa-dominant"},{name:"hybrid",slug:"hybrid"}]},{name:"shop by value picks",options:[{name:"price drops",slug:"price-drops"},{name:"bulk buys",slug:"bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"},{name:"pre-roll bulk buys",slug:"pre-roll-bulk-buys"}]},{name:"shop by potency",options:[{name:"thc > 22%",slug:"thc->-22"},{name:"balanced 1:1",slug:"balanced-1-1"},{name:"cbd dominant",slug:"cbd-dominant"}]},{name:"featured collections",options:[{name:"new flower",slug:"new-flower"},{name:"craft cannabis",slug:"craft-cannabis"},{name:"limited release",slug:"limited-release"},{name:"milled flower",slug:"milled-flower"}]}]}];function ht(){var e=Object(et.g)();return Object(x.jsx)("div",{className:"category-area",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{children:"Categories"}),Object(x.jsx)("div",{className:"category-slider",children:Object(x.jsx)(bt.a,Object(u.a)(Object(u.a)({},{dots:!1,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:4,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),{},{children:mt.map((function(t){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{onClick:function(){e.push({pathname:"/collections/".concat(t.slug),state:{id:t.id}})},className:"category-card",children:[Object(x.jsx)("div",{className:"card-title",children:Object(x.jsx)("h3",{children:t.name})}),Object(x.jsx)("div",{className:"card-img",children:Object(x.jsx)("img",{src:t.image.scr,alt:""})})]})},t.slug)}))}))})]})})}n(807);var pt=function(){return Object(x.jsx)("div",{className:"best-seller-area",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"best-seller",children:[Object(x.jsxs)("div",{className:"best-seller-header",children:[Object(x.jsx)("h2",{className:"best-seller-title",children:"Explore Our Best Sellers"}),Object(x.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ullam alias placeat praesentium!"})]}),Object(x.jsx)("div",{className:"best-seller-tabs",children:Object(x.jsx)("div",{className:"best-seller-tabs-contents",children:Object(x.jsx)(bt.a,Object(u.a)({},{infinite:!1,speed:600,slidesToShow:4,slidesToScroll:4,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}))})})]})})})},Ot=(n(808),n(203)),ft=n(602),vt=n(601),xt=n(427),gt=n(248),_t=n.n(gt),yt=n(1006),Nt=n(1021),Ct=Object(xt.a)((function(){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},product__preview:{width:"62vw",height:"70vh",backgroundColor:"white",display:"flex",gap:"2rem",position:"relative"},product__img:{padding:"2rem",width:"40%",height:"100%",marginTop:"3rem"},product__details:{padding:"4rem 0",paddingRight:"2rem",width:"60%",height:"100%"},product__title:{paddingBottom:"0.8rem"},product__stars:{paddingBottom:"2rem"},product__price:{paddingBottom:"0.8rem"},product__available:{paddingBottom:"2rem"},product__des:{paddingBottom:"2.5rem",lineHeight:"1.5em"},product__des__p:{overflow:"hidden",display:"-webkit-box",lineHeight:"1.7em","-webkit-line-clamp":3,"-webkit-box-orient":"vertical"},product__action:{paddingBottom:"2rem",display:"flex",alignItems:"center",gap:"1rem"},product__footer:{paddingTop:"1.7rem",display:"flex"},product__footer__info:{listStyle:"none",margin:"5px 0"},product__footer__ul:{marginRight:"20px"}}})),kt=function(e){var t=e.handleClose,n=e.open,a=e.product,s=Object(c.useContext)(Mn),i=Object(et.g)(),r=Ct();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ot.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.modal,open:n,onClose:function(){return t("closePreview")},closeAfterTransition:!0,BackdropComponent:vt.a,BackdropProps:{timeout:200},children:Object(x.jsx)(ft.a,{in:n,children:Object(x.jsxs)("div",{className:r.product__preview,children:[Object(x.jsx)("div",{className:r.product__img,children:Object(x.jsx)("img",{width:"100%",src:a.thumbnail?a.thumbnail.url:a.images[0].url,alt:a.title})}),Object(x.jsxs)("div",{className:r.product__details,children:[Object(x.jsx)("h2",{className:r.product__title,children:a.title}),a.avgRating&&Object(x.jsxs)("div",{className:r.product__stars,children:[Object(x.jsx)(Nt.a,{name:"read-only",value:a.avgRating,precision:.5,readOnly:!0})," "]}),Object(x.jsxs)("div",{className:r.product__price,children:["$",a.price," /g"]}),Object(x.jsxs)("div",{className:r.product__available,children:["Available: ",a.quantity," in stock"]}),Object(x.jsx)("div",{className:r.product__des,children:Object(x.jsx)("p",{className:r.product__des__p,children:a.description})}),Object(x.jsxs)("div",{className:r.product__action,children:[Object(x.jsx)(yt.a,{title:"Add to cart",placement:"top",children:Object(x.jsx)("button",{onClick:function(){i.push("/".concat(a.slug)),s("closePreview")},className:"primary-btn btn bouncy",children:"Go to product"})}),Object(x.jsx)(yt.a,{title:"Wish list",placement:"top",children:Object(x.jsx)(_t.a,{style:{cursor:"pointer"}})})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:r.product__footer,children:[Object(x.jsxs)("ul",{className:r.product__footer__ul,children:[Object(x.jsx)("li",{className:r.product__footer__info,children:"Category:"}),Object(x.jsx)("li",{className:r.product__footer__info,children:"Subcategory:"}),Object(x.jsx)("li",{className:r.product__footer__info,children:"Brand:"})]}),Object(x.jsxs)("ul",{className:r.product__footer__ul,children:[Object(x.jsx)("li",{className:r.product__footer__info,children:a.category.name.toUpperCase()}),Object(x.jsx)("li",{className:r.product__footer__info,children:a.subCategory.name.toUpperCase()}),Object(x.jsx)("li",{className:r.product__footer__info,children:a.details.brand})]})]})]}),Object(x.jsx)("button",{onClick:function(){return t("closePreview")},style:{position:"absolute",right:"1rem",top:"1rem"},className:"primary-btn btn bouncy",children:"X"})]})})})})},wt=n(984),St=n(987),Tt=n(989),Et=n(990),At=n(991),It=n(992),Mt=n(995),Pt=n(32),Rt=n(969),Dt=Object(Rt.a)({root:{display:"flex",gap:"2rem"}});function Lt(e){var t=e.open,n=e.handleState,c=e.message,a=e.title,s=void 0===a?"Confirmation Needed":a,i=e.setConfirm,r=Object(Pt.a)(),o=Object(Mt.a)(r.breakpoints.down("sm")),l=Dt();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(St.a,{fullScreen:o,open:t,onClose:function(){return n("closeDialog")},"aria-labelledby":"responsive-dialog-title",children:[Object(x.jsx)(It.a,{id:"responsive-dialog-title",children:s}),Object(x.jsx)(Et.a,{children:Object(x.jsx)(At.a,{children:c})}),Object(x.jsxs)(Tt.a,{className:l.root,children:[Object(x.jsx)(wt.a,{onClick:function(){n("closeDialog"),i(!0)},color:"primary",autoFocus:!0,children:"Yes"}),Object(x.jsx)(wt.a,{autoFocus:!0,onClick:function(){n("closeDialog"),i(!1)},color:"primary",children:"No"})]})]})})}var Ft=n(1020),Bt=n(249),Ut=n.n(Bt),Vt=n(983),Wt=n(139),Gt=n.n(Wt),zt=n(251),Ht=n.n(zt),qt=n(250),Yt=n.n(qt),$t=(n(809),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t(!0),setTimeout((function(){t(!1),e.forEach((function(e){return e()}))}),600*n)}),Jt=function(){return function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.cart})).items;function n(t){localStorage.setItem("cart",JSON.stringify(t)),e(ot(t))}return{handleQuantity:function(e,c,a,s,i,r){n(t.map((function(t){return t.item._id===c._id&&t.selectedSize!==a||t.item._id!==c._id?t:Object(u.a)(Object(u.a)({},t),{},{item:c,buying:"add"===e?s+1:s-1,itemTotalAfterDiscount:("add"===e?s+1:s-1)*i*(a||1),selectedSize:a,discountedPrice:i,asignedDiscount:r})})))},removeItem:function(e,c){n([].concat(Object(j.a)(t.filter((function(t){return t.item._id!==e._id}))),Object(j.a)(t.filter((function(t){return t.item._id===e._id&&t.selectedSize!==c})))))},addItemToCart:function(t,c,a){function s(){var e,n,c,s;return null!==(e=null!==(n=null!==(c=null!==(s=t.discount[t.size.indexOf(a)])&&void 0!==s?s:t.discount[t.size.indexOf(a)-1])&&void 0!==c?c:t.discount[2])&&void 0!==n?n:t.discount[1])&&void 0!==e?e:0}function i(){return(t.price-t.price*s()/100)*(a||1)*c}var r={item:Object(u.a)({},t),buying:c,selectedSize:a,origonalPrice:t.price,discountedPrice:t.price-t.price*s()/100,itemTotalAfterDiscount:i(),asignedDiscount:s()},o=JSON.parse(localStorage.getItem("cart"));if(o)if(Array.isArray(o)){var l=o.find((function(e){return e.item._id===r.item._id&&e.selectedSize===a}));n(o=l?[].concat(Object(j.a)(o.filter((function(e){return e.item._id===l.item._id&&e.selectedSize!==a}))),Object(j.a)(o.filter((function(e){return e.item._id!==l.item._id}))),[Object(u.a)(Object(u.a)({},l),{},{buying:l.buying+c,itemTotalAfterDiscount:l.itemTotalAfterDiscount+i()})]):[].concat(Object(j.a)(o),[r]))}else localStorage.setItem("cart",JSON.stringify([]));else localStorage.setItem("cart",JSON.stringify([r])),e(ot([r]))}}}()},Kt=Object(xt.a)({root:{width:400,height:"100vh",position:"relative",display:"flex",flexDirection:"column"}}),Zt=function(e){var t=e.handleState,n=e.open,a=Object(et.g)(),s=Object(c.useContext)(ct)[1],i=Object(l.c)((function(e){return e.cart})),r=i.quantity,o=i.items,d=i.cartTotal,u=i.totalWeight,j=Jt(),b=j.handleQuantity,m=j.removeItem,h=Kt(),p=se().isAuthenticated;return Object(x.jsx)("div",{children:Object(x.jsx)(Ft.a,{anchor:"right",open:n,onClose:function(){return t("closeDrawer")},onOpen:function(){return t("openDrawer")},children:Object(x.jsxs)("div",{className:h.root,children:[Object(x.jsxs)("div",{className:"drawer drawer-title",children:[Object(x.jsx)("button",{onClick:function(){return t("closeDrawer")},className:"transparent-btn btn ",children:Object(x.jsx)(Gt.a,{})}),Object(x.jsx)("h2",{children:"Bag"}),Object(x.jsx)("div",{className:"drawer-title__bag-icon",children:Object(x.jsx)(Vt.a,{badgeContent:r,color:"secondary",children:Object(x.jsx)(Ut.a,{})})})]}),Object(x.jsxs)("div",{className:"drawer drawer-items",children:[o&&0===o.length&&Object(x.jsx)("p",{className:"no-items",children:"No items"}),o&&o.length>0&&o.map((function(e,t){var n=e.item,c=e.selectedSize,a=e.buying,s=e.itemTotalAfterDiscount,i=e.discountedPrice,r=e.asignedDiscount;return n?Object(x.jsxs)("div",{className:"drawer-item",children:[Object(x.jsxs)("p",{children:["$",null===s||void 0===s?void 0:s.toFixed(2)]}),Object(x.jsxs)("div",{className:"item-image",children:[Object(x.jsx)("img",{src:null===n||void 0===n?void 0:n.thumbnail.url,alt:""}),Object(x.jsxs)("div",{className:"item-image__quantity",children:[Object(x.jsx)("button",{className:"transparent-btn",onClick:function(){a<2?m(n,c):b("subtr",n,c,a,i,r)},children:Object(x.jsx)(Yt.a,{})}),Object(x.jsx)("span",{children:a}),Object(x.jsx)("button",{className:"transparent-btn",onClick:function(){return b("add",n,c,a,i,r)},children:Object(x.jsx)(Ht.a,{})})]})]}),Object(x.jsxs)("div",{className:"item-info",children:[Object(x.jsx)("p",{className:"item-info__brand",children:null===n||void 0===n?void 0:n.details.brand}),Object(x.jsx)("h4",{className:"item-info__title",children:null===n||void 0===n?void 0:n.title}),Object(x.jsxs)("p",{children:[" ",Object(x.jsx)("b",{children:"THC"})," ",(null===n||void 0===n?void 0:n.details.thc_content.length)>0?Object(x.jsxs)(x.Fragment,{children:[null===n||void 0===n?void 0:n.details.thc_content[0].toFixed(2)," -"," ",null===n||void 0===n?void 0:n.details.thc_content[1].toFixed(2),"%"]}):Object(x.jsx)("span",{children:"unknown"})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"CBD"})," ",(null===n||void 0===n?void 0:n.details.cbd_content.length)>0?Object(x.jsxs)(x.Fragment,{children:[null===n||void 0===n?void 0:n.details.cbd_content[0].toFixed(2)," -"," ",null===n||void 0===n?void 0:n.details.cbd_content[1].toFixed(2),"%"]}):Object(x.jsx)("span",{children:"unknown"})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Size"})," ",c]})]}),Object(x.jsx)("button",{onClick:function(){return m(n,c)},className:"transparent-btn btn ",children:Object(x.jsx)(Gt.a,{})})]},(null===n||void 0===n?void 0:n._id)+t):[]}))]}),Object(x.jsxs)("div",{className:"drawer drawer-bottom",children:[Object(x.jsxs)("div",{className:"cart-summary",children:[Object(x.jsxs)("div",{className:"total-amount",children:[Object(x.jsx)("p",{children:Object(x.jsx)("strong",{children:"Amount:"})}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[u.toFixed(2)," / 100.00g limit "]})})]}),u>100&&Object(x.jsxs)("p",{children:["You have exceeded your ",Object(x.jsx)("strong",{children:"100.00g limit"})," of canabis per purchase. Remove some or we might have to call the cops!"," "]}),Object(x.jsxs)("div",{className:"total",children:[Object(x.jsx)("p",{children:Object(x.jsx)("strong",{children:"Total:"})}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:["$",d.toFixed(2)]})})]})]}),Object(x.jsxs)("div",{className:"cart-actions",children:[p?Object(x.jsx)("button",{onClick:function(){t("closeDrawer")},className:"btn",children:"Continue Shopping"}):Object(x.jsx)("button",{onClick:function(){$t([function(){return t("closeDrawer")},function(){return a.push({pathname:"/auth/login",state:{from:"/checkout"}})}],s)},className:"btn",children:"Sign In"}),Object(x.jsx)("button",{onClick:function(){$t([function(){return t("closeDrawer")},function(){return a.push("/checkout")}],s)},disabled:u>100||0===r,className:"btn ".concat(u>100||0===r?"disabled":null),children:p?"Checkout":"Checkout as guest"})]})]})]})})})},Qt=n(1005),Xt=n(259),en=n(261),tn=n(533),nn=n.n(tn),cn=n(965),an=n(998),sn=n(106),rn=n.n(sn),on=n(252),ln=n.n(on),dn=n(1007),un=n(340),jn=n.n(un),bn=function(e){return R.a.post("".concat("http://localhost:8000/api/v1","/uploadimages"),{image:e})},mn=function(e){return R.a.post("".concat("http://localhost:8000/api/v1","/removeimages"),{public_id:e})},hn=Object(Rt.a)({root:{backgroundColor:"transparent",textAlign:"center",cursor:"pointer",color:"#333",padding:"10px",height:"10rem"},icon:{marginTop:"16px",color:"#888",fontSize:"42px"},removeIcon:{color:"#bbbbbb"},list:{display:"flex","flex-wrap":"wrap",gap:"1rem"},listItem:{width:"5rem",height:"5rem",padding:"0",cursor:"pointer",borderRadius:"50%","&:hover":{opacity:"0.7"},"&:hover .makeThumb ":{display:"block"}},skele:{position:"absolute",right:0,top:0,width:"1em",height:"1em"},marked:{position:"absolute",left:"35%",transform:"translateY(-135%) scale(1.5)"},makeThumbnail:{display:"none",position:"absolute",left:"35%",transform:"translateY(-135%)"},listItemImg:{width:"100%",height:"100%",borderRadius:"50%"}}),pn=function(e){var t=e.control,n=e.name,a=e.setValue,s=e.getValues,i=e.setImages,r=e.images,l=e.numb,d=e.setNumb,m=Object(c.useContext)(ct)[1],h=Object(c.useContext)(at),p=Object(o.a)(h,2),O=p[0],f=p[1],v=hn(),g=Object(c.useState)(""),_=Object(o.a)(g,2),y=_[0],N=_[1];return Object(x.jsx)(b.a,{control:t,name:n,defaultValue:[],render:function(e){var t=e.field;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(cn.a,{className:v.list,children:O?Array(l).fill("").map((function(e,t){return Object(x.jsxs)("div",{style:{width:"5rem",height:"5rem",position:"relative"},children:[Object(x.jsx)(dn.a,{className:v.listItem,animation:!!O&&"pulse",variant:"circle",style:{width:"5rem",height:"5rem"}}),Object(x.jsx)(dn.a,{className:v.skele,animation:"pulse",variant:"circle",width:10,height:10})]},t)})):t.value&&t.value.map((function(e,t){return Object(x.jsxs)(an.a,{className:v.listItem,children:[Object(x.jsx)("span",{className:"".concat(v.makeThumbnail," makeThumb"),children:Object(x.jsx)(jn.a,{color:"error"})}),y===e.public_id&&Object(x.jsx)("span",{className:v.marked,children:Object(x.jsx)(jn.a,{color:"error"})}),Object(x.jsx)("img",{onClick:function(){a("thumbnail",e),N(e.public_id)},className:v.listItemImg,src:e.url,alt:e.public_id}),Object(x.jsx)("span",{onClick:function(){!function(e,t){m(!0),d((function(e){return e-1}));var n=s("images"),c=n[t].public_id;mn(c).then((function(e){a("images",n.filter((function(e){return e.public_id!==c}))),i&&i(n.filter((function(e){return e.public_id!==c}))),m(!1)}))}(0,t),y===e.public_id&&(a("thumbnail",{}),N(""))},className:"remove-btn",children:Object(x.jsx)(ln.a,{className:v.removeIcon})})]},t)}))}),Object(x.jsx)(Xt.a,{maxFiles:10,onDrop:function(e){!function(e,t){var n=null!==r&&void 0!==r?r:[];if(e){f(!0),m(!0),d(l+e.length);for(var c=0;c<e.length;c++)rn.a.imageFileResizer(e[c],720,720,"JPEG",100,0,(function(e){bn(e).then((function(e){n.push(e.data),f(!1),m(!1),i&&i(Object(j.a)(n)),t(Object(j.a)(n))})).catch((function(e){console.log(e)}))}))}}(e,t.onChange)},children:function(e){var c=e.getRootProps,a=e.getInputProps,s=e.isDragActive;return Object(x.jsxs)(en.a,Object(u.a)(Object(u.a)({className:v.root},c()),{},{variant:"outlined",children:[Object(x.jsx)(nn.a,{className:v.icon}),Object(x.jsx)("input",Object(u.a)(Object(u.a)({},a()),{},{name:n,onBlur:t.onBlur})),s?Object(x.jsx)("p",{children:"Drop here!!"}):Object(x.jsx)("p",{children:"Drag 'n' drop here, or click to select"})]}))}})]})}})},On=function(e){return B.post("/products",{page:e})},fn=n(1014),vn=n(1023),xn=(n(810),function(e){var t=e.something,n=e.type;return Object(x.jsx)("div",{className:"gaugeMeter",children:"THC"===n?Object(x.jsxs)("svg",{width:"100%",height:"100%",viewBox:"-10 0 300 300",children:[Object(x.jsxs)("linearGradient",{id:"linearColors1",x1:"0",y1:"0",x2:"1",y2:"1",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#91c44d"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#8cc63f"})]}),Object(x.jsxs)("linearGradient",{id:"linearColors2",x1:"0.5",y1:"0",x2:"0.5",y2:"1",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#8cc63f"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#ebc750"})]}),Object(x.jsxs)("linearGradient",{id:"linearColors3",x1:"1",y1:"0",x2:"0",y2:"1",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#ebc750"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#f7d373"})]}),Object(x.jsxs)("linearGradient",{id:"linearColors4",x1:"1",y1:"1",x2:"0",y2:"0",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#f7d373"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#e27c2a"})]}),Object(x.jsxs)("linearGradient",{id:"linearColors5",x1:"0.5",y1:"1",x2:"0.5",y2:"0",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#e27c2a"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#ab3726"})]}),Object(x.jsxs)("linearGradient",{id:"linearColors6",x1:"0",y1:"1",x2:"1",y2:"0",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#ab3726"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#ab3726"})]}),Object(x.jsx)("text",{x:"50%",y:"45%",textAnchor:"middle",stroke:"black",strokeWidth:"2px",dy:".3em",children:n}),Object(x.jsx)("path",{d:"M150 10 a120 120 0 0 1 103.9230 60",fill:"none",stroke:"url(#linearColors1)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M253.9230 70 a120 120 0 0 1 0 120",fill:"none",stroke:"url(#linearColors2)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M253.9230 190 a120 120 0 0 1 -103.9230 60",fill:"none",stroke:"url(#linearColors3)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M150 250 a120 120 0 0 1 -103.9230 -60",fill:"none",stroke:"url(#linearColors4)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M46.077 190 a120 120 0 0 1 0 -120",fill:"none",stroke:"url(#linearColors5)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M46.077 70 a120 120 0 0 1 103.9230 -60",fill:"none",stroke:"url(#linearColors6)",strokeWidth:"20",strokeDasharray:"120 "}),Object(x.jsx)("circle",{className:"outline",cx:"-130",cy:"50%",r:"120",fill:"none",stroke:"#e6e6e6",strokeWidth:"23",strokeDasharray:"900",strokeDashoffset:"".concat(7.5*-t)})]}):Object(x.jsxs)("svg",{width:"100%",height:"100%",viewBox:"-10 0 300 300",children:[Object(x.jsxs)("linearGradient",{id:"cbdColors1",x1:"0",y1:"0",x2:"1",y2:"1",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#acebff"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#acebff"})]}),Object(x.jsxs)("linearGradient",{id:"cbdColors2",x1:"0.5",y1:"0",x2:"0.5",y2:"1",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#acebff"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#3ecefc"})]}),Object(x.jsxs)("linearGradient",{id:"cbdColors3",x1:"1",y1:"0",x2:"0",y2:"1",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#3ecefc"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#3ecefc"})]}),Object(x.jsxs)("linearGradient",{id:"cbdColors4",x1:"1",y1:"1",x2:"0",y2:"0",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#3ecefc"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#3ecefc"})]}),Object(x.jsxs)("linearGradient",{id:"cbdColors5",x1:"0.5",y1:"1",x2:"0.5",y2:"0",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#3ecefc"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#3ecefc"})]}),Object(x.jsxs)("linearGradient",{id:"cbdColors6",x1:"0",y1:"1",x2:"1",y2:"0",children:[Object(x.jsx)("stop",{offset:"0%",stopColor:"#3ecefc"}),Object(x.jsx)("stop",{offset:"100%",stopColor:"#00a99d"})]}),Object(x.jsx)("text",{x:"50%",y:"45%",textAnchor:"middle",stroke:"black",strokeWidth:"2px",dy:".3em",children:n}),Object(x.jsx)("path",{d:"M150 10 a120 120 0 0 1 103.9230 60",fill:"none",stroke:"url(#cbdColors1)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M253.9230 70 a120 120 0 0 1 0 120",fill:"none",stroke:"url(#cbdColors2)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M253.9230 190 a120 120 0 0 1 -103.9230 60",fill:"none",stroke:"url(#cbdColors3)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M150 250 a120 120 0 0 1 -103.9230 -60",fill:"none",stroke:"url(#cbdColors4)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M46.077 190 a120 120 0 0 1 0 -120",fill:"none",stroke:"url(#cbdColors5)",strokeWidth:"20",strokeDasharray:"120 10"}),Object(x.jsx)("path",{d:"M46.077 70 a120 120 0 0 1 103.9230 -60",fill:"none",stroke:"url(#cbdColors6)",strokeWidth:"20",strokeDasharray:"120 "}),Object(x.jsx)("circle",{className:"outline",cx:"-130",cy:"50%",r:"120",fill:"none",stroke:"#e6e6e6",strokeWidth:"23",strokeDasharray:"900",strokeDashoffset:"".concat(7.5*-t)})]})})}),gn=["type","setPote"],_n=function(e){var t=e.type,n=e.setPote,a=Object(m.a)(e,gn),s=Object(b.g)(),i=s.setValue,r=s.getValues,l=Object(c.useState)([0,15]),d=Object(o.a)(l,2),j=d[0],h=d[1];return Object(c.useEffect)((function(){"edit"!==a.mode&&(i("details.cbd_content",[0,0]),i("details.thc_content",[0,0]))}),[a.mode,i]),Object(x.jsxs)("div",{className:"productInfo__".concat(t," thc__cbd__content"),children:[Object(x.jsx)(xn,{something:j[1],type:"thc_content"===t?"THC":"CBD"}),Object(x.jsx)(vn.a,Object(u.a)(Object(u.a)({},a),{},{value:j,onChange:function(e,t){h(t)},onChangeCommitted:function(e,c){"thc_content"===t?i("details.thc_content",c):"cbd_content"===t&&i("details.cbd_content",c),r("details.cbd_content")&&r("details.thc_content")&&function(){var e=r("details.cbd_content")[1],t=r("details.thc_content")[1],c=e-t;c<=15&&c>=0?(i("details.potency","Mild"),n("Mild")):c>15&&c<=50?(i("details.potency","Very Mild"),n("Very Mild")):c>50&&c<=66?(i("details.potency","Extremely Mild"),n("Extremely Mild")):c>66?(i("details.potency","Little To Minimal"),n("Little To Minimal")):c<0&&c>=-15?(i("details.potency","Mild"),n("Mild")):c<-15&&c>=-31?(i("details.potency","Strong"),n("Strong")):c>=-50&&c<-31||c>-50&&c<=-66?(i("details.potency","Very Strong"),n("Very Strong")):c<-66&&(i("details.potency","Insanely Strong"),n("Insanely Strong"))}()},valueLabelDisplay:"auto","aria-labelledby":"range-slider"}))]})},yn="#3ecefc",Nn="#00a99d",Cn="#91c44d",kn="#ebc750",wn="#f7d373",Sn="#e27c2a",Tn="#ab3726";function En(e){switch(e){case"Little To Minimal":return yn;case"Mild":return kn;case"Very Mild":return Cn;case"Extremely Mild":return Nn;case"Strong":return wn;case"Very Strong":return Sn;default:return Tn}}var An=Object(xt.a)((function(e){return{root:{display:"grid",placeItems:"center",zIndex:"9999999"},editPanel:{width:"70vw",height:"50rem",backgroundColor:"#fff",position:"relative",overflowY:"auto",padding:"5rem"},closeBtn:{position:"absolute",right:"1rem",top:"1rem",zIndex:"20"},upload:{height:"20rem",padding:"1rem"},uploaded:{padding:"2rem","& >h3":{marginBottom:"1rem"}},fields:{padding:"1rem"},list:{display:"flex","flex-wrap":"wrap",gap:"1rem"},listItem:{width:"5rem",height:"5rem",padding:"0",borderRadius:"50%"},listItemImg:{width:"100%",height:"100%",borderRadius:"50%"},potency:{padding:"2rem","& > .potency__header":{marginBottom:"1rem"},"& > .potency__content":{"&> div:first-child":{marginBottom:"2rem"}}},actions:{padding:"1rem"},form:{display:"flex","flex-wrap":"wrap","& > div":{width:"50%"}}}})),In=function(e){var t=e.handleState,n=e.state,a=e.product,s=e.setIsEditing,i=e.isEditing,r=An(),l=Object(c.useState)([]),d=Object(o.a)(l,2),m=d[0],h=d[1],p=Object(c.useContext)(ct)[1],O=Object(c.useState)(0),f=Object(o.a)(O,2),v=f[0],g=f[1],y=Object(c.useState)([]),C=Object(o.a)(y,2),k=C[0],w=C[1],S=Object(c.useState)(""),T=Object(o.a)(S,2),E=T[0],A=T[1],I=i&&Object.keys(a.details).filter((function(e){return"thc_content"!==e&&"cbd_content"!==e&&"potency"!==e})),M=i&&Object.keys(a).filter((function(e){return"details"!==e&&"_id"!==e&&"slug"!==e&&"category"!==e&&"subCategory"!==e&&"sold"!==e&&"createdAt"!==e&&"updatedAt"!==e&&"rating"!==e&&"__v"!==e&&"avgRating"!==e&&"images"!==e&&"discount"!==e&&"size"!==e})),P=i?[].concat(Object(j.a)(M),Object(j.a)(I)):[],R=Object(b.f)(),D=R.register,L=R.handleSubmit,F=R.control,U=R.reset,V=R.setValue,W=R.getValues,G=R.formState,z=G.errors,H=G.isSubmitSuccessful,q=G.isValid;function Y(e){var t,n;window.localStorage.getItem("accessToken");p(!0),(t=a._id,n=e,B.patch("/product/imgs/".concat(t),{img:n})).then((function(t){mn(e).then((function(){w(k.filter((function(t){return t.public_id!==e}))),p(!1)}))}))}var $=Object(c.useCallback)((function(){U(),h([]),g(0),w([])}),[U]);return Object(c.useEffect)((function(){H&&$()}),[H,q,$]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ot.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n,className:r.root,onClose:function(){t("closeEdit"),s(!1)},closeAfterTransition:!0,BackdropComponent:vt.a,BackdropProps:{timeout:300},children:Object(x.jsx)(ft.a,{in:n,children:Object(x.jsxs)("div",{className:r.editPanel,children:[Object(x.jsx)("button",{onClick:function(){t("closeEdit"),s(!1),$()},className:"btn ".concat(r.closeBtn),children:"X"}),Object(x.jsx)("div",{children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},R),{},{children:a&&Object(x.jsxs)(N,{className:r.form,onSubmit:L((function(e){console.log(e),window.localStorage.getItem("accessToken"),p(!0),function(e,t){return B.patch("/product/".concat(e),Object(u.a)({},t))}(a._id,e).then((function(e){p(!1),s(!1),t("closeEdit")})).catch((function(e){return p(!1)}))})),children:[Object(x.jsxs)("div",{className:r.images,children:[Object(x.jsxs)("div",{className:r.uploaded,children:[Object(x.jsxs)("h3",{children:[a.images&&a.images.length," Photos In Database:"]}),Object(x.jsx)(cn.a,{className:r.list,children:a.images&&a.images.length>0&&a.images.map((function(e){return Object(x.jsxs)(an.a,{className:r.listItem,children:[Object(x.jsx)("img",{className:r.listItemImg,src:e.url,alt:e.public_id}),Object(x.jsx)("span",{onClick:function(){Y(e.public_id)},className:"remove-btn",children:Object(x.jsx)(ln.a,{})})]},e.public_id)}))})]}),Object(x.jsxs)("div",{className:r.upload,children:[Object(x.jsx)("h3",{children:"Photos to upload:"}),Object(x.jsx)(pn,{getValues:W,setValue:V,name:"images",control:F,numb:v,setNumb:g})]})]}),Object(x.jsxs)("div",{className:r.potency,children:[Object(x.jsxs)("div",{className:"potency__header",children:["Potency:"," ",Object(x.jsx)("strong",{style:{color:En(E)},children:E.toUpperCase()})]}),Object(x.jsxs)("div",{className:"potency__content",children:[Object(x.jsx)(_n,{type:"thc_content",step:.1,min:0,max:100,mode:"edit",setPote:A}),Object(x.jsx)(_n,{type:"cbd_content",step:.1,min:0,max:100,mode:"edit",setPote:A})]})]}),Object(x.jsxs)("div",{className:r.fields,children:[Object(x.jsx)(fn.a,{multiple:!0,id:"productInfoDetails",options:P,onChange:function(e,t,n){h(t)},clearOnBlur:!0,getOptionLabel:function(e){return e},filterSelectedOptions:!0,renderInput:function(e){return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)({variant:"filled",margin:"normal"},e),{},{label:"Select Fields To Edit",placeholder:""}))}}),i&&m&&m.length>0&&m.map((function(e,t){var n;return M.includes(e)?Object(x.jsx)("div",{children:Object(x.jsx)(_,{ref:D("".concat(e),{shouldUnregister:!0}),name:"".concat(e),type:"text",label:"".concat(e),error:!!z[e],shouldUnregister:!0,helperText:null===(n=z[e])||void 0===n?void 0:n.message})},e):Object(x.jsx)("div",{children:Object(x.jsx)(_,{ref:D("details.".concat(e),{shouldUnregister:!0}),name:e,type:"text",label:e})},e+t)}))]}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{className:r.actions,children:Object(x.jsx)("button",{type:"submit",className:"btn",children:"Confirm"})})]})}))})]})})})})},Mn=a.a.createContext(),Pn=a.a.createContext(),Rn=a.a.createContext(),Dn=a.a.createContext(),Ln=a.a.createContext(),Fn=a.a.createContext(),Bn=function(e){var t=e.children,n=Object(et.h)().pathname,a=Object(c.useState)("Confirmation Needed"),s=Object(o.a)(a,1)[0],i=Object(c.useState)(""),r=Object(o.a)(i,2),l=r[0],d=r[1],u=Object(c.useState)(!1),j=Object(o.a)(u,2),b=j[0],m=j[1],h=Object(c.useState)(),p=Object(o.a)(h,2),O=p[0],f=p[1],v=Object(c.useState)(!1),g=Object(o.a)(v,2),_=g[0],y=g[1],N=Object(c.useState)(!1),C=Object(o.a)(N,2),k=C[0],w=C[1],S=Object(c.useState)(!1),T=Object(o.a)(S,2),E=T[0],A=T[1],I=Object(c.useState)(!1),M=Object(o.a)(I,2),P=M[0],R=M[1],D=Object(c.useState)(!1),L=Object(o.a)(D,2),F=L[0],B=L[1],U=Object(c.useState)(!1),V=Object(o.a)(U,2),W=V[0],G=V[1],z=function(e){switch(e){case"deleteProduct":return d("You are about to remove this product. This action is permanent! ");case"rateWithoutComment":return d("You are sending a rating without a comment. Are you sure?");case"deleteCoupon":return d("You are about to remove this coupon. Are you sure?");default:return}},H=function(e){switch(e){case"openPreview":return A(!0);case"closePreview":return A(!1);case"openDialog":return R(!0);case"closeDialog":return R(!1);case"openDrawer":return B(!0);case"closeDrawer":return B(!1);case"openEdit":return G(!0);case"closeEdit":return G(!1);default:return}};return Object(x.jsxs)(Mn.Provider,{value:H,children:[O&&Object(x.jsx)(kt,{product:O,handleClose:H,open:E}),Object(x.jsx)(In,{product:O,handleState:H,state:W,setIsEditing:y,isEditing:_}),Object(x.jsx)(Lt,{title:s,message:l,setConfirm:m,confirm:b,handleState:H,open:P}),n.startsWith("/admin")||n.startsWith("/checkout")||n.startsWith("/auth/login")||n.startsWith("/auth/register")||n.startsWith("/user/messenger")?"":Object(x.jsx)(Zt,{handleMessage:z,handleState:H,open:F,setConfirm:m,confirm:b}),Object(x.jsx)(Rn.Provider,{value:[O,f],children:Object(x.jsx)(Dn.Provider,{value:z,children:Object(x.jsx)(Ln.Provider,{value:[b,m],children:Object(x.jsx)(Fn.Provider,{value:[k,w],children:Object(x.jsx)(Pn.Provider,{value:[_,y],children:t})})})})})]})},Un=n(30),Vn=function(e){var t=e.product,n=Object(c.useContext)(Rn)[1],a=JSON.parse(localStorage.getItem("seen"))||[],s=Object(et.g)(),i=Object(c.useContext)(Mn);return Object(x.jsx)("div",{className:"product__card__container",children:Object(x.jsxs)("div",{className:"product__card",children:[Object(x.jsxs)("div",{className:"product__card-info",children:[Object(x.jsx)("div",{onClick:function(){s.push("/".concat(t.slug)),a.find((function(e){return e._id===t._id}))||(a.push(t),localStorage.setItem("seen",JSON.stringify(a)))},className:"product__card-info-img-container",children:Object(x.jsx)("img",{src:t.thumbnail?t.thumbnail.url:t.images[0].url,alt:t.title})}),Object(x.jsx)("div",{className:"product__card-info-category-rating",children:Object(x.jsx)("div",{className:"product__card-info-category-rating-category",children:Object(x.jsxs)("span",{children:[t.category.name," ",t.subCategory.name?",":""," ",t.subCategory.name]})})}),Object(x.jsx)("div",{className:"product__card-info-product-name",children:Object(x.jsx)("h4",{children:Object(x.jsx)(Un.b,{to:"/".concat(t.slug),children:t.title})})})]}),Object(x.jsxs)("div",{className:"product__card-hover",children:[Object(x.jsx)("div",{onClick:function(){return i("openDialog")},className:"product__card-hover-icon",children:Object(x.jsx)("i",{className:"fas fa-heart"})}),Object(x.jsx)("div",{onClick:function(){n(t),i("openPreview")},className:"product__card-hover-icon",children:Object(x.jsx)("i",{className:"far fa-eye"})}),Object(x.jsx)("div",{onClick:function(){return i("openDrawer")},className:"product__card-hover-icon",children:Object(x.jsx)("i",{className:"fas fa-layer-group"})})]}),Object(x.jsxs)("div",{className:"product__card-price-cart",children:[Object(x.jsx)("div",{className:"product__card-product-price",children:Object(x.jsxs)("h4",{children:["$",t.price,"/g"]})}),Object(x.jsx)("div",{onClick:function(){return i("openDrawer")},className:"product__card-add-to-cart",children:Object(x.jsx)("h4",{children:"Add to cart"})})]})]})})},Wn=(n(811),function(){var e=JSON.parse(localStorage.getItem("seen"))||[];return Object(x.jsxs)("div",{className:"seenProducts",children:[Object(x.jsx)("h3",{className:"seenProducts__title",children:"Recently Viewed"}),Object(x.jsx)("div",{className:"seenProducts__contents",children:e&&e.length>0&&e.slice(-4).map((function(e){return Object(x.jsx)(Vn,{product:e},e._id)}))})]})}),Gn=function(){return Object(c.useEffect)((function(){document.title="C9STORE - HIGH LIKE ON C9"}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ht,{}),Object(x.jsx)(pt,{}),Object(x.jsx)(Wn,{})]})},zn=(n(812),n(1017)),Hn=(n(813),function(e){var t=e.links;return Object(x.jsx)(zn.a,{children:t.map((function(e,n){return Object(x.jsx)(Un.b,{to:"".concat(t.slice(0,n+1).join("/")),children:""===e?"home":e},e)}))})}),qn={thc_content:"THC is an active component in cannabis responsible for psychoactive, or intoxicating, effects such as changes in perception and mobility.",cbd_content:"CBD is an active, but non-intoxicating component in cannabis.","plant-type":"This refers to the plant type of a cannabis product. There are three types: Sativa, Indica, or Hybrid.",producer:"A licensed producer (LP) is an organization licensed by Health Canada to perform activities with cannabis that include cultivation, processing, research and development and selling cannabis for medical or non-medical purposes.",brand:"The brand that makes this product.",potency:"The potency of a product, based on the amount of THC.",plantType:"This refers to the plant type of a cannabis product. There are three types: Sativa, Indica, or Hybrid.",terpenes:"Terpenes are molecules responsible for the aromas in cannabis and other plants. There are over 100 known terpenes in cannabis plants.",growingRegion:"The broad geographic location a cannabis plant was grown in.",growMethod:"The type of facility a cannabis plant was grown in.",dryingMethod:"Method used by Licensed Producer to achieve desired moisture content.",trimmingMethod:"The way that the Licensed Producer has trimmed excess leaves from the cannabis bud.",growRoomLighting:"The type of lighting used in the Licensed Producer grow room, where cannabis plants are grown",strainName:"Strain Name.",growingProvince:"The province that the cannabis plant was grown in."},Yn=n(170),$n=n.n(Yn),Jn=(n(498),n(499),function(e){var t=e.images;return Object(x.jsx)(bt.a,Object(u.a)(Object(u.a)({},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,swipeToSlide:!0}),{},{children:t.map((function(e){return Object(x.jsx)("img",{className:"slick-image",alt:e.public_id,src:e.url},e.public_id)}))}))}),Kn=Object(xt.a)((function(e){return{customWidth:{maxWidth:250}}})),Zn=function(e){var t,n,c,a,s,i,r,o,l=e.product,d=Kn();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"product__details__body__image_gallery",children:[Object(x.jsxs)("ul",{className:"product__details__body__image_gallery-properties",children:[Object(x.jsxs)("li",{className:"product__details__body__image_gallery-properties-type",children:[Object(x.jsx)("p",{children:"THC"}),Object(x.jsx)("span",{className:"product__details__body__image_gallery-properties-type-tool-tip",children:Object(x.jsx)(yt.a,{classes:{tooltip:d.customWidth},TransitionComponent:ft.a,title:qn.thc_content,placement:"left",arrow:!0,children:Object(x.jsx)($n.a,{})})}),l.details.thc_content.length>0?Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)("p",{children:[null===(t=l.details.thc_content[0])||void 0===t?void 0:t.toFixed(2)," -"," ",null===(n=l.details.thc_content[1]/10)||void 0===n?void 0:n.toFixed(2)," %"]}),Object(x.jsxs)("p",{children:[null===(c=l.details.thc_content[0])||void 0===c?void 0:c.toFixed(2)," -"," ",null===(a=l.details.thc_content[1])||void 0===a?void 0:a.toFixed(2)," mg/g"]})]}):Object(x.jsx)("p",{children:"Not Specified"})]}),Object(x.jsxs)("li",{className:"product__details__body__image_gallery-properties-type",children:[Object(x.jsx)("p",{children:"CBD"}),Object(x.jsx)("span",{className:"product__details__body__image_gallery-properties-type-tool-tip",children:Object(x.jsx)(yt.a,{classes:{tooltip:d.customWidth},TransitionComponent:ft.a,title:qn.cbd_content,placement:"left",arrow:!0,children:Object(x.jsx)($n.a,{})})}),l.details.cbd_content.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{children:[null===(s=l.details.cbd_content[0])||void 0===s?void 0:s.toFixed(2)," -"," ",null===(i=l.details.cbd_content[1]/10)||void 0===i?void 0:i.toFixed(2)," %"]}),Object(x.jsxs)("p",{children:[null===(r=l.details.cbd_content[0])||void 0===r?void 0:r.toFixed(2)," -"," ",null===(o=l.details.cbd_content[1])||void 0===o?void 0:o.toFixed(2)," mg/g"]})]}):Object(x.jsx)("p",{children:"Not Specified"})]}),Object(x.jsxs)("li",{className:"product__details__body__image_gallery-properties-type",children:[Object(x.jsx)("p",{children:"Plant Type"}),Object(x.jsx)("span",{className:"product__details__body__image_gallery-properties-type-tool-tip",children:Object(x.jsx)(yt.a,{classes:{tooltip:d.customWidth},TransitionComponent:ft.a,title:qn["plant-type"],placement:"left",arrow:!0,children:Object(x.jsx)($n.a,{})})}),Object(x.jsx)("p",{children:l.details.plantType})]})]}),Object(x.jsx)("div",{className:"product__details__body__image_gallery-slider",children:Object(x.jsx)(Jn,{images:l.images})})]})})},Qn=n(253),Xn=function(e){return Object(x.jsxs)(Qn.a,Object(u.a)(Object(u.a)({speed:2,width:1400,height:548,viewBox:"0 0 1400 548",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:[Object(x.jsx)("rect",{x:"200",y:"78",rx:"0",ry:"0",width:"600",height:"500"}),Object(x.jsx)("rect",{x:"850",y:"78",rx:"0",ry:"0",width:"150",height:"20"}),Object(x.jsx)("rect",{x:"850",y:"160",rx:"0",ry:"0",width:"150",height:"20"}),Object(x.jsx)("rect",{x:"850",y:"240",rx:"0",ry:"0",width:"150",height:"20"}),Object(x.jsx)("rect",{x:"850",y:"320",rx:"0",ry:"0",width:"150",height:"20"}),Object(x.jsx)("rect",{x:"850",y:"400",rx:"0",ry:"0",width:"400",height:"100"}),Object(x.jsx)("rect",{x:"850",y:"540",rx:"0",ry:"0",width:"150",height:"20"})]}))},ec=function(e){var t=e.setActiveTab,n=e.active;return Object(x.jsxs)("div",{className:"product__details__in-depth__about__tabs",children:[Object(x.jsx)("button",{onClick:function(){return t("about")},className:"product__details__in-depth__about__tabs-btn ".concat("about"===n?"active":""),children:"About"}),Object(x.jsx)("button",{onClick:function(){return t("reviews")},className:"product__details__in-depth__about__tabs-btn ".concat("reviews"===n?"active":""),children:"Reviews"}),Object(x.jsx)("button",{onClick:function(){return t("discussions")},className:"product__details__in-depth__about__tabs-btn ".concat("discussions"===n?"active":""),children:"Discussions"})]})},tc=Object(xt.a)((function(e){return{customWidth:{maxWidth:250}}})),nc=function(e){var t=e.product,n=tc(),c=Object.keys(t.details);function a(e){var n,c,a,s;return"thc_content"===e||"cbd_content"===e?t.details[e].length>0?"".concat(null===(n=t.details[e][0])||void 0===n?void 0:n.toFixed(2)," - ").concat(null===(c=t.details[e][1])||void 0===c?void 0:c.toFixed(2),"% | ").concat(10*(null===(a=t.details[e][0])||void 0===a?void 0:a.toFixed(2))," - ").concat(10*(null===(s=t.details[e][1])||void 0===s?void 0:s.toFixed(2))," mg/g "):"none":t.details[e]}return Object(x.jsx)("table",{className:"product__details__in-depth__about__info-table",children:Object(x.jsx)("tbody",{className:"product__details__in-depth__about__info-table__body",children:c.sort((function(e,t){return e-t})).map((function(e){return t.details[e]&&t.details[e].length>0?Object(x.jsxs)("tr",{className:"product__details__in-depth__about__info-table__body__row",children:[Object(x.jsx)("td",{className:"product__details__in-depth__about__info-table__body__row__data",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{children:[e," "]}),Object(x.jsx)(yt.a,{classes:{tooltip:n.customWidth},TransitionComponent:ft.a,title:qn[e]||"No definition for this concept yet. We will add in later",placement:"left",arrow:!0,children:Object(x.jsx)($n.a,{})})]})}),Object(x.jsx)("td",{className:"product__details__in-depth__about__info-table__body__row__data",children:Object(x.jsx)("div",{children:Object(x.jsxs)("span",{children:[a(e)," "]})})})]},e):null}))})})},cc=n(1018),ac=n(1009),sc=(n(814),n(815),n(335)),ic=function(e,t){return B.patch("/product/rating/".concat(e),t)},rc=function(){return B.get("/users")},oc=function(e){return B.get("/user/cart/".concat(e))},lc=function(e){return B.get("/guest/cart/".concat(e))},dc=n(20),uc=dc.e().shape({ratingContent:dc.g().max(100,"Viet it thoi")}),jc=n(73),bc={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"},mc=Object(xt.a)({root:{margin:"2rem 0px",width:200,display:"flex",alignItems:"center"}}),hc={mode:"onChange",resolver:Object(jc.a)(uc)},pc=function(e){var t=e.slug,n=e.mode,s=e.userRating,i=Object(c.useContext)(ct),r=Object(o.a)(i,2),l=r[0],j=r[1],m=Object(b.f)(Object(u.a)(Object(u.a)({},hc),{},{defaultValues:{star:5,ratingContent:""},yupResolver:jc.a})),h=m.formState,p=h.isSubmitSuccessful,O=h.isValid,f=h.errors,g=m.reset,_=m.control,y=m.getValues,N=m.setValue,C=m.handleSubmit,k=a.a.useState(5),w=Object(o.a)(k,2),S=w[0],T=w[1],E=a.a.useState(-1),M=Object(o.a)(E,2),P=M[0],R=M[1],D=mc();function L(){return(L=Object(I.a)(A.a.mark((function e(n){var c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("accessToken"),j(!0),e.prev=2,e.next=5,ic(t,n);case 5:c=e.sent,d.b.success("".concat(c.data.message,". Thank you for giving us your honest thought!")),j(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),j(!1),d.b.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){p&&(g(),N("ratingContent",""))}),[m.formState,p,g,N]),Object(x.jsxs)("div",{className:"add-review__container",children:["add"===n?Object(x.jsx)("h3",{children:"Add a review"}):Object(x.jsx)("h3",{children:"Edit your review"}),Object(x.jsxs)("div",{className:D.root,children:[Object(x.jsx)(Nt.a,{name:"hover-feedback",value:S,precision:.5,onChange:function(e,t){T(t),N("star",t)},onChangeActive:function(e,t){R(t)}}),null!==S&&Object(x.jsx)(sc.a,{ml:2,children:bc[-1!==P?P:S]})]}),Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},m),{},{children:Object(x.jsxs)("form",{onSubmit:C((function(e){return L.apply(this,arguments)})),className:"add-review__edit-box",children:[Object(x.jsx)(b.a,{name:"ratingContent",control:_,defaultValue:s||"",render:function(e){var t=e.field;return Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)(v,Object(u.a)({multiline:!0,minRows:4,maxRows:4,fullWidth:!0,disabled:l,margin:"normal",variant:"outlined",error:!!f.ratingContent},t)),Object(x.jsxs)("p",{style:{color:O?"green":"red",bottom:"10%",right:"2%",position:"absolute"},children:[y("ratingContent")?y("ratingContent").length:0,"/100"]})]})}}),Object(x.jsx)("button",{disabled:!O&&l,type:"submit",style:{marginTop:"2rem"},className:"btn primary-btn bouncy ".concat(O&&!l?null:"disabled"),children:"Submit"})]})}))]})};function Oc(e){var t,n,c,a=e.rating,s=e.userId;return Object(x.jsxs)("div",{className:"product__details__in-depth__about__reviews__review",children:[Object(x.jsx)("div",{className:"product__details__in-depth__about__reviews__review__reviewer",children:Object(x.jsx)("img",{src:null===(t=a.postedBy)||void 0===t?void 0:t.photo.url,alt:"user profile pic",className:"product__details__in-depth__about__reviews__review__reviewer__avatar"})}),Object(x.jsxs)("div",{className:"product__details__in-depth__about__reviews__review__content ".concat((null===(n=a.postedBy)||void 0===n?void 0:n._id)===s?"userRating":null),children:[Object(x.jsxs)("p",{className:"product__details__in-depth__about__reviews__review__content__date",children:[Object(x.jsx)("b",{children:a.isEdited?"Posted on ".concat(new Date(a.createdAt).toLocaleDateString("vi-VI"),"  - Last modified ").concat(new Date(a.lastEdited).toLocaleDateString("vi-VI")):"Posted on ".concat(new Date(a.createdAt).toLocaleDateString("vi-VI"))})," ","- By"," ",Object(x.jsx)("b",{children:(null===(c=a.postedBy)||void 0===c?void 0:c._id)===s?"you":a.postedBy?a.postedBy.name:"some random guy"})]}),Object(x.jsx)("div",{className:"product__details__in-depth__about__reviews__review__content__rating",children:Object(x.jsx)(Nt.a,{name:"read-only",value:a.star,readOnly:!0})}),Object(x.jsx)("div",{className:"product__details__in-depth__about__reviews__review__content__comment-box",children:a.postedBy?Object(x.jsx)("p",{children:a.comment}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("strike",{children:a.comment})," ",Object(x.jsx)("strong",{children:"*This user has deleted his account"})]})})]})]},a._id)}var fc=function(e){var t=e.product,n=se().isAuthenticated,a=Object(l.c)((function(e){return e.user.user?e.user.user:{}}))._id,s=t.ratings.find((function(e){var t;return(null===(t=e.postedBy)||void 0===t?void 0:t._id)===a})),i=Object(et.g)(),r=Object(c.useState)(!1),d=Object(o.a)(r,2),u=d[0],j=d[1];function b(e){return e.ratings.reduce((function(e,t){return e+t.star}),0)/e.ratings.length}return Object(x.jsxs)("div",{className:"product__details__in-depth__about__reviews",children:[Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsxs)("h4",{children:[void 0===t.ratings||0===t.ratings.length?"No review for ".concat(t.title," yet"):1===t.ratings.length?"One review for ".concat(t.title):"".concat(t.ratings.length," reviews for ").concat(t.title)," "]}),b(t)?Object(x.jsxs)("p",{children:["Average Rating: ",b(t)]}):""]}),t.ratings&&t.ratings.length>0&&t.ratings.map((function(e){return Object(x.jsx)(Oc,{userId:a,rating:e},e._id)})),Object(x.jsxs)("div",{className:"product__details__in-depth__about__reviews__add-review",children:[n&&!s?Object(x.jsx)(pc,{mode:"add",slug:t.slug}):n&&s?Object(x.jsxs)("p",{children:["You already published a review for this kush."," ",Date.now()-new Date(s.editableWithin)<0?Object(x.jsxs)("span",{style:{display:"inline-block"},children:[Object(x.jsxs)("span",{onClick:function(){return j(!u)},children:[" ","Click here"]})," ",u?"again if you don't want to edit your review":"to edit your review. Note: Reviews are only editable within 3 days after first published"]}):"Since it's been (over) 3 days, you can no longer edit it"]}):Object(x.jsxs)("p",{children:["You must be a"," ",Object(x.jsxs)("span",{onClick:function(){return i.push({pathname:"/auth/login",state:{from:"/".concat(t.slug)}})},className:"notMember",children:[" ","member"]})," ","and"," ",Object(x.jsx)("span",{className:"notMember",onClick:function(){return window.scrollTo(0,0)},children:"have purchased"})," ","this kush to be able to leave a review"]}),u&&Object(x.jsx)(cc.a,{children:Object(x.jsx)(ac.a.div,{initial:{y:200},animate:{y:0},exit:{y:200},children:Object(x.jsx)(pc,{userRating:s.comment,slug:t.slug})},"addReview")})]})]})},vc=function(e){var t=e.product,n=Object(c.useState)("about"),a=Object(o.a)(n,2),s=a[0],i=a[1];return Object(x.jsxs)("div",{className:"product__details__in-depth__about",children:[Object(x.jsx)(ec,{active:s,setActiveTab:i}),Object(x.jsx)("p",{className:"product__details__in-depth__about__des",children:t.description}),"about"===s?Object(x.jsx)(nc,{product:t}):"reviews"===s?Object(x.jsx)(fc,{product:t}):"discussions"===s?Object(x.jsx)("div",{className:"product__details__in-depth__about__discussions",children:Object(x.jsx)("h1",{children:"T\u1edbi li\u1ec1n"})}):"",Object(x.jsx)("div",{className:"product__details__in-depth__about__disclaimer",children:Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Category disclaimer: "})," As a natural product, THC and CBD content in cannabis may vary among lots of the same strain. THC and CBD ranges shown on the product pages of OCS.ca are provided to OCS by federally licensed cannabis producers and may differ from ranges specified on product packaging from these same producers. Other product packaging elements may also vary slightly from what is pictured on the product pages of OCS.ca. In case of a discrepancy between a product\u2019s packaging and OCS.ca, refer to the information on the product packaging. Some products may be shipped separately."]})}),Object(x.jsxs)("div",{className:"product__details__in-depth__about__effects",children:[Object(x.jsx)("h4",{children:"What are the effects?"}),Object(x.jsx)("p",{children:"The use of cannabis products may result in specific effects for different consumers; however, there is limited scientific evidence to support these potential effects. Everybody reacts to cannabis differently, and one user\u2019s reaction to different cannabis products may vary depending on strain, potency, consumption method and other variables. The only way to know how cannabis will affect you is to consume a small amount and note the effects. Always start low and go slow."})]})]})},xc=n(537),gc=n.n(xc),_c=n(538),yc=n.n(_c),Nc=function(e){var t=e.product,n=Object(c.useContext)(Mn),a=Object(c.useState)(t.size[0]),s=Object(o.a)(a,2),i=s[0],r=s[1],l=Object(c.useReducer)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t){case"inc":return e+1;case"dec":return e-1;default:throw new Error("lmao what")}}),1),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Jt().addItemToCart;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"product__details__body__info",children:[Object(x.jsx)("h2",{className:"product__details__body__info-title",children:t.title}),t.avgRating&&Object(x.jsx)("div",{className:"product__details__body__info-avg-rating",children:Object(x.jsx)(Nt.a,{name:"read-only",value:t.avgRating,readOnly:!0,precision:.5})}),Object(x.jsxs)("div",{className:"product__details__body__info-size",children:[Object(x.jsx)("h3",{children:"Size"}),Object(x.jsx)("ul",{children:t.size.map((function(e,n){return Object(x.jsxs)("li",{children:[Object(x.jsx)("input",{id:"".concat(e,"g"),type:"radio",value:"".concat(e,"g"),name:"size"}),Object(x.jsx)("label",{onClick:function(){return r(e)},style:{backgroundColor:e===i?"#2e7631":"white",border:e===i?"none":"1px solid gray",color:e===i?"white":"black"},className:"product__weight",htmlFor:"".concat(e,"g"),children:Object(x.jsx)("div",{className:"product__weight-container",children:Object(x.jsxs)("span",{className:"product__weight-container-unit",children:[e,"g"]})})}),Object(x.jsxs)("span",{className:"product__price",children:["$",((t.price-(t.price*t.discount[n>2?2:n]||0)/100)*e).toFixed(2)]}),Object(x.jsxs)("span",{className:"product__price",children:["$",(t.price-(t.price*t.discount[n>2?2:n]||0)/100).toFixed(2),"/g"]}),Object(x.jsx)("div",{style:{visibility:e===i?"visible":"hidden"},className:"appear-on-click",children:Object(x.jsxs)("div",{children:[t.details.thc_content.length>0?Object(x.jsxs)("p",{children:["THC: ",(e*t.details.thc_content[0]).toFixed(2)," -"," ",(e*t.details.thc_content[1]).toFixed(2)," mg"]}):null,t.details.cbd_content.length>0?Object(x.jsxs)("p",{children:["CBD: ",(e*t.details.cbd_content[0]).toFixed(2)," -"," ",(e*t.details.cbd_content[1]).toFixed(2)," mg"]}):null,Object(x.jsxs)("p",{children:[e," g canabis"]})]})})]},e)}))})]}),Object(x.jsxs)("div",{className:"product__details__body__info-actions",children:[Object(x.jsx)("h3",{children:"Quantity"}),Object(x.jsx)("button",{onClick:function(){return j("dec")},disabled:1===u,className:"product__details__body__info-actions-quantity",children:Object(x.jsx)(gc.a,{})}),Object(x.jsx)("span",{className:"product__details__body__info-actions-quantity-display",children:u}),Object(x.jsx)("button",{onClick:function(){return j("inc")},disabled:10===u,className:"product__details__body__info-actions-quantity",children:Object(x.jsx)(yc.a,{})}),Object(x.jsxs)("button",{disabled:0===t.quantity,onClick:function(){b(t,u,i),n("openDrawer")},className:"product__details__body__info-actions-btn btn  ".concat(0===t.quantity?"disabled":"primary-btn  bouncy"),children:[Object(x.jsx)("span",{children:"Add to bag"})," | ",Object(x.jsxs)("span",{children:["$",((t.price-t.price*function(){var e,n,c,a;return null!==(e=null!==(n=null!==(c=null!==(a=t.discount[t.size.indexOf(i)])&&void 0!==a?a:t.discount[t.size.indexOf(i)-1])&&void 0!==c?c:t.discount[2])&&void 0!==n?n:t.discount[1])&&void 0!==e?e:0}()/100)*(i||1)*u).toFixed(2)]})]}),Object(x.jsx)(yt.a,{title:"Wish list",placement:"top",children:Object(x.jsx)(_t.a,{style:{cursor:"pointer"}})})]}),Object(x.jsx)("div",{className:"product__details__body__info-availability",children:t.quantity>0?"In stock online":"Out of stock"}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{className:"product__details__body__info-des",children:t.brief}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{className:"product__details__body__info-additionals"})]})})},Cc=function(e){return Object(x.jsx)(Qn.a,Object(u.a)(Object(u.a)({speed:2,width:1400,height:548,viewBox:"0 0 1400 548",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},e),{},{children:Object(x.jsx)("rect",{x:"600",y:"38",rx:"0",ry:"0",width:"600",height:"70"})}))},kc=(n(914),function(e){var t=e.children,n=Object(et.g)(),a=Object(c.useState)(10),s=Object(o.a)(a,2),i=s[0],r=s[1];return document.title="Page Not Found",Object(c.useEffect)((function(){i<1&&n.push("/");var e=setTimeout((function(){r((function(e){return e-1}))}),1e3);return function(){return clearTimeout(e)}}),[i,n]),Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"not-found",children:[Object(x.jsx)("h1",{children:"404"}),Object(x.jsxs)("p",{children:[t,". Redirecting you back to ",Object(x.jsx)(Un.b,{to:"/",children:"home page"})," in"," ",i]})]})})}),wc=function(){var e=Object(et.h)().pathname,t=Object(et.i)().productSlug,n=Object(c.useContext)(ct)[1],a=e.split("/"),s=Object(c.useState)(null),i=Object(o.a)(s,2),r=i[0],l=i[1],d=Object(c.useState)(""),u=Object(o.a)(d,2),j=u[0],b=u[1];return document.title="C9STORE - ".concat(j||"product"),Object(c.useEffect)((function(){var e;window.scrollTo(0,0),n(!0),(e=t,B.get("/product/".concat(e))).then((function(e){n(!1),l(e.data.product),b(e.data.product.title)})).catch((function(e){console.log(e),l(void 0),n(!1)}))}),[t,n]),Object(x.jsxs)("div",{className:"product__details",children:[Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"product__details__bread-crumbs",children:Object(x.jsx)(Hn,{links:a})})}),void 0===r&&Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(kc,{children:["We can't locate ",Object(x.jsx)("strong",{children:a[3]})," anywhere in our website"," "]})}),null===r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"skeleton",children:Object(x.jsx)(Xn,{})})}),Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"skeleton",children:Object(x.jsx)(Cc,{})})})]}),r&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"product__details__body",children:[Object(x.jsx)(Zn,{product:r}),Object(x.jsx)(Nc,{product:r})]})}),Object(x.jsx)("div",{className:"product__details__in-depth",children:Object(x.jsx)(vc,{product:r})})]}),Object(x.jsx)("div",{className:"container",children:Object(x.jsx)(Wn,{})})]})};n(915),n(916);function Sc(e){return e.split(" ").map((function(e){return e[0]===e[0].toUpperCase()?e:e[0].toUpperCase()+e.slice(1)})).join(" ")}var Tc=n(1011),Ec=function(){return R.a.get("".concat("http://localhost:8000/api/v1","/categories"))},Ac=function(e){return R.a.get("".concat("http://localhost:8000/api/v1","/subcategories/").concat(e))},Ic=function(){var e=Object(et.h)().pathname,t=Object(et.i)().category,n=e.split("/"),a=Object(c.useContext)(ct)[1],s=Object(c.useState)([]),i=Object(o.a)(s,2),r=i[0],l=i[1],j=Object(c.useState)([]),b=Object(o.a)(j,2),m=b[0],h=b[1],p=Object(c.useState)([]),O=Object(o.a)(p,2),f=O[0],v=O[1],g=Object(c.useState)(),_=Object(o.a)(g,2),y=_[0],N=_[1],C=Object(c.useState)(),k=Object(o.a)(C,2),w=k[0],S=k[1],T=Object(c.useState)({category:t}),E=Object(o.a)(T,2),A=E[0],I=E[1],M=Object(c.useState)(0),P=Object(o.a)(M,2),R=P[0],D=P[1],L=Object(et.g)();Object(c.useEffect)((function(){document.title="SHOP - ".concat(n[n.length-1].toUpperCase()," | CJSTORE")}),[n]),Object(c.useEffect)((function(){Ec().then((function(e){return h(e.data.categories)}))}),[h]),Object(c.useEffect)((function(){y&&Ac(y._id).then((function(e){return v(e.data.subCategories)}))}),[y]);var F=Object(c.useCallback)((function(e){a(!0);var t=[],n=e;for(var c in n)t.push("".concat(c,"=").concat(n[c]));(function(e){return B.get("/query?".concat(e))})(t.join("&")).then((function(e){l(e.data.products),a(!1),D(e.data.totalProducts)})).catch((function(e){a(!1),console.log(e),d.b.error(e.message)}))}),[a]);return Object(c.useEffect)((function(){F(A)}),[l,a,y,w,A,D,F]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"page__header",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"bread__crumb",children:Object(x.jsx)("div",{className:"bread__crumb-link",children:Object(x.jsx)(Hn,{links:n})})})})}),Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"shop__page",children:[Object(x.jsxs)("div",{className:"shop__page__side__widgets",children:[Object(x.jsxs)("div",{className:"shop__page__side__widgets-categories",children:[Object(x.jsx)("h3",{className:"shop__page__side__widgets-categories-header",children:"Categories"}),Object(x.jsx)("div",{className:"shop__page__side__widgets-categories-contents",children:m&&m.length>0&&m.map((function(e,t){return Object(x.jsx)("button",{onClick:function(){(null===y||void 0===y?void 0:y._id)!==e._id&&(L.push("/collections/".concat(e.slug)),N(e),I({category:e.slug}))},className:"tag-btn btn ripple",children:Sc(e.name)},t)}))})]}),Object(x.jsxs)("div",{className:"shop__page__side__widgets-categories",children:[Object(x.jsx)("h3",{className:"shop__page__side__widgets-categories-header",children:"Sub-categories"}),Object(x.jsx)("div",{className:"shop__page__side__widgets-categories-contents",children:f&&f.length>0&&f.map((function(e,t){return Object(x.jsx)("button",{onClick:function(){(null===w||void 0===w?void 0:w._id)!==e._id&&(L.push("/collections/".concat(e.slug)),S(e),I({category:e.slug}))},className:"tag-btn btn ripple",children:Sc(e.name)},t)}))})]})]}),Object(x.jsxs)("div",{className:"shop__page__products__display",children:[Object(x.jsxs)("div",{className:"shop__page__products__display-header",children:[Object(x.jsxs)("div",{className:"shop__page__products__display-header-result-count",children:[R," results"]}),Object(x.jsx)("div",{className:"shop__page__products__display-header-sort"})]}),Object(x.jsxs)("div",{className:"shop__page__products__display-contents",children:[Object(x.jsx)("div",{className:"shop__page__products__display-contents-product-cards",children:r&&r.length>0?r.map((function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(Vn,{product:e,className:"product__card"})},e._id)})):"No products found"}),r&&r.length>0&&Object(x.jsx)("div",{className:"shop__page__products__display-contents-pagination",children:Object(x.jsx)(Tc.a,{count:Math.ceil(R/10),defaultPage:1,boundaryCount:2,onChange:function(e,t){F(Object(u.a)(Object(u.a)({},A),{},{page:t}))}})})]})]})]})})]})};dc.a(dc.e,"atLeastOneOf",(function(e){return this.test({name:"atLeastOneOf",message:"You must provide at least one contact detail",exclusive:!0,params:{keys:e.join(", ")},test:function(t){return""===t||e.some((function(e){return""!==t[e]}))}})}));var Mc=dc.e().shape({phoneNumber:dc.g(),email:dc.g().email("Invalid email"),address:dc.g().required("Address is required")}).atLeastOneOf(["phoneNumber","email"]),Pc=n(95),Rc=n.n(Pc),Dc=(n(917),n(993)),Lc=n(1015),Fc=(0,n(37).withStyles)({root:{"& label.Mui-focused":{color:"green"},"& .MuiInputBase-input":{padding:"15.5px 14px"},"& .MuiInput-underline:after":{borderBottomColor:"green"},"& .MuiOutlinedInput-root":{"&.Mui-focused fieldset":{borderColor:"green"}}}})(fn.a),Bc=function(e){var t=e.next,n=Object(c.useState)([]),a=Object(o.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)([]),j=Object(o.a)(r,2),m=j[0],h=j[1],p=Object(c.useState)(!1),O=Object(o.a)(p,2),f=O[0],v=O[1],g=Object(c.useState)(!1),y=Object(o.a)(g,2),N=y[0],C=y[1],k=Object(et.g)(),w=Object(c.useContext)(ct)[1],S=se(),T=S.update,E=S.isAuthenticated,M=Object(l.c)((function(e){return e.user.user?e.user.user:{}})),P=M.whereabouts,D=M.email,L=M.phoneNumber,F=M.firstName,B=M.lastName,U=P||{},V=U.country,W=U.city,G=U.district,z=U.zipCode,H=U.address,q=U.state,Y=Object(b.g)(),$=Y.formState.errors,J=Y.getValues,K=Y.setValue,Z=Y.control,Q=Y.trigger;return Object(c.useEffect)((function(){Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("https://provinces.open-api.vn/api/?depth=2");case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})))(),v(J("isInVietNam"))}),[J]),Object(x.jsxs)("div",{className:"userInformation",children:[Object(x.jsxs)("div",{className:"contactInfo",children:[Object(x.jsx)("h2",{children:"Contact Information"}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"email",type:"email",label:"Email",defaultValue:E?D:J("email")})," ",Object(x.jsx)(_,{name:"phoneNumber",type:"tel",label:"Phone",defaultValue:E?L:J("phoneNumber")})]})]}),Object(x.jsxs)("div",{className:"shippingAddress",children:[Object(x.jsx)("h2",{children:"Shipping Address"}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"firstName",label:"First name",defaultValue:E?F:J("firstName")}),Object(x.jsx)(_,{name:"lastName",label:"Last Name",defaultValue:E?B:J("lastName")})]})," ",!E&&Object(x.jsxs)("div",{className:"stack checkCountry",children:[" ",Object(x.jsx)("span",{})," ",Object(x.jsx)(b.a,{control:Z,name:"isInVietNam",render:function(e){var t=e.field;return Object(x.jsx)(Dc.a,{control:Object(x.jsx)(Lc.a,Object(u.a)(Object(u.a)({},t),{},{defaultChecked:J("isInVietNam"),onChange:function(e,t){K("isInVietNam",t),K("country","Vi\u1ec7t Nam"),v(t)},color:"primary"})),label:"Are you in Viet Nam?"})}})]}),f&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(b.a,{control:Z,name:"city",defaultValue:J("city"),render:function(e){var t=e.field;return Object(x.jsx)(Fc,{disableClearable:!0,id:"city",options:s,getOptionLabel:function(e){return e.name||""},onChange:function(e,t){K("city",t),h(t.districts)},getOptionSelected:function(e,t){return e.name===t.name},defaultValue:J("city"),renderInput:function(e){var n;return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)(Object(u.a)({},e),t),{},{label:"City",variant:"outlined",fullWidth:!0,margin:"normal",error:!!$.city,helperText:null===$||void 0===$||null===(n=$.city)||void 0===n?void 0:n.message}))}})}}),Object(x.jsx)(b.a,{control:Z,name:"district",defaultValue:J("district"),render:function(e){return Object(x.jsx)(Fc,{disableClearable:!0,id:"district",options:m,getOptionLabel:function(e){return e.name||""},onChange:function(e,t){K("district",t)},getOptionSelected:function(e,t){return e.name===t.name},defaultValue:J("district"),renderInput:function(t){var n;return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)(Object(u.a)({},t),e),{},{label:"District",variant:"outlined",fullWidth:!0,margin:"normal",error:!!$.district,helperText:null===$||void 0===$||null===(n=$.district)||void 0===n?void 0:n.message}))}})}})]})]}),console.log("object"===typeof J("city")),!f&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"country",label:"Country",defaultValue:E?V:J("country")}),Object(x.jsx)(_,{name:"city",label:"City",defaultValue:E?W:"object"===typeof J("city")?J("city").name:J("city")})]}),Object(x.jsx)(_,{name:"district",label:"District",defaultValue:E?G:"object"===typeof J("district")?J("district").name:J("district")}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"state",label:"State",defaultValue:E?q:J("state")}),Object(x.jsx)(_,{name:"zipCode",label:"Zip Code",defaultValue:E?z:J("zipCode")})]})]}),Object(x.jsx)(_,{name:"address",label:"Address",defaultValue:E?H:J("address")}),E&&Object(x.jsxs)("div",{children:[Object(x.jsx)(Lc.a,{color:"primary",checked:N,onChange:function(e){return C(e.target.checked)}}),Object(x.jsx)("span",{children:"Save this address to your account"})]})]}),Object(x.jsxs)("div",{className:"buttonGroup",children:[Object(x.jsxs)("div",{onClick:function(){return k.push("/cart")},children:[Object(x.jsx)("span",{children:Object(x.jsx)(Rc.a,{})}),Object(x.jsx)("span",{children:" Return to your cart"})]}),Object(x.jsx)("button",{className:"btn primary-btn",onClick:Object(I.a)(A.a.mark((function e(){var n,c,a,s,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=J(c=["firstName","lastName","country","phoneNumber","district","state","zipCode","address","city"]),s={},i=0;i<a.length;i++)a[i]&&(s[c[i]]=a[i]);return e.next=6,Q();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",$[""]?d.b.error("".concat(null===(n=$[""])||void 0===n?void 0:n.message)):void 0);case 9:N?(T(s),$t([function(){return t()}],w)):$t([function(){return t()}],w);case 10:case"end":return e.stop()}}),e)}))),children:"Proceed to shipping options"})]})]})},Uc=n(255),Vc=function(e){return B.post("/coupon",e)},Wc=function(){return B.get("/coupons")},Gc=function(e,t){return B.post("/coupon/apply",{name:e,cartId:t})},zc=(n(918),function(){var e=Object(l.b)(),t=se().isAuthenticated,n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],r=Object(l.c)((function(e){return e.cart})).cartId;function u(){return(u=Object(I.a)(A.a.mark((function n(){var c,a,o;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Gc(s,r);case 5:if(c=n.sent,d.b.success(c.data.message),!t){n.next=14;break}return n.next=10,oc(r);case 10:a=n.sent,e(lt(a.data.cart)),n.next=18;break;case 14:return n.next=16,lc(r);case 16:o=n.sent,e(lt(o.data.cart));case 18:i(""),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(0),d.b.error(n.t0.message);case 24:case"end":return n.stop()}}),n,null,[[0,21]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){return function(){return e(dt())}}),[e]),Object(x.jsxs)("div",{className:"userPaymentMethod",children:[Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(v,{variant:"outlined",label:"Coupon",onChange:function(e){return i(e.target.value.toUpperCase())},value:s}),Object(x.jsx)("button",{className:"btn primary-btn",onClick:function(){return u.apply(this,arguments)},children:"Apply"})]}),Object(x.jsx)("button",{type:"submit",children:"submit"}),Object(x.jsx)(Uc.a,{})]})}),Hc=n(337),qc=n(428),Yc=n(1016),$c=(n(919),function(e){var t=e.back,n=e.next,a=Object(l.b)(),s=Object(c.useContext)(ct)[1],i=Object(b.g)(),r=i.getValues,o=i.control,j=i.setFocus,m=Object(l.c)((function(e){return e})).cart,h=se().isAuthenticated;return Object(x.jsxs)("div",{className:"shippingPreference",children:[Object(x.jsx)("div",{className:"shippingInfoContainer",children:Object(x.jsxs)("div",{className:"shippingInfo",children:[Object(x.jsxs)("div",{className:"contact",children:[Object(x.jsx)("span",{children:"Contact"}),Object(x.jsx)("span",{children:r("email")||r("phoneNumber")}),Object(x.jsx)("span",{onClick:function(){t()},children:"Change"})]}),Object(x.jsxs)("div",{className:"shippingTo",children:[Object(x.jsx)("span",{children:"Ship to"}),Object(x.jsx)("span",{children:"".concat(r("address")?"".concat(r("address"),","):""," ").concat("object"===typeof r("district")?"".concat(r("district").name?"".concat(r("district").name,","):""):"".concat(r("district")?"".concat(r("district"),","):"")," ").concat("object"===typeof r("city")?"".concat(r("city").name?"".concat(r("city").name,","):""):"".concat(r("city")?"".concat(r("city"),","):"")," ").concat(r("country")?"".concat(r("country")):"")}),Object(x.jsx)("span",{onClick:function(){t(),j("city")},children:"Change"})]})]})}),Object(x.jsxs)("div",{className:"shippingMethodContainer",children:[Object(x.jsx)("h2",{children:"Shipping Method"}),Object(x.jsx)(b.a,{name:"shippingMethod",control:o,render:function(e){var t=e.field;return Object(x.jsx)("div",{className:"shippingMethod",children:Object(x.jsx)(Hc.a,{children:Object(x.jsxs)(qc.a,Object(u.a)(Object(u.a)({},t),{},{children:[Object(x.jsxs)("div",{className:"agency",children:[Object(x.jsx)(Yc.a,{name:"shippingMethod",value:"agency-ghn"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"GHN (1\u20133 days, 5 p.m. to 10:30 p.m.) "}),Object(x.jsx)("p",{children:"GHN will deliver to your door within 3 days between 5 p.m. and 10:30 p.m."})]}),Object(x.jsx)("span",{children:"Free"})]}),Object(x.jsxs)("div",{className:"agency",children:[Object(x.jsx)(Yc.a,{name:"shippingMethod",value:"agency-ghtk"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"GHTK (5-10 business days) "}),Object(x.jsx)("p",{children:"GHTK will deliver to your door within 5-10 business days between 5 p.m. and 10:30 p.m."})]}),Object(x.jsx)("span",{children:"Free"})]})]}))})})}})]}),Object(x.jsxs)("div",{className:"buttonGroup",children:[Object(x.jsxs)("div",{onClick:t,children:[Object(x.jsx)("span",{children:Object(x.jsx)(Rc.a,{})})," ",Object(x.jsx)("span",{children:" Return to information"})]}),Object(x.jsx)("button",{className:"btn primary-btn",onClick:function(){s(!0),h?function(e){return B.post("/user/cart",e)}(m).then((function(e){s(!1),oc(e.data.cart._id).then((function(e){a(lt(e.data.cart)),n()}))})).catch((function(e){s(!1),d.b.error(e.message)})):function(e){return B.post("/guest/cart",e)}(m).then((function(e){s(!1),lc(e.data.cart._id).then((function(e){a(lt(e.data.cart)),n()}))})).catch((function(e){s(!1),d.b.error(e.message)}))},children:"Proceed to payment"})]})]})}),Jc=function(e){var t=e.stepState,n=Object(o.a)(t,2),c=n[0],a=n[1];function s(){return a((function(e){return e+1}))}function i(){return a((function(e){return e-1}))}switch(c){case 0:return Object(x.jsx)(Bc,{next:s,back:i});case 1:return Object(x.jsx)($c,{next:s,back:i});case 2:return Object(x.jsx)(zc,{next:s,back:i});default:return Object(x.jsx)(x.Fragment,{})}},Kc=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(et.g)(),i=Object(b.f)({mode:"onSubmit",defaultValues:{shippingMethod:"agency-ghn",isInVietNam:!1},resolver:Object(jc.a)(Mc)}),r=i.handleSubmit;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},i),{},{children:Object(x.jsxs)("form",{onSubmit:r((function(e){console.log(e)})),children:[Object(x.jsxs)("div",{className:"steps",children:[Object(x.jsx)("span",{onClick:function(){return s.push("/cart")},children:"Cart"}),Object(x.jsx)("span",{className:0===n?"activeStep":"",children:"Information"}),Object(x.jsx)("span",{className:1===n?"activeStep":"",children:"Shipping"}),Object(x.jsx)("span",{className:2===n?"activeStep":"",children:"Payment"})]}),Object(x.jsx)(Jc,{stepState:[n,a]})]})}))})},Zc=(n(920),function(){var e=Object(l.c)((function(e){return e})).cart,t=e.items,n=e.quantity,a=e.cartTotal,s=e.totalWeight,i=e.isCouponApplied,r=e.coupon,o=e.totalAfterDiscount,d=Object(et.g)();return Object(c.useEffect)((function(){(s&&s>100||0===s)&&d.push("/cart")}),[d,s]),Object(x.jsxs)("div",{className:"checkoutSummary",children:[Object(x.jsx)("div",{className:"checkoutSummary__items",children:t&&t.length>0&&t.map((function(e){var t=e.item,n=e.buying,c=e.discountedPrice,a=e.selectedSize;return Object(x.jsxs)("div",{className:"checkoutSummary__items-item",children:[Object(x.jsx)("div",{className:"img",children:Object(x.jsx)("img",{src:t.thumbnail.url,alt:t.title})}),Object(x.jsxs)("div",{className:"details",children:[Object(x.jsx)("div",{className:"brand",children:t.details.brand}),Object(x.jsx)("div",{className:"name",children:t.title}),Object(x.jsx)("div",{className:"price",children:c===t.price?Object(x.jsxs)("div",{children:["$",t.price,"/",t.unit?t.unit:"g"," "]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("strike",{children:["$",t.price]})," - ","$",c,"/",t.unit?t.unit:"g"," "]})}),Object(x.jsxs)("div",{className:"selectedSize",children:[a,t.unit||"g"," "]}),c===t.price?Object(x.jsxs)("span",{children:["$",(t.price*a).toFixed(2)]}):Object(x.jsxs)("span",{children:["$",(c*a).toFixed(2)]}),Object(x.jsxs)("span",{children:["QTY ",n]})]})]},t.title+n+a)}))}),Object(x.jsxs)("div",{className:"checkoutSummary__total",children:[Object(x.jsxs)("div",{className:"contentBox",children:[Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("span",{children:"GRAMS OF CANNABIS"}),Object(x.jsx)("span",{children:"".concat(s,"/100.0 limit")})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("span",{children:"Total items"}),Object(x.jsx)("span",{children:n})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("span",{children:"shipping"}),Object(x.jsx)("span",{children:"Free"})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("span",{children:"Coupon"}),Object(x.jsx)("span",{children:i?"".concat(r.name," - ").concat(r.discount,"% "):"None"})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("span",{children:"cart - total"}),Object(x.jsxs)("span",{children:["$",a.toFixed(2)]})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("span",{children:"saving"}),Object(x.jsxs)("span",{children:["- $",(a-o).toFixed(2)]})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("span",{children:"sub - total"}),Object(x.jsxs)("span",{children:["$",o.toFixed(2)]})]})]}),Object(x.jsxs)("div",{className:"total",children:[Object(x.jsx)("span",{children:"you pay"}),Object(x.jsxs)("span",{children:["$",o.toFixed(2)]})]})]})]})}),Qc=(n(921),function(){return Object(x.jsx)("div",{className:"checkout",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"checkout__steps",children:[Object(x.jsx)("div",{className:"logo",children:Object(x.jsx)("h1",{children:Object(x.jsx)(Un.b,{to:"/",children:"C9STORE"})})}),Object(x.jsx)("div",{className:"checkoutForm",children:Object(x.jsx)(Kc,{})})]}),Object(x.jsx)("div",{className:"checkout__sumary",children:Object(x.jsx)(Zc,{})})]})})}),Xc=(n(922),function(){var e=Object(l.c)((function(e){return e.cart||{}})),t=e.items,n=e.quantity,a=e.cartTotal,s=e.totalWeight,i=Jt(),r=i.handleQuantity,o=i.removeItem,d=Object(c.useContext)(ct)[1],u=Object(et.g)(),j=Object(et.h)().pathname.split("/");return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(Hn,{links:j}),Object(x.jsxs)("div",{className:"cart",children:[Object(x.jsxs)("div",{className:"cart__items",children:[t&&0===t.length&&Object(x.jsx)("p",{className:"",children:"No items"}),t&&t.length>0&&t.map((function(e,t){var n=e.item,c=e.itemTotalAfterDiscount,a=e.buying,s=e.selectedSize,i=e.discountedPrice,l=e.asignedDiscount;return Object(x.jsxs)("div",{className:"cart__items__item",children:[Object(x.jsxs)("p",{children:["$",c.toFixed(2)]}),Object(x.jsxs)("div",{className:"item-image",children:[Object(x.jsx)("img",{src:n.thumbnail.url,alt:""}),Object(x.jsxs)("div",{className:"item-image__quantity",children:[Object(x.jsx)("button",{className:"transparent-btn",onClick:function(){a<2?o(n,s):r("subtr",n,s,a,i,l)},children:Object(x.jsx)(Yt.a,{})}),Object(x.jsx)("span",{children:a}),Object(x.jsx)("button",{className:"transparent-btn",onClick:function(){return r("add",n,s,a,i,l)},children:Object(x.jsx)(Ht.a,{})})]})]}),Object(x.jsxs)("div",{className:"item-info",children:[Object(x.jsx)("p",{className:"item-info__brand",children:n.brand}),Object(x.jsx)("h4",{className:"item-info__title",children:n.title}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"THC "}),n.details.thc_content.length>0?Object(x.jsxs)("span",{children:[n.details.thc_content[0].toFixed(2)," -"," ",n.details.thc_content[1].toFixed(2),"%"]}):Object(x.jsx)("span",{children:"unknown"})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"CBD "}),n.details.thc_content.length>0?Object(x.jsxs)("span",{children:[n.details.cbd_content[0].toFixed(2)," -"," ",n.details.cbd_content[1].toFixed(2),"%"]}):Object(x.jsx)("span",{children:"unknown"})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Size"})," ",s," ",n.unit||"g"]}),Object(x.jsx)("p",{children:i===n.price?Object(x.jsxs)(x.Fragment,{children:["$",n.price,"/",n.unit||"g"," "]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("strike",{children:["$",n.price]})," - ","$",i,"/",n.unit||"g"," "]})})]}),Object(x.jsx)("button",{onClick:function(){return o(n,s)},className:"transparent-btn btn ",children:Object(x.jsx)(Gt.a,{})})]},n._id+t)}))]}),Object(x.jsxs)("div",{className:"cart__summary",children:[Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("p",{children:Object(x.jsx)("strong",{children:"Amount:"})}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[s.toFixed(2)," / 100.00g limit "]})})]}),s>100&&Object(x.jsxs)("p",{children:["You have exceeded your ",Object(x.jsx)("strong",{children:"100.00g limit"})," of canabis per purchase. Remove some or we might have to call the cops!"," "]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)("p",{children:Object(x.jsx)("strong",{children:"Total:"})}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:["$",a.toFixed(2)]})})]}),Object(x.jsx)("div",{className:"cart-actions",children:Object(x.jsx)("button",{disabled:s>100||0===n,onClick:function(){$t([function(){return u.push("/checkout")}],d)},className:" btn primary-btn toCheckout ".concat(s>100||0===n?"disabled":""),children:s>100?"Limit Reached":"Checkout"})})]})]})]})," "]})}),ea=n(1012),ta=n(1002),na=function(){return Object(x.jsx)("div",{children:"Billing"})},ca=n(985),aa=n(956),sa=n(539),ia=n.n(sa),ra=n(540),oa=n.n(ra),la=function(e){var t=e.name,n=e.label,a=Object(b.g)(),s=a.control,i=a.formState.errors,r=Object(c.useState)(!1),l=Object(o.a)(r,2),d=l[0],j=l[1];return Object(x.jsx)("div",{className:"productInfo__".concat(t),children:Object(x.jsx)(b.a,{name:t,control:s,render:function(e){var c,a=e.field;return Object(x.jsx)(v,Object(u.a)(Object(u.a)({},a),{},{label:n,type:t,error:!!i[t],helperText:null===(c=i[t])||void 0===c?void 0:c.message,variant:"outlined",margin:"normal",fullWidth:!0,InputProps:{type:d?"text":"password",endAdornment:Object(x.jsx)(h.a,{position:"end",children:Object(x.jsx)(aa.a,{onClick:function(){return j(!d)},children:d?Object(x.jsx)(ia.a,{}):Object(x.jsx)(oa.a,{})})})}}))}})})},da=dc.e().shape({oldPassword:dc.g().required("Old password is required"),newPassword:dc.g().matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,"Your password pust contain 6 characters, one uppercase, one lowercase, one number and one special case character").required("New password is required"),passwordConfirmation:dc.g().oneOf([dc.f("newPassword"),null],"Password doesn't match")}),ua=(n(923),{mode:"onBlur",resolver:Object(jc.a)(da)}),ja=function(){var e=Object(c.useContext)(ct),t=Object(o.a)(e,1)[0],n=Object(l.c)((function(e){return e.user})),a=n.hasError,s=n.isLoading,i=Object(b.f)(Object(u.a)(Object(u.a)({},ua),{},{defaultValues:{oldPassword:"",newPassword:"",passwordConfirmation:""}})),r=i.handleSubmit,d=i.reset,j=se().changePassword;return Object(c.useEffect)((function(){a||s||(d(),console.log("hello"))}),[a,d,s]),console.log(a),Object(x.jsx)("div",{className:"changePasswordTab",children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},i),{},{children:Object(x.jsx)("form",{onSubmit:r((function(e){j(e)})),children:Object(x.jsxs)(ca.a,{classes:{root:"lmao"},children:[Object(x.jsxs)("div",{className:"passwordFields",children:[Object(x.jsx)(la,{name:"oldPassword",label:"Old Password"}),Object(x.jsx)(la,{name:"newPassword",label:"New Password"}),Object(x.jsx)(la,{name:"passwordConfirmation",label:"Confirm Password"})]}),Object(x.jsx)("button",{disabled:t,type:"submit",className:"btn updatePasswordBtn  ".concat(t?"disabled":"primary-btn bouncy"),children:"Update"})]})})}))})},ba=n(994),ma=n(541),ha=n.n(ma),pa=(n(924),["error","file","caption","sx","defaultPhoto"]),Oa=function(e){e.error;var t=e.file,n=e.caption,c=(e.sx,e.defaultPhoto),a=Object(m.a)(e,pa),s=Object(Xt.b)(Object(u.a)({multiple:!1},a)),i=s.getRootProps,r=s.getInputProps;return Object(x.jsxs)("div",{className:"avatarUpload",children:[Object(x.jsxs)("div",Object(u.a)(Object(u.a)({className:"dropzone"},i()),{},{children:[Object(x.jsx)("input",Object(u.a)({},r())),Object(x.jsx)("div",{className:"ownAvatar",children:Object(x.jsx)("img",{src:c.url,alt:"avatar"})}),Object(x.jsx)("div",{className:"preview",children:Object(x.jsx)("img",{src:t,alt:""})}),Object(x.jsxs)("div",{className:"backdrop",children:[Object(x.jsx)("div",{className:"layer"}),Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)(ha.a,{})})]})]})),Object(x.jsx)("span",{className:"caption",children:n})]})},fa=(n(925),n(262)),va=dc.e().shape({name:dc.g().matches(/^(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/,"Name must not contain any special characters, blank space").required("Name can't be left blank")}),xa={mode:"onBlur",resolver:Object(jc.a)(va)},ga=function(){var e=Object(c.useContext)(ct),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),i=Object(o.a)(s,2),r=i[0],l=i[1],d=Object(b.f)(Object(u.a)({},xa)),j=d.handleSubmit,m=d.setValue,h=d.getValues,p=se(),O=p.update,f=p.user,v=f.photo,g=f.email,y=f.name,N=f.whereabouts,C=f.phoneNumber,k=f.about,w=N||{},S=w.address,T=w.city,E=w.state,M=w.country,P=w.zipCode,R=w.district;var D=Object(c.useCallback)(function(){var e=Object(I.a)(A.a.mark((function e(t){var n,c,s,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(!0),n=h("photo")||{},c=n.public_id,s=(v||{}).public_id,!c&&!s){e.next=7;break}return e.next=6,mn(c||s);case 6:a(!1);case 7:(i=t[0])&&(a(!0),rn.a.imageFileResizer(i,720,720,"JPEG",100,0,(function(e){bn(e).then((function(e){a(!1),l(URL.createObjectURL(i)),m("photo",{public_id:e.data.public_id,url:e.data.url})})).catch((function(e){console.log(e)}))})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,h,a,v]);return Object(x.jsx)("div",{className:"generalTab",children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},d),{},{children:Object(x.jsx)("form",{onSubmit:j((function(e){var t={};for(var n in e)e[n]&&(t[n]=e[n]);var c={};for(var a in t)t[a]!==f[a]&&(c[a]=t[a]);console.log(c),Object.keys(c).length>0&&O(c)})),children:Object(x.jsxs)(ba.a,{container:!0,spacing:3,children:[Object(x.jsx)(ba.a,{item:!0,lg:4,children:Object(x.jsx)(ca.a,{classes:{root:"lmao"},sx:{py:10,px:3,textAlign:"center"},children:Object(x.jsx)(Oa,{accept:"image/*",file:r,maxSize:3145728,onDrop:D,defaultPhoto:v,caption:Object(x.jsxs)(fa.a,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",Object(x.jsx)("br",{})," max size of 3.1MB"]})})})}),Object(x.jsx)(ba.a,{item:!0,lg:8,children:Object(x.jsx)(ca.a,{classes:{root:"lmao"},children:Object(x.jsxs)("div",{className:"account-info",children:[Object(x.jsxs)("div",{className:"inputs",children:[Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"name",type:"text",label:"Name",defaultValue:y}),Object(x.jsx)(_,{name:"email",type:"email",disabled:!0,defaultValue:g})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"phoneNumber",type:"text",label:"Phone Number",defaultValue:C})," ",Object(x.jsx)(_,{name:"country",type:"text",label:"Country",defaultValue:M})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"city",type:"text",label:"City",defaultValue:T}),Object(x.jsx)(_,{name:"state",type:"text",label:"State",defaultValue:E})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"district",type:"text",label:"District",defaultValue:R})," ",Object(x.jsx)(_,{name:"zipCode",type:"text",label:"Zip/Code",defaultValue:P})]})," ",Object(x.jsx)(_,{name:"address",type:"text",label:"Address",defaultValue:S}),Object(x.jsx)(_,{name:"about",type:"text",label:"About",multiline:!0,minRows:4,maxRows:4,defaultValue:k})]}),Object(x.jsx)("button",{disabled:n,type:"submit",className:"btn  ".concat(n?"disabled":"primary-btn bouncy"),children:"Update"})]})})})]})})}))})},_a=n(542),ya=n.n(_a),Na=n(544),Ca=n.n(Na),ka=n(543),wa=n.n(ka),Sa=(n(926),["children","value","index"]),Ta=[{value:"general",icon:Object(x.jsx)(ya.a,{}),component:Object(x.jsx)(ga,{})},{value:"billing",icon:Object(x.jsx)(wa.a,{}),component:Object(x.jsx)(na,{})},{value:"changePassword",icon:Object(x.jsx)(Ca.a,{}),component:Object(x.jsx)(ja,{})}];function Ea(e){var t=e.children,n=e.value,c=e.index,a=Object(m.a)(e,Sa);return Object(x.jsx)("div",Object(u.a)(Object(u.a)({role:"tabpanel",hidden:n!==c,id:"account-tabpanel-".concat(c),"aria-labelledby":"account-tab-".concat(c)},a),{},{children:n===c&&Object(x.jsx)("div",{className:"account__tab-view ".concat(n),children:t})}))}var Aa=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(x.jsx)("div",{className:"account",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{className:"account__tabs",children:Object(x.jsx)(ea.a,{classes:{indicator:"tabIndicator"},value:n,onChange:function(e,t){a(t)},"aria-label":"account-tabs",children:Ta.map((function(e,t){return Object(x.jsx)(ta.a,Object(u.a)({classes:{wrapper:"tab-wrapper"},icon:e.icon,value:t,label:e.value.toUpperCase()},function(e){return{id:"account-tabs-".concat(e),"aria-controls":"account-tabpanel-".concat(e)}}(t)),e.value)}))})}),Ta.map((function(e,t){return Object(x.jsx)(Ea,{value:n,index:t,children:e.component},e.value)}))]})})},Ia=(n(927),dc.e().shape({email:dc.g().required("Please enter your email"),password:dc.g().required("Please enter your password"),keep:dc.c()})),Ma=n(256),Pa=n.n(Ma),Ra={mode:"onChange",resolver:Object(jc.a)(Ia)},Da=function(){var e=se().login,t=Object(l.c)((function(e){return e.user})).isLoading,n=Object(c.useContext)(ct),a=Object(o.a)(n,2),s=a[0],i=a[1],r=Object(b.f)(Object(u.a)(Object(u.a)({},Ra),{},{defaultValues:{keep:!0}})),d=r.handleSubmit,j=r.control;function m(){return(m=Object(I.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$t([function(){return e(n)}],i);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(cc.a,{children:Object(x.jsxs)("div",{className:"sign-in",children:[Object(x.jsxs)("div",{className:"backBtn",children:[Object(x.jsx)(Pa.a,{})," ",Object(x.jsx)(Un.b,{to:"/",children:"Go To Home"})]}),Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(ac.a.div,{animate:{x:0},initial:{x:200},exit:{x:300},className:"login-panel",children:[Object(x.jsxs)("div",{className:"title",children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsx)("p",{children:"Enter your email / Enter your password"}),Object(x.jsxs)("p",{children:["Don't have an account?"," ",Object(x.jsx)(Un.b,{to:"/auth/register",children:"Register"})]})]}),Object(x.jsx)("div",{className:"login-form",children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},r),{},{children:Object(x.jsxs)(N,{onSubmit:d((function(e){return m.apply(this,arguments)})),children:[Object(x.jsxs)("div",{className:"input-fields",children:[Object(x.jsx)(_,{name:"email",type:"email",label:"Email *"}),Object(x.jsx)(la,{name:"password",label:"Password *"})]}),Object(x.jsxs)("div",{className:"submit",children:[Object(x.jsx)("button",{disabled:t||s,type:"submit",className:"btn bouncy ".concat(t||s?"disabled":""),children:"Log in"}),Object(x.jsxs)("p",{className:"keep",children:[Object(x.jsx)(b.a,{control:j,name:"keep",render:function(e){var t=e.field;return Object(x.jsx)(Lc.a,Object(u.a)(Object(u.a)({},t),{},{defaultChecked:!0,color:"primary",inputProps:{"aria-label":"keep me logged in"}}))}}),Object(x.jsx)("span",{children:"Keep me logged in"})]})]})]})}))}),Object(x.jsxs)("div",{className:"social-login",children:[Object(x.jsxs)("div",{className:"button",children:[Object(x.jsx)("button",{children:Object(x.jsx)("span",{children:"Sign up with Facebook"})}),Object(x.jsx)("button",{children:Object(x.jsx)("span",{children:"Sign up with Twitter"})})]}),Object(x.jsx)("span",{children:"Or"})]})]},"login")})]})})})},La=(n(928),dc.e().shape({name:dc.g().matches(/^(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/,"Name must not contain any special characters, blank space").required("Please enter a username"),email:dc.g().required("Please enter your email"),password:dc.g().matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,"Your password pust contain 6 characters, one uppercase, one lowercase, one number and one special case character").required(),passwordConfirmation:dc.g().oneOf([dc.f("password"),null],"Password doesn't match"),confirm:dc.c().oneOf([!0,"To become a member, you must agree to our terms and conditions"])})),Fa=["confirm"],Ba={mode:"onChange",resolver:Object(jc.a)(La)},Ua=function(){var e,t,n=se().register,c=Object(l.c)((function(e){return e.user})).isLoading,a=Object(b.f)(Object(u.a)({},Ba)),s=a.register,i=a.handleSubmit,r=a.control,o=a.formState,d=o.errors,j=o.isValid;return Object(x.jsxs)("div",{className:"register",children:[Object(x.jsxs)("div",{className:"backBtn",children:[Object(x.jsx)(Pa.a,{})," ",Object(x.jsx)(Un.b,{to:"/",children:"Go To Home"})]}),Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)(ac.a.div,{animate:{x:0},initial:{x:200},exit:{x:300},className:"register-panel",children:[Object(x.jsxs)("div",{className:"social-login",children:[Object(x.jsxs)("div",{className:"button",children:[Object(x.jsx)("button",{children:"Sign up with Facebook"}),Object(x.jsx)("button",{children:" Sign up with Twitter"})]}),Object(x.jsx)("span",{children:"Or"})]}),Object(x.jsxs)("div",{className:"title",children:[Object(x.jsx)("h1",{children:"Sign Up"}),Object(x.jsx)("p",{children:"Join us - Register now for FREE"}),Object(x.jsxs)("p",{children:["Already a member?",Object(x.jsxs)(Un.b,{to:"/auth/login",children:[" ",Object(x.jsx)("span",{children:"Log in"})]})]})]}),Object(x.jsx)("div",{className:"register-form",children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},a),{},{children:Object(x.jsxs)(N,{onSubmit:i((function(e){e.confirm;var t=Object(m.a)(e,Fa);try{n(t)}catch(c){console.log(c)}})),children:[Object(x.jsxs)("div",{className:"input-fields",children:[Object(x.jsx)(_,{ref:s("name"),name:"name",type:"text",size:"small",margin:"none",label:"Username *",error:!!d.name,helperText:null===d||void 0===d||null===(e=d.name)||void 0===e?void 0:e.message}),Object(x.jsx)(_,{ref:s("email"),name:"email",type:"email",size:"small",margin:"none",label:"Email *",error:!!d.email,helperText:null===d||void 0===d||null===(t=d.email)||void 0===t?void 0:t.message}),Object(x.jsx)(la,{name:"password",label:"Password *"}),Object(x.jsx)(la,{name:"passwordConfirmation",label:"Confirm Password"})]}),Object(x.jsx)("div",{className:"capcha",children:" "}),Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsxs)("p",{className:"agree",children:[Object(x.jsx)(b.a,{control:r,name:"confirm",render:function(e){var t=e.field;return Object(x.jsx)(Lc.a,Object(u.a)(Object(u.a)({},t),{},{defaultChecked:!0,color:"primary",inputProps:{"aria-label":"confirm agreement to terms"}}))}}),Object(x.jsxs)("span",{children:["I agree to the ",Object(x.jsx)("strong",{children:" terms "})," and",Object(x.jsx)("strong",{children:" conditions"})]})]}),Object(x.jsx)("div",{className:"submit",children:Object(x.jsx)("button",{disabled:!j||c,className:"btn bouncy ".concat(j?"":"disabled"," "),children:"Sign Up"})})]})]})}))})]})})]})},Va=(n(929),n(545)),Wa=n.n(Va),Ga=n(257),za=n.n(Ga),Ha=n(970),qa=n(426),Ya=Object(xt.a)((function(e){return{purple:{color:e.palette.getContrastText(qa.a[500]),backgroundColor:qa.a[500]}}})),$a=function(){var e=Ya(),t=Object(l.c)((function(e){return e.chat})).unreadCount,n=se().user;return Object(x.jsx)("div",{className:"header-logged-in",children:Object(x.jsxs)("div",{className:"container ",children:[Object(x.jsx)(Un.b,{to:"/",className:"header-logo",children:"C9STORE"}),Object(x.jsxs)("div",{className:"header-actions",children:[Object(x.jsx)("span",{children:Object(x.jsx)(Vt.a,{badgeContent:t,color:"error",children:Object(x.jsx)(Wa.a,{})})}),Object(x.jsx)("span",{children:Object(x.jsx)(za.a,{})}),Object(x.jsx)("span",{children:Object(x.jsx)(Ha.a,{src:n.photo.url,className:e.purple,children:"OP"})})]})]})})},Ja=(n(930),n(342)),Ka=n.n(Ja),Za=n(546),Qa=n.n(Za),Xa=n(547),es=n.n(Xa),ts=n(548),ns=n.n(ts),cs=n(549),as=n.n(cs),ss=function(){var e=Object(et.g)();function t(t){switch(t){case"home":return e.push("/admin/app");case t:return e.push("/admin/".concat(t.toLowerCase()));default:return}}return Object(x.jsx)("div",{className:"sidebar",children:Object(x.jsxs)("div",{className:"sidebarWrapper",children:[Object(x.jsxs)("div",{className:"sidebarMenu",children:[Object(x.jsx)("h3",{className:"sidebarTitle",children:"Notifications"}),Object(x.jsxs)("ul",{className:"sidebarList",children:[Object(x.jsxs)("li",{className:"sidebarListItem",onClick:function(){return t("Mail")},children:[Object(x.jsx)(Qa.a,{className:"sidebarIcon"}),"Mail"]}),Object(x.jsxs)("li",{className:"sidebarListItem",onClick:function(){return t("Feedback")},children:[Object(x.jsx)(es.a,{className:"sidebarIcon"}),"Feedback"]}),Object(x.jsxs)("li",{className:"sidebarListItem",onClick:function(){return e.push("/user/messenger")},children:[Object(x.jsx)(ns.a,{className:"sidebarIcon"}),"Messages"]})]})]}),Object(x.jsxs)("div",{className:"sidebarMenu",children:[Object(x.jsx)("h3",{className:"sidebarTitle",children:"Products"}),Object(x.jsxs)("ul",{className:"sidebarList",children:[Object(x.jsxs)("li",{className:"sidebarListItem",onClick:function(){return t("product/create")},children:[Object(x.jsx)(Ka.a,{className:"sidebarIcon"}),"Add"]}),Object(x.jsxs)("li",{className:"sidebarListItem",onClick:function(){return t("product/list")},children:[Object(x.jsx)(as.a,{className:"sidebarIcon"}),"List"]}),Object(x.jsxs)("li",{className:"sidebarListItem ",onClick:function(){return t("coupon")},children:[Object(x.jsx)(Ka.a,{className:"sidebarIcon"}),"Coupons"]})]})]})]})})},is=(n(931),function(e){var t=Object.values(e);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)($a,{}),Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)(ss,{}),Object(x.jsx)("div",{className:"main-content",children:t.map((function(e){return Object(x.jsx)(et.b,{path:e.path,children:Object(x.jsx)(e.component,{})},e.path)}))})]})]})}),rs=(n(932),function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:"admin"})})}),os=dc.e().shape({title:dc.g().required("Product must have a title"),brief:dc.g().required("Product must have a brief description"),description:dc.g(),images:dc.b().max(10,"Maximum number of images allowed is 10"),thumbnail:dc.e().shape({public_id:dc.g(),url:dc.g()}),size:dc.b().of(dc.d()).max(5,"Product may have at most 5 different sizes, remove some to proceed"),discount:dc.b().of(dc.d()).max(3,"Product may have a maximum of 3 discount levels"),category:dc.g().required("Product must belong to a category"),subCategory:dc.g().required("Product must belong to a subCategory"),price:dc.d("Price must be a number").min(1,"Price must be greater than 1").required("Product must have a price"),quantity:dc.d().required("Product must have quantity"),details:dc.e().shape({producer:dc.g(),plantType:dc.g(),growMethod:dc.g(),growRegion:dc.g(),terpenes:dc.g(),dryingMethod:dc.g(),thc_content:dc.b().required(),cbd_content:dc.b().required(),brand:dc.g()})}),ls=(n(933),function(e){var t=e.images,n={dots:e.dots,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,swipeToSlide:!0};return Object(x.jsx)(bt.a,Object(u.a)(Object(u.a)({},n),{},{children:t.map((function(e){return Object(x.jsx)("img",{className:"slick-image",alt:e.public_id,src:e.url},e.public_id)}))}))}),ds=(n(934),function(e){var t=e.size,n=e.discount,c=e.price;function a(e,t){return(e*t).toFixed(2)}function s(e,t,c){return(e*t-(e*t*n[c>2?2:c]||0)/100).toFixed(2)}function i(e,t){return(e-(e*n[t>2?2:t]||0)/100).toFixed(2)}return Object(x.jsx)("div",{className:"price-table",children:Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Price estimates"})}),t&&t.length>0&&t.map((function(e,t){return Object(x.jsxs)("td",{children:["Size ",t+1]},e)}))]})}),Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Size"}),t&&t.length>0&&t.map((function(e){return Object(x.jsxs)("td",{children:[e,"g"]},e)}))]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Discount Level"}),n&&n.length>0&&Array(t.length).fill(0).map((function(e,t){return Object(x.jsxs)("td",{children:[t<n.length?n[t]:n[n.length-1],"%"]},t)}))]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Price/g"}),t&&t.length>0&&t.map((function(e,t){return Object(x.jsxs)("td",{children:["$",i(c,t)]},e)}))]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Original total"}),t&&t.length>0&&t.map((function(e,t){return Object(x.jsxs)("td",{children:["$",a(e,c)]},e)}))]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Total after discount"}),t&&t.length>0&&t.map((function(e,t){return Object(x.jsxs)("td",{children:["$",s(e,c,t)]},e)}))]})]}),Object(x.jsx)("tfoot",{})]})})}),us=[{name:"Plant Type",code:"plantType"},{name:"Net Weight",code:"netWeight"},{name:"Extraction Process",code:"extractionProcess"},{name:"Allergens",code:"allergens"},{name:"Strain Name",code:"strainName"},{name:"Grow Method",code:"growMethod"},{name:"Grow Region",code:"growRegion"},{name:"Growing Province",code:"growingProvince"},{name:"Drying Method",code:"dryingMethod"},{name:"Terpenes",code:"terpenes"},{name:"Trimming Method",code:"trimmingMethod"},{name:"Grow Room Lighting",code:"growRoomLighting"},{name:"Material Type",code:"materialType"},{name:"Grow Medium",code:"growMedium"},{name:"Storage Criteria",code:"storageCriteria"}],js={mode:"onBlur",resolver:Object(jc.a)(os)},bs=Object(Rt.a)({skele:{width:"100%",height:"20em"}}),ms=function(){var e=Object(b.f)(Object(u.a)(Object(u.a)({},js),{},{defaultValues:{images:[],size:[],discount:[0]}})),t=e.handleSubmit,n=e.control,a=e.reset,s=e.setValue,i=e.getValues,r=e.formState,l=r.errors,j=r.isValid,m=bs(),h=Object(c.useContext)(at),p=Object(o.a)(h,1)[0],O=Object(c.useContext)(ct)[1],f=Object(c.useState)(0),v=Object(o.a)(f,2),g=v[0],y=v[1],C=Object(c.useState)([]),k=Object(o.a)(C,2),w=k[0],S=k[1],T=Object(c.useState)([]),E=Object(o.a)(T,2),A=E[0],I=E[1],M=Object(c.useState)([]),P=Object(o.a)(M,2),R=P[0],D=P[1],L=Object(c.useState)(null),F=Object(o.a)(L,2),U=F[0],V=F[1],W=Object(c.useState)(""),G=Object(o.a)(W,2),z=G[0],H=G[1],q=Object(c.useRef)([]),Y=Object(c.useState)(void 0),$=Object(o.a)(Y,2),J=$[0],K=$[1],Z=Object(c.useRef)([0]),Q=Object(c.useState)(void 0),X=Object(o.a)(Q,2),ee=X[0],te=X[1],ne=Object(c.useState)([]),ce=Object(o.a)(ne,2),ae=ce[0],se=ce[1],ie=Object(c.useState)(!1),re=Object(o.a)(ie,2),oe=re[0],le=re[1],de=Object(c.useState)("category"),ue=Object(o.a)(de,2),je=ue[0],be=ue[1],me=Object(c.useState)("details"),he=Object(o.a)(me,2),pe=he[0],Oe=he[1],fe=Object(c.useState)("subcategory"),ve=Object(o.a)(fe,2),xe=ve[0],ge=ve[1];function _e(e,t,n,c){return!e.current.find((function(e){return e===t}))&&t&&t>0&&(e.current.push(parseInt(t).toFixed(2)),s(n,e.current),c("")),c("")}var ye=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(O(!0),e)for(var t=0;t<w.length;t++)mn(w[t].public_id).then((function(e){O(!1)}));ge(Math.random()),be(Math.random()),Oe(Math.random());var n={};ae.forEach((function(e){return n["details.".concat(e.code)]=""})),a(Object(u.a)({title:"",brief:"",description:"",category:"",subCategory:"",brand:"",size:[],images:[],discount:[0],price:"",quantity:"",producer:""},n)),s("details.thc_content",[0,0]),s("details.cbd_content",[0,0]),le((function(e){return!e})),se([]),S([]),y(0),D([]),H(""),O(!1)}),[a,w,O,s,ae]);return Object(c.useEffect)((function(){e.formState.isSubmitSuccessful&&ye()}),[e.formState,a,ye]),Object(c.useEffect)((function(){Ec().then((function(e){I(e.data.categories)}))}),[e.formState.isSubmitSuccessful,oe]),Object(c.useEffect)((function(){U&&Ac(U).then((function(e){D(e.data.subCategories)}))}),[U]),Object(x.jsx)("div",{className:"createProduct",children:Object(x.jsx)("div",{className:"createForm",children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},e),{},{children:Object(x.jsxs)(N,{onSubmit:t((function(e){var t;window.localStorage.getItem("accessToken"),O(!0),(t=e,B.post("/product",Object(u.a)({},t))).then((function(){O(!1),d.b.success("Product added successfully")})).catch((function(e){return d.b.success("Something went wrong: "+e.message)}))})),children:[q.current&&q.current.length>0&&Object(x.jsx)(ds,{discount:i("discount"),size:i("size"),price:i("price")}),Object(x.jsx)("div",{className:"productImages",children:Object(x.jsxs)("div",{className:"productImages__images",children:[Object(x.jsx)("div",{className:"images-preview",children:Object(x.jsx)("div",{className:"images-preview__thumbnail",children:p?Object(x.jsx)(dn.a,{className:m.skele,animation:"pulse",variant:"rect"}):w&&w.length>0&&Object(x.jsx)(ls,{images:w,dots:!1})})}),Object(x.jsx)("div",{className:"images-dropzone",children:Object(x.jsx)(pn,{getValues:i,setValue:s,name:"images",images:w,control:n,setImages:S,numb:g,setNumb:y})})]})}),Object(x.jsxs)("div",{className:"productInfo",children:[Object(x.jsx)(_,{name:"title",label:"Title *"}),Object(x.jsx)(_,{name:"brief",label:"Brief *"}),Object(x.jsx)(_,{multiline:!0,minRows:5,maxRows:5,name:"description",type:"text",label:"Description *"}),Object(x.jsx)("div",{className:"productInfo__category",children:Object(x.jsx)(b.a,{control:n,name:"category",render:function(e){var t=e.field;return Object(x.jsx)(Fc,{disableClearable:!0,onChange:function(e,t){V(t._id),s("category",t._id,{shouldValidate:!0})},id:"categories",options:A,getOptionLabel:function(e){return e.name.toUpperCase()},renderInput:function(e){var n;return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)(Object(u.a)({},e),{},{label:"Categories *",variant:"outlined",fullWidth:!0},t),{},{margin:"normal",error:!!l.category,helperText:null===l||void 0===l||null===(n=l.category)||void 0===n?void 0:n.message}))}},je)}})}),Object(x.jsx)("div",{className:"productInfo__subCategory",children:Object(x.jsx)(b.a,{control:n,name:"subCategory",render:function(e){var t=e.field;return Object(x.jsx)(Fc,{disableClearable:!0,onChange:function(e,n){t.onChange(n._id)},id:"subCategories",options:R,getOptionLabel:function(e){return e.name.toUpperCase()},renderInput:function(e){var n;return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)(Object(u.a)({},t),e),{},{label:"Subcategories *",variant:"outlined",fullWidth:!0,margin:"normal",error:!!l.subCategory,helperText:null===l||void 0===l||null===(n=l.subCategory)||void 0===n?void 0:n.message}))}},xe)}})}),Object(x.jsx)(_,{name:"price",label:"Price *",step:.1,adornment:!0}),Object(x.jsx)(_,{name:"quantity",type:"number",label:"Quantity *"}),Object(x.jsxs)("div",{className:"productInfo__size__discount",children:[Object(x.jsxs)("div",{className:"productInfo__size__discount__input ".concat(q.current.length>4?"disabled":""),children:[Object(x.jsx)("span",{onClick:function(){return _e(q,J,"size",K)},children:"Add size"}),Object(x.jsx)("input",{disabled:q.current.length>4,value:J,type:"number",step:.01,onChange:function(e){e.target.value>=0&&K(e.target.value)}})]}),Object(x.jsx)("div",{className:"productInfo__size__discount__tags",children:q.current.sort((function(e,t){return e-t})).map((function(e,t){return Object(x.jsxs)("div",{onClick:function(){q.current=q.current.filter((function(t){return t!==e})),s("size",q.current),K([])},className:"btn tag-btn",children:[Object(x.jsxs)("span",{children:[e,"g"]}),Object(x.jsx)("span",{children:"X"})]},t)}))})]}),Object(x.jsxs)("div",{className:"productInfo__size__discount",children:[Object(x.jsx)("div",{className:"productInfo__size__discount__tags",children:Z.current.sort((function(e,t){return e-t})).map((function(e,t){return Object(x.jsxs)("div",{onClick:function(){0!==e&&(Z.current=Z.current.filter((function(t){return t!==e})),s("discount",Z.current),te([]))},className:"btn tag-btn",children:[0===e?Object(x.jsx)("p",{children:e}):Object(x.jsxs)("span",{children:[e,"%"]}),0===e?"":Object(x.jsx)("span",{children:"X"})]},t)}))}),Object(x.jsxs)("div",{className:"productInfo__size__discount__input ".concat(Z.current.length>2?"disabled":""),children:[Object(x.jsx)("span",{onClick:function(){return _e(Z,ee,"discount",te)},children:"Add discount"}),Object(x.jsx)("input",{disabled:Z.current.length>2,value:ee,type:"number",step:.01,onChange:function(e){e.target.value>=0&&te(e.target.value)}})]})]})]}),Object(x.jsxs)("div",{className:"productDetails",children:[Object(x.jsxs)("div",{className:"potency",children:[Object(x.jsxs)("div",{className:"potency__header",children:["Potency:"," ",Object(x.jsx)("strong",{style:{color:En(z)},children:z.toUpperCase()})]}),Object(x.jsxs)("div",{className:"potency__content",children:[Object(x.jsx)(_n,{type:"thc_content",step:.1,min:0,max:100,setPote:H}),Object(x.jsx)(_n,{type:"cbd_content",step:.1,min:0,max:100,setPote:H})]})]}),Object(x.jsx)(_,{name:"producer",label:"Producer"}),Object(x.jsx)(_,{name:"brand",label:"Brand"}),Object(x.jsx)(Fc,{multiple:!0,id:"productDetails",options:us,onChange:function(e,t){se(t)},getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,renderInput:function(e){return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)({variant:"filled",margin:"normal"},e),{},{label:"Select to provide more details",placeholder:""}))}},pe),ae&&ae.length>0&&ae.sort((function(e,t){return e-t})).map((function(e){var t;return Object(x.jsx)("div",{children:Object(x.jsx)(_,{shouldUnregister:!0,name:"details.".concat(e.code),label:e.name,error:!!l[e.code],helperText:null===(t=l[e.code])||void 0===t?void 0:t.message})},e.code)}))]}),Object(x.jsxs)("div",{className:"submitBar",children:[Object(x.jsx)("button",{type:"button",onClick:function(){ye(!0)},className:"btn primary-btn",children:"Reset"}),Object(x.jsx)("button",{disabled:!j,type:"submit",className:"btn primary-btn ".concat(j?"":"disabled"),children:"Create"})]})]})}))})})},hs=(n(935),function(){var e=Object(c.useContext)(Mn),t=Object(c.useContext)(Pn),n=Object(o.a)(t,2),a=n[0],s=n[1],i=Object(c.useContext)(Dn),r=Object(c.useContext)(Ln),l=Object(o.a)(r,2),d=l[0],u=l[1],j=Object(c.useContext)(Rn),b=Object(o.a)(j,2),m=b[0],h=b[1],p=Object(c.useState)([]),O=Object(o.a)(p,2),f=O[0],v=O[1],g=Object(c.useState)(),_=Object(o.a)(g,2),y=_[0],N=_[1],C=Object(c.useState)(1),k=Object(o.a)(C,2),w=k[0],S=k[1];return Object(c.useEffect)((function(){a||On(w).then((function(e){v(e.data.products),N(e.data.totalProducts)}))}),[a,w]),Object(c.useEffect)((function(){var e;d&&m&&(e=m._id,B.delete("/product/".concat(e))).then((function(){return On().then((function(e){v(e.data.products),u(!1)}))}))}),[d,m,u]),Object(x.jsxs)("div",{className:"productList",children:[Object(x.jsx)("div",{className:"search"}),Object(x.jsx)("div",{className:"productList__data",children:Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Photo"}),Object(x.jsx)("th",{children:"Title"}),Object(x.jsx)("th",{children:"Category"}),Object(x.jsx)("th",{children:"Subcateogry"}),Object(x.jsx)("th",{children:"Potency"}),Object(x.jsx)("th",{children:"Price"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{children:"Sold"}),Object(x.jsx)("th",{children:"Average Rating"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:f&&f.length>0&&f.map((function(t){var n,c,a,r;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("img",{src:null===(n=t.images[0])||void 0===n?void 0:n.url,alt:""})}),Object(x.jsx)("td",{children:t.title}),Object(x.jsx)("td",{children:null===(c=t.category)||void 0===c?void 0:c.name}),Object(x.jsx)("td",{children:null===(a=t.subCategory)||void 0===a?void 0:a.name}),Object(x.jsx)("td",{children:null===(r=t.details)||void 0===r?void 0:r.potency}),Object(x.jsxs)("td",{children:["$",null===t||void 0===t?void 0:t.price]}),Object(x.jsx)("td",{children:null===t||void 0===t?void 0:t.quantity}),Object(x.jsx)("td",{children:t.sold}),Object(x.jsx)("td",{children:Object(x.jsx)(Nt.a,{name:"half-rating-read",defaultValue:null===t||void 0===t?void 0:t.avgRating,precision:.5,readOnly:!0})}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{onClick:function(){e("openEdit"),s(!0),h(t)},className:"btn",children:"Edit"}),Object(x.jsx)("button",{onClick:function(){e("openDialog"),i("deleteProduct"),h(t)},className:"btn",children:"Delete"})]})]},t._id)}))}),Object(x.jsx)("tfoot",{children:Object(x.jsx)(Tc.a,{count:Math.ceil(y/10),variant:"outlined",shape:"rounded",onChange:function(e,t){return S(t)}})})]})})]})}),ps=n(1010),Os=n(37),fs=Os.withStyles,vs=Os.Chip,xs=fs({root:{"&.MuiChip-colorPrimary":{backgroundColor:"#9ac587;"},"&.MuiChip-colorSecondary":{backgroundColor:"#dc3545"}}})(vs),gs=n(550),_s=n.n(gs),ys=(n(936),Object(Rt.a)({root:{color:"red"}})),Ns=function(){var e=ys(),t=Object(c.useContext)(Mn),n=Object(c.useContext)(Dn),a=Object(c.useContext)(Ln),s=Object(o.a)(a,2),i=s[0],r=s[1],l=Object(c.useState)(),j=Object(o.a)(l,2),m=j[0],h=j[1],p=Object(b.f)({defaultValues:{startDate:new Date,endDate:new Date}});console.log(i);var O=p.handleSubmit,f=p.control,v=p.reset,g=p.getValues,y=p.formState.isSubmitSuccessful,C=Object(c.useState)([]),k=Object(o.a)(C,2),w=k[0],S=k[1];function T(){return(T=Object(I.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vc(t);case 3:n=e.sent,d.b.success(n.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){var e=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wc();case 2:t=e.sent,S(t.data.coupons);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[S,i]),Object(c.useEffect)((function(){y&&(v({startDate:new Date,endDate:new Date,name:"",discount:""}),function(){var e=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wc();case 2:t=e.sent,S(t.data.coupons);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}),[v,p.formState,y]),Object(c.useEffect)((function(){i&&(!function(e){B.delete("/coupon/".concat(e))}(m),function(){var e=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wc();case 2:t=e.sent,S(t.data.coupons);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}),[i,m]),Object(x.jsxs)("div",{className:"createCoupon",children:[Object(x.jsx)("div",{className:"createCoupon__form",children:Object(x.jsx)(b.b,Object(u.a)(Object(u.a)({},p),{},{children:Object(x.jsx)(N,{onSubmit:O((function(e){return T.apply(this,arguments)})),children:Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_,{name:"name",label:"Coupon Name",defaultValue:g("name")}),Object(x.jsx)(_,{name:"discount",label:"Discount (%)",defaultValue:g("discount")}),Object(x.jsx)(b.a,{name:"startDate",control:f,render:function(e){var t=e.field;return Object(x.jsx)(ps.a,Object(u.a)(Object(u.a)({},t),{},{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"startDate",label:"Start Date",KeyboardButtonProps:{"aria-label":"change date"}}))}}),Object(x.jsx)(b.a,{name:"endDate",control:f,render:function(e){var t=e.field;return Object(x.jsx)(ps.a,Object(u.a)(Object(u.a)({},t),{},{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"endDate",label:"End Date",KeyboardButtonProps:{"aria-label":"change date"}}))}}),Object(x.jsx)("div",{className:"createBtn",children:Object(x.jsx)("button",{className:"btn primary-btn",children:"Creates"})})]})})}))}),Object(x.jsx)("div",{className:"createCoupon__list",children:Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Discount"}),Object(x.jsx)("th",{children:"Start Date"}),Object(x.jsx)("th",{children:"Exp Date"}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:w&&w.length>0&&w.map((function(c){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:c.name}),Object(x.jsxs)("td",{children:[c.discount,"%"]}),Object(x.jsx)("td",{children:new Date(c.startDate).toLocaleString("vi-VI")}),Object(x.jsx)("td",{children:new Date(c.endDate).toLocaleString("vi-VI")}),Object(x.jsx)("td",{children:Date.now()-new Date(c.endDate)<0?Object(x.jsx)(xs,{label:"Active",color:"primary"}):Object(x.jsx)(xs,{label:"Expired",color:"secondary"})}),Object(x.jsx)("td",{children:Object(x.jsx)(aa.a,{onClick:function(){t("openDialog"),n("deleteCoupon"),r(!1),h(c._id)},clickable:"true","aria-label":"delete",children:Object(x.jsx)(_s.a,{className:e.root})})})]},c.startDate)}))})]})})]})},Cs=n(124),ks=n.n(Cs),ws=n(553),Ss=n.n(ws),Ts=n(552),Es=n.n(Ts),As=n(1008),Is=(0,n(37).withStyles)({root:{alignItems:"center",height:"4rem","&>.MuiAvatar-root:last-child":{transform:"translate(-5px,-8px)",fontSize:"10px"},"&>.MuiAvatar-root:first-child":{transform:"translate(0px, 8px)",border:"2px solid #fff"}}})(As.a),Ms=n(551),Ps=n.n(Ms),Rs=(n(521),n(94)),Ds=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")},Ls=function(e){var t=e.textContent;return Object(x.jsx)("div",{className:"welcomeScreen",children:Object(x.jsx)("div",{children:t})})},Fs=function(e,t,n){if(!(!Object.keys(e||{}).length>0)&&e.text){var c,a=e.text.replace("userName",e.sender===t._id?"You":e.senderName),s=Object(re.a)(n);try{for(s.s();!(c=s.n()).done;){var i=c.value;if(a.includes(i._id)){if(e.contentType.endsWith("changeNickName"))return i._id===t._id?a.replace(i._id,"your"):e.sender===i._id&&t._id!==e.sender?a.replace(i._id,"their own"):a.replace(i._id,"".concat((null===i||void 0===i?void 0:i.name)||"someone","'s"));if(e.contentType.endsWith("adminActions"))return i._id===t._id&&i._id===e.sender?a.replace(i._id,"yourself"):i._id===t._id&&i._id!==e.sender?a.replace(i._id,"you"):e.sender===i._id&&t._id!==e.sender?a.replace(i._id,"themself"):a.replace(i._id,"".concat((null===i||void 0===i?void 0:i.name)||"someone"))}if(a.includes(t.name))return a.replace(t.name,"you")}}catch(r){s.e(r)}finally{s.f()}return a}},Bs=Object(c.forwardRef)((function(e,t){var n=e.setMobileActivePanel,a=e.mobileActivePanel,s=e.activePanel,i=e.setActivePanel,r=e.handleOpen,l=Xe(),d=l.setActiveConversation,j=l.conversations,b=l.updateConversationList,m=l.rearrangeConversationList,h=l.activeConversation,p=se().user,O=Object(c.useState)(""),f=Object(o.a)(O,2),v=f[0],g=f[1],_=Object(c.useState)([]),y=Object(o.a)(_,2),N=y[0],C=y[1],k=Object(c.useCallback)((function(){window.innerWidth<=768?n({left:!1,main:!0,right:!1}):i({right:!1,left:!0,main:!0})}),[n,i]),w=function(e,t){t&&e.conversationCreator!==p._id||(k(),d({id:e._id,otherEnd:"OneOne"===e.conversationType?e.members.find((function(e){return e._id!==p._id})):{},conversationType:e.conversationType,animation:{class:""},conversationTheme:e.conversationTheme,defaultEmoji:e.defaultEmoji,pinnedMessage:e.pinnedMessage,inputMode:"normal",lastSeenMessage:e.lastSeenMessage||{},conversationCreator:e.conversationCreator,members:e.members,block:e.block,conversationName:e.conversationName,conversationPhoto:e.conversationPhoto,conversationAdmins:e.conversationAdmins,memberNickNames:e.memberNickNames}),t?Ho.emit("joinConversation",{conversationId:e._id,userId:p._id}):Ho.emit("joinConversationAndReadMessages",e._id,p._id))};function S(){return(S=Object(I.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rc();case 2:t=e.sent,C(t.data.users);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=setTimeout((function(){v.length>1&&function(e){return B.get("/users/search/".concat(e))}(v).then((function(e){return C(e.data.users)}))}),500);return v||function(){S.apply(this,arguments)}(),function(){return clearTimeout(e)}}),[v]),Object(c.useEffect)((function(){Ho.off("conversationAlreadyExists").on("conversationAlreadyExists",(function(e){var t=e.conversation;g(""),w(t)})),Ho.off("newConversation").on("newConversation",(function(e,t){g(""),w(e,!0),b(Object(u.a)(Object(u.a)({},e),{},{messages:[t]})),m()}))}),[d,k,b,p._id,m]);var T=Ds("chat__left",a.left&&"active-mobile",!s.left&&"hideSidebar");return Object(x.jsxs)("div",{className:T,children:[Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"account-search",children:Object(x.jsx)("div",{className:"account-search__account",children:Object(x.jsxs)("div",{className:"stack",style:{justifyContent:s.left?"space-between":"center"},children:[s.left&&Object(x.jsxs)("div",{className:"account-search__search",children:[Object(x.jsxs)("div",{className:"searchField",children:[Object(x.jsx)("input",{ref:t,placeholder:"Search Contacts...",type:"text",value:v,onChange:function(e){return g(e.target.value)}}),v&&Object(x.jsx)("div",{onClick:function(){return g("")},className:"cancelSearch",children:Object(x.jsx)(Ps.a,{})})]}),Object(x.jsx)("div",{onClick:function(){return r({newMessage:!0})},className:"newMessage",children:Object(x.jsx)(Es.a,{})})," ",Object(x.jsx)("div",{onClick:function(){return r({accountSettings:!0})},className:"accountSettings",children:Object(x.jsx)(za.a,{})})]}),h.id&&Object(x.jsxs)(x.Fragment,{children:[!s.left&&Object(x.jsx)("div",{onClick:function(){i(Object(u.a)(Object(u.a)({},s),{},{left:!0}))},className:"showIcon",children:Object(x.jsx)(Ss.a,{})}),s.left&&!v&&Object(x.jsx)("div",{onClick:function(){i(Object(u.a)(Object(u.a)({},s),{},{left:!1}))},className:"hideIcon",children:Object(x.jsx)(ks.a,{})})]})]})})})}),v.length?Object(x.jsx)("div",{className:"searchResults",children:N.map((function(e){return Object(x.jsxs)("div",{onClick:function(){Ho.emit("startOneOneConversation",{user:p,otherEnd:e})},className:"stack",children:[Object(x.jsx)("div",{className:"userAvatar",children:Object(x.jsx)("img",{src:e.photo.url,alt:""})}),Object(x.jsxs)("div",{className:"userInfo",children:[Object(x.jsx)("p",{children:e.name})," ",Object(x.jsx)("p",{children:Object(Rs.a)(e.lastActivity)})]})]},e._id)}))}):Object(x.jsx)(x.Fragment,{children:j.length>0?Object(x.jsx)("div",{className:"contacts",children:j.map((function(e){var t,n,c,i,r,o,l,d,u,j,b=Ds("stack",e._id===h.id&&s.left&&"activeConversation"),m={justifyContent:a?"space-between":"center",fontWeight:e.unread?"bolder":"normal"};return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{onClick:function(){!function(e){h.id!==e._id&&w(e)}(e)},className:b,style:m,children:["OneOne"===e.conversationType?Object(x.jsx)("div",{className:"user-avatar",children:Object(x.jsx)("img",{src:null===(t=e.otherEnd)||void 0===t?void 0:t.photo.url,alt:""})}):Object(x.jsx)("div",{className:"user-avatars",children:e.conversationPhoto?Object(x.jsx)("img",{width:60,height:60,src:e.conversationPhoto.url,alt:""}):Object(x.jsx)(Is,{max:2,children:e.members.map((function(e){return Object(x.jsx)(Ha.a,{alt:e.name,src:e.photo.url},e._id)}))})}),s.left&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"user-message",children:Object.keys(e.latestMessage||{}).length>0&&Object(x.jsxs)(x.Fragment,{children:["OneOne"===e.conversationType&&Object(x.jsx)("div",{children:(null===(n=e.latestMessage)||void 0===n?void 0:n.senderName)===p.name?"You:":"".concat(null===(c=e.latestMessage)||void 0===c?void 0:c.senderName,":")}),"Group"===e.conversationType&&Object(x.jsx)("div",{children:e.conversationName||e.members.map((function(t,n){return n===e.members.length-1?t.name:t.name+", "}))}),Object(x.jsxs)("div",{children:[(null===(i=e.latestMessage)||void 0===i?void 0:i.contentType.endsWith("plainText"))?Object(x.jsxs)(x.Fragment,{children:[(null===e||void 0===e||null===(r=e.latestMessage)||void 0===r?void 0:r.senderName)===p.name?"You":null===e||void 0===e||null===(o=e.latestMessage)||void 0===o?void 0:o.senderName,": "]}):"",(null===(l=e.latestMessage)||void 0===l||null===(d=l.contentType)||void 0===d?void 0:d.endsWith("plainText"))?null===(u=e.latestMessage)||void 0===u?void 0:u.text:Fs(e.latestMessage,p,e.members)]})]})}),Object(x.jsx)("div",{className:"user-messageTime",children:Object(Rs.a)(null===e||void 0===e||null===(j=e.latestMessage)||void 0===j?void 0:j.createdAt,"vi_VN")})]})]})},e._id)}))}):Object(x.jsx)(Ls,{textContent:"You don't have any conversations"})})]})})),Us=(n(937),function(){var e,t=Xe().activeConversation;return Object(x.jsx)("div",{id:"hearts-alpaca",className:Ds("hearts",(null===t||void 0===t||null===(e=t.animation)||void 0===e?void 0:e.class)?null===t||void 0===t?void 0:t.animation.class:""),children:Object(j.a)(Array(8).keys()).map((function(e){return Object(x.jsx)("div",{style:{fontSize:"".concat(5*Math.random(),"rem")},className:"shake-it-heart",children:t.defaultEmoji},e)}))})}),Vs=[{name:"Default",backgroundImage:"none",themeColor:"#559157",lColor:"#123",emoji:"\ud83d\udc4d"},{name:"Dark",backgroundImage:"none",background:"#1f1e1c",mBackground:"#111",themeColor:"#111",secondaryColor:"#fff",reactedByBackGround:"#111",reactionBackground:"#111",contrastingColor:"#fff",reactedByBorder:"1px solid #fff",emoji:"\ud83e\udd21",class:"clicky",mContainer:"btnLike"},{name:"Glowing in darkness",backgroundImage:"none",background:"#1f1e1c",mBackground:"#111",themeColor:"linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000)",secondaryColor:"#fff",emoji:"\ud83d\ude08",class:"glow"},{name:"Mysterious",backgroundImage:"https://www.desktopbackground.org/p/2015/04/29/940436_paintings-hippie-lsd-stoned_1000x792_h.jpg",themeColor:"rgb(255, ".concat(255*Math.random(),", 178)"),secondaryColor:"#fff",backgroundSize:"contain",emoji:"\ud83d\udc7d"},{name:"Trump",backgroundImage:"none",themeColor:"#FF6700",secondaryColor:"#fff",mBackground:"#FF6700",class:"clicky",emoji:"\ud83c\udf15",mContainer:"btnLike"},{name:"SnowyDay",backgroundImage:"none",themeColor:"lightskyblue",mBackground:"lightskyblue",secondaryColor:"#035fad",emoji:"\u2744\ufe0f"},{name:"Gay",backgroundImage:"https://wallpaper.dog/large/10697297.jpg",themeColor:"#6f42c1",secondaryColor:"#f4c7ff",emoji:"\ud83d\udc96"},{name:"Hot",backgroundImage:"https://p4.wallpaperbetter.com/wallpaper/810/214/386/surreal-abstract-drugs-lsd-wallpaper-preview.jpg",themeColor:"#dc3545",secondaryColor:"#b32d00",backgroundColor:"",emoji:"\ud83d\udd25"},{name:"KillMe",backgroundImage:"none",themeColor:"#198754",secondaryColor:"#20c997",emoji:"\ud83d\udc7b"},{name:"Romantic",backgroundImage:"none",themeColor:"lightPink",secondaryColor:"#fff",mBackground:"#ffb7d5",msFont:"400 1rem cookie, cursive",lFont:"900 10px cookie, cursive",emoji:"\ud83d\udc97"},{name:"Hehe",backgroundImage:"none",themeColor:"linear-gradient(rgb(255, 143, 178) 0%, rgb(167, 151, 255) 50%,rgb(0, 229, 255) 100%)",secondaryColor:"#fff",mBackground:"#111",msFont:"400 1rem cookie, cursive",lFont:"900 10px cookie, cursive",gradient:!0,class:"hehe",emoji:"\ud83d\udca5"},{name:"Insta",backgroundImage:"none",themeColor:"linear-gradient(to right, #fcb045, #fd1d1d, #833ab4)",secondaryColor:"#fff",mBackground:"#111",msFont:"400 1rem Bradley Hand, cookie",lFont:"900 10px Bradley Hand, cookie",reactedByBackGround:"linear-gradient(to right, #fcb045, #fd1d1d, #833ab4)",reactionBackground:"#111",contrastingColor:"#fff",gradient:!0,class:"insta",emoji:"\ud83d\udcf7"},{name:"Atlas",backgroundImage:"none",themeColor:"linear-gradient(to right, #4bc0c8, #c779d0, #feac5e)",secondaryColor:"#fff",mBackground:"#111",msFont:"400 1rem cookie, cursive",lFont:"900 10px cookie, cursive",gradient:!0,class:"atlas",emoji:"\ud83d\udda4"},{name:"Twitch",backgroundImage:"none",themeColor:"linear-gradient(to left, #2a0845, #6441a5)",secondaryColor:"#fff",mBackground:"#111",msFont:"400 1rem cookie, cursive",lFont:"900 10px cookie, cursive",gradient:!0,class:"twitch",emoji:"\ud83c\udf83"},{name:"Hornymoon",backgroundImage:"none",themeColor:"linear-gradient(to left, #00223e, #ffa17f)",secondaryColor:"#fff",mBackground:"#111",msFont:"400 1rem cookie, cursive",lFont:"900 10px cookie, cursive",gradient:!0,class:"hornymoon",emoji:"\ud83c\udf15"},{name:"NeonFreak",backgroundImage:"none",themeColor:"linear-gradient(to left, #0b8793, #360033)",secondaryColor:"#fff",mBackground:"#111",msFont:"400 1rem cookie, cursive",lFont:"900 10px cookie, cursive",gradient:!0,class:"neonfreak",emoji:"\u2728"}],Ws=function(e){var t,n=e.message,c=e.user,a=Xe().activeConversation;return Object(x.jsx)("div",{className:"seens",children:n.sender===c._id&&(null===(t=n.seenByIds)||void 0===t?void 0:t.length)>0&&n.seenByIds.map((function(e,t){var s,i={backgroundSize:"cover",width:"15px",height:"15px",backgroundImage:"url(".concat(null===(s=a.members.find((function(t){return t._id===e})))||void 0===s?void 0:s.photo.url,")"),borderRadius:"50%"},r=Ds("seenBy","Group"===a.conversationType&&"group");return c._id!==e&&a.lastSeenMessage&&n._id===a.lastSeenMessage[e]?Object(x.jsx)("span",{style:i,className:r},e+t):""}))})},Gs=function(e){var t=e.message,n=e.ls,c=se().user,a=Xe().activeConversation;return Object(x.jsx)("span",{style:a.theme?n:{},children:Fs(t,c,a.members)})},zs=function(e){var t,n=e.message,c=e.chatThemes,a=e.ls,s=(Xe.activeConversation||{}).conversationTheme,i=se().user,r={display:"inline-block",width:"1.2rem",height:"1.2rem",borderRadius:"50%",background:null===(t=c.find((function(e){return e.name===n.text.slice(n.text.indexOf("to")+3)})))||void 0===t?void 0:t.themeColor};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{style:s?a:{},children:Object(x.jsx)("span",{children:function(){var e=n.text.replace("userName",n.sender===i._id?"You":n.senderName);return n.contentType.endsWith("addMembers")&&e.includes(i.name)?e.replace(i.name,"you"):e}()})}),!n.text.includes("emoji")&&n.contentType.endsWith("changeTheme")&&Object(x.jsx)("span",{className:"themeCircle",style:r})]})},Hs=function(e){var t=e.message,n=e.ls,c=Xe().activeConversation;return Object(x.jsx)("span",{className:"chat-time-stamp",style:c.conversationTheme?n:{},children:Object(Rs.a)(t.createdAt).includes("just now")||Object(Rs.a)(t.createdAt).includes("second")?Object(Rs.a)(t.createdAt):new Date(t.createdAt).toLocaleString("vi-VN")})},qs=function(e){var t=e.message,n=e.chatThemes,c=e.ls,a=se().user;return Object(x.jsxs)("div",{className:"announcement",children:[Object(x.jsx)("div",{className:"leftSide"}),Object(x.jsx)("div",{className:"center",children:t.contentType.endsWith("changeNickName")||t.contentType.endsWith("adminActions")?Object(x.jsx)(Gs,{chatThemes:n,message:t,ls:c}):t.contentType.endsWith("timeStamp")?Object(x.jsx)(Hs,{chatThemes:n,message:t,ls:c}):Object(x.jsx)(zs,{chatThemes:n,message:t,ls:c})}),Object(x.jsx)(Ws,{message:t,user:a})]},t._id)},Ys=function(e){var t=e.message,n=Xe().activeConversation,c={fontSize:t.text!==n.defaultEmoji?"1rem":"".concat(t.cssProperty?"".concat(t.cssProperty.scale,"px"):"1rem"," "),display:"block",padding:"".concat(t.cssProperty&&t.text===n.defaultEmoji?"0":"1rem")};return Object(x.jsx)("span",{style:c,children:t.text.startsWith("http")||t.text.startsWith("www")?Object(x.jsx)("a",{href:t.text,children:t.text}):t.text})},$s=n(202),Js=(n(522),n(555)),Ks=n.n(Js),Zs=function(e){var t=e.message.attachments,n=1===t.length,c=t&&t.length>0;return Object(x.jsx)(x.Fragment,{children:n?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)($s.a,{zoomMargin:100,children:Object(x.jsx)("img",{loading:"lazy",className:"user-upload-image",src:t[0].url,alt:t[0].public_id})}),Object(x.jsx)("div",{className:"downloadImg",children:Object(x.jsx)("a",{href:t[0].url,download:!0,children:Object(x.jsx)(Ks.a,{})})})]}):Object(x.jsx)("picture",{className:"imgGrid",children:c&&t.map((function(e){return Object(x.jsx)($s.a,{zoomMargin:100,children:Object(x.jsx)("img",{loading:"lazy",className:"user-upload-image",src:e.url,alt:""})},e.public_id)}))})})},Qs=n(556),Xs=n(7),ei=Object(Xs.a)({})(yt.a),ti=n(560),ni=n.n(ti),ci=n(559),ai=n.n(ci),si=n(561),ii=n.n(si),ri=n(562),oi=n.n(ri),li=n(558),di=n.n(li),ui=n(557),ji=n.n(ui),bi=n(344),mi=n.n(bi),hi=function(e,t){var n=new Audio({boom:"https://www.myinstants.com/media/sounds/vine-boom.mp3",bruh:"https://www.myinstants.com/media/sounds/movie_1.mp3",fbi:"https://www.myinstants.com/media/sounds/fbi-open-up_dwLhIFf.mp3",piupiu:"/sounds/piupiu.mp3",grow:"https://cdn.fbsbx.com/v/t59.3654-21/253560320_605880787114465_5046334062042002010_n.mp4/audioclip-1636391727000-2848.mp4?_nc_cat=105&ccb=1-5&_nc_sid=7272a8&_nc_ohc=00QHiIDI6J8AX-NWpm0&_nc_ht=cdn.fbsbx.com&oh=f9fc223f8747c07197f56dcd2f024c45&oe=618ACE99&dl=1",cancel:"/sounds/piupiu.mp3",typing:"/sounds/typing.mp3",sendMessage:"/sounds/sendMessage.ogg",newMessage:"/sounds/newMessage.mp3",emojiSelection:"/sounds/selection.mp3"}[e]);return t&&n.play(),n},pi=[{name:"heart",emoji:"\u2764\ufe0f",src:"https://static.xx.fbcdn.net/images/emoji.php/v9/t72/1/32/2764.png"},{name:"haha",emoji:"\ud83d\ude06",src:"https://static.xx.fbcdn.net/images/emoji.php/v9/t8e/1/32/1f606.png"},{name:"wow",emoji:"\ud83d\ude2e",src:"https://static.xx.fbcdn.net/images/emoji.php/v9/t7b/1/32/1f62e.png"},{name:"sad",emoji:"\ud83d\ude22",src:"https://static.xx.fbcdn.net/images/emoji.php/v9/tc8/1/32/1f622.png"},{name:"angry",emoji:"\ud83d\ude20",src:"https://static.xx.fbcdn.net/images/emoji.php/v9/tc6/1/32/1f620.png"},{name:"like",emoji:"\ud83d\udc4d",src:"https://static.xx.fbcdn.net/images/emoji.php/v9/tb6/1/32/1f44d.png"}],Oi=function(e){var t,n,a,s,i,r,o,l,b=e.ms,m=e.message,h=e.ls,p=e.handleOpen,O=Xe(),f=O.messageToReply,v=O.setForwardMessage,g=O.activeConversation,_=g.conversationTheme,y=se().user,N=m.sender,C=m.replyingTo,k=m.reactions&&m.reactions.length>0,w=g.memberNickNames&&g.memberNickNames[N]?g.memberNickNames[N]:m.senderName,S=m.hideFrom&&(null===(t=m.hideFrom)||void 0===t?void 0:t.find((function(e){return e===y._id}))),T=(null===(n=m.reactions)||void 0===n?void 0:n.length)>0?Object(j.a)(new Set(m.reactions.map((function(e){return JSON.stringify({emoji:e.emoji,emojiName:e.emojiName})})))).map((function(e){return JSON.parse(e)})).map((function(e,t){return Object(x.jsx)("span",{children:e.emoji},t)})):"";function E(){return(null===C||void 0===C?void 0:C.sender)===y._id?N===y._id?"yourself":"you":N===C.sender?"themself":C.senderName}var A=Object(c.useCallback)((function(){"Dark"===(null===_||void 0===_?void 0:_.name)&&Object(Qs.a)({particleCount:45,spread:60,origin:{y:.7}})}),[null===_||void 0===_?void 0:_.name]),I={color:null===_||void 0===_?void 0:_.secondaryColor,background:null===_||void 0===_?void 0:_.reactionBackground},M=Ds("messageContainer",N===y._id&&"ownMessage",C&&"hasReply",(null===C||void 0===C||null===(a=C.text)||void 0===a?void 0:a.length)>50&&"largeReplyContent",(null===_||void 0===_?void 0:_.mContainer)&&(null===_||void 0===_?void 0:_.mContainer),k&&"hasReact"),P=Ds("repliedMessage",(null===C||void 0===C||null===(s=C.text)||void 0===s?void 0:s.length)>50&&"largeContent",(null===C||void 0===C||null===(i=C.text)||void 0===i?void 0:i.length)<5&&"smallContent","Group"===g.conversationType&&"group"),R=Ds("messageContent",_&&m.text!==g.defaultEmoji&&m.contentType.endsWith("plainText")&&_.class,m.isRemoved&&"removed"),D=Ds("reactEmoji",m.text.length>20&&"largeContent",m.text.length<8&&"smallContent"),L=_?Object(u.a)(Object(u.a)({},b),{},{background:m.text===g.defaultEmoji||m.text.codePointAt(0).toString(16).startsWith("1f")||m.text.codePointAt(0).toString(16).startsWith("27")||!m.contentType.endsWith("plainText")?"transparent":b.background,padding:"".concat(m.cssProperty&&m.text===g.defaultEmoji?"1rem 1.5rem":"0rem")}):{};return S?"":Object(x.jsxs)("div",{className:M,children:[C&&!m.isRemoved&&Object(x.jsxs)("div",{className:P,children:[Object(x.jsxs)("div",{className:"referencing",children:[Object(x.jsx)(mi.a,{}),Object(x.jsxs)("i",{children:["Replied to"," ",E().length>15?"".concat(E().substring(0,15),"..."):E()]})]}),Object(x.jsx)("p",{children:Object(x.jsx)("i",{children:C.text.length>60?"".concat(C.text.substring(0,60),"..."):C.text})})]}),Object(x.jsxs)("div",{className:"outerContainer",children:[(!g.block||!Object.values(g.block).some(Boolean))&&!m.isRemoved&&Object(x.jsxs)("div",{className:"messageActions",children:[Object(x.jsxs)("div",{className:"moreActions",children:[Object(x.jsx)(ji.a,{}),Object(x.jsxs)("ul",{className:"actions",children:[m.contentType.endsWith("plainText")&&Object(x.jsx)("li",{onClick:function(){navigator.clipboard.writeText(m.text),d.b.success("Coppied to clipboard")},children:Object(x.jsx)("span",{children:"Copy"})}),m.sender===y._id&&Object(x.jsx)("li",{onClick:function(){window.confirm("After removing the message, you and others in the chat will never be able to see it again. Are you sure?")&&Ho.emit("removeMessage",m)},className:"removeMessage",children:Object(x.jsx)("span",{children:"Remove"})}),Object(x.jsx)("li",{onClick:function(){window.confirm("This action will hide the message from you only. Others in the conversation will still be able to see and interact with it. Are you sure?")&&Ho.emit("hideMessage",{message:m,hideFrom:y._id})},className:"hideMessage",children:Object(x.jsx)("span",{children:"Hide"})}),Object(x.jsx)("li",{onClick:function(){p({forwardMessage:!0}),v(m)},className:"forward",children:Object(x.jsx)("span",{onMouseEnter:function(){return hi("emojiSelection",y.userSettings.sounds)},children:"Forward"})}),Object(x.jsx)("li",{onClick:function(){if(!m.text.includes("photo")&&!m.text.includes("audio")){Ho.emit("setPinnedMessage",{conversationId:m.conversationId,message:m});var e={conversationId:m.conversationId,sender:y._id,senderPhoto:y.photo,senderName:y.name,contentType:"announcement-pinMessage",text:"userName pinned a message",recipient:g.members};Ho.emit("sendMessage",e)}},children:Object(x.jsx)("span",{onMouseEnter:function(){return hi("emojiSelection",y.userSettings.sounds)},children:"Pin"})})]})]}),Object(x.jsx)("div",{onClick:function(){return f({message:m,mode:"replying"})},className:"replyTo",children:Object(x.jsx)(ei,{title:"Reply",placement:"top",children:Object(x.jsx)(mi.a,{})})}),Object(x.jsxs)("div",{className:"react",children:[Object(x.jsx)("span",{children:Object(x.jsx)(di.a,{})}),Object(x.jsx)("ul",{className:D,children:pi.map((function(e){var t,n;return Object(x.jsx)("li",{className:Ds((null===(t=m.reactions)||void 0===t?void 0:t.length)>0&&(null===(n=m.reactions.find((function(e){return e.reactedBy._id===y._id})))||void 0===n?void 0:n.emojiName)===e.name&&"myReact"),onMouseEnter:function(){return hi("emojiSelection",y.userSettings.sounds)},onClick:function(){return function(e){hi("sendMessage",y.userSettings.sounds);var t={reactedBy:y._id,emojiName:e.name,emoji:e.emoji,conversationId:g.id,members:g.members.map((function(e){return e._id})),messageId:m._id};m.reactions.find((function(t){return t.reactedBy._id===y._id&&t.emojiName===e.name}))?Ho.emit("react-to-message",Object(u.a)(Object(u.a)({},t),{},{type:"remove"})):Ho.emit("react-to-message",Object(u.a)(Object(u.a)({},t),{},{type:"add-change"}))}(e)},children:Object(x.jsx)("img",{height:"32",width:"32",alt:e.emoji,src:e.src})},e.src)}))})]})]}),Object(x.jsxs)("div",{className:"mWrapper",children:["Group"===g.conversationType&&N!==y._id&&Object(x.jsx)("img",{src:m.senderPhoto.url,alt:m.senderName}),Object(x.jsxs)("div",{className:"message",children:[!C&&"Group"===g.conversationType&&N!==y._id&&!m.contentType.includes("forward")&&Object(x.jsx)("div",{className:"sender",children:w}),m.contentType.includes("forward")&&Object(x.jsx)("div",{className:"contentTypeIndicator",children:"forwarded"}),Object(x.jsx)(ei,{title:"".concat(Object(Rs.a)(m.updatedAt,"vi_VN")," / ").concat(Sc(m.status)),placement:N===y._id?"left":"right",children:Object(x.jsxs)("div",{onClick:function(){m.contentType.endsWith("plainText")&&"Dark"===(null===_||void 0===_?void 0:_.name)&&(A(m),hi("bruh",y.userSettings.sounds))},style:L,className:R,children:[m.contentType.endsWith("plainText")&&Object(x.jsx)(Ys,{message:m}),m.contentType.endsWith("audio")&&Object(x.jsx)("span",{className:"recordingContainer",children:Object(x.jsx)("audio",{controls:!0,src:m.attachments[0]})}),m.contentType.endsWith("photo")&&Object(x.jsx)(Zs,{ls:h,message:m})]})})," ",m.sender===y._id&&!(null===m||void 0===m||null===(r=m.seenByIds)||void 0===r?void 0:r.length)>0&&Object(x.jsxs)(x.Fragment,{children:["delivered"===m.status&&Object(x.jsxs)("span",{children:[Object(x.jsx)(ai.a,{})," "]}),("sent"===m.status||"uploaded"===m.status)&&Object(x.jsx)("span",{children:Object(x.jsx)(ni.a,{})}),"uploading"===m.status&&Object(x.jsx)("span",{children:Object(x.jsx)(ii.a,{})}),"failed"===m.status&&Object(x.jsx)("span",{className:"errorIcon",children:Object(x.jsx)(oi.a,{})})]})]}),(null===(o=m.reactions)||void 0===o?void 0:o.length)&&!m.isRemoved?Object(x.jsxs)("div",{style:_?Object(u.a)(Object(u.a)({},I),{},{border:_.reactedByBorder}):{},className:"reactions",children:[Object(x.jsxs)("div",{style:_?I:{},className:"reactedBy",children:[k&&m.reactions.map((function(e,t){return Object(x.jsx)("p",{children:e.reactedBy.name===y.name?"You":e.reactedBy.name},t)}))," "]}),Object(x.jsx)("span",{className:"reaction",children:T})," ",Object(x.jsx)("span",{children:(null===(l=m.reactions)||void 0===l?void 0:l.length)?m.reactions.length:""})]}):"",Object(x.jsx)(Ws,{user:y,message:m})]})]})]},m._id)},fi=Object(c.forwardRef)((function(e,t){var n=e.ms,c=e.ls,a=e.handleOpen,s=Xe().activeConversation,i=s.messages&&s.messages.length>0;return Object(x.jsxs)(x.Fragment,{children:[i&&s.messages.map((function(e,t){return e.contentType.includes("announcement")?Object(x.jsx)(qs,{chatThemes:Vs,message:e,ls:c}):Object(x.jsx)(Oi,{chatThemes:Vs,message:e,ms:n,ls:c,index:t,handleOpen:a})})),Object(x.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:15},className:"growEmoji",children:Object(x.jsx)("div",{ref:t,style:{zIndex:1},children:s.defaultEmoji})})]})})),vi=function(e){var t,n=e.activeConversation,a=e.ls,s=e.scrollToMessage,i=n.conversationTheme,r=Object(c.useState)({isTyping:!1}),l=Object(o.a)(r,2),d=l[0],j=l[1],b=Object(c.useRef)(),m=se().user;return Object(c.useEffect)((function(){null===s||void 0===s||s.scrollIntoView({behavior:"smooth"})}),[d.isTyping,s]),Object(c.useEffect)((function(){Ho.off("participant-action").on("participant-action",(function(e){hi("typing",m.userSettings.sounds),b.current&&clearTimeout(b.current),b.current=setTimeout((function(){j(e),setTimeout((function(){j((function(e){return Object(u.a)(Object(u.a)({},e),{},{isTyping:!1})}))}),3e3)}),100)}))})),Object(x.jsx)(x.Fragment,{children:d.isTyping&&d.conversationId===n.id&&Object(x.jsx)("div",{style:i?a:{},className:"otherEnd-actions",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("span",{children:[null===(t=n.members.find((function(e){return e._id===d.userId})))||void 0===t?void 0:t.name," is typing"]}),Object(x.jsx)("div",{className:"dotContainer",children:Object(x.jsx)("div",{className:"loadingDots"})})]})})})},xi=n(563),gi=n.n(xi);function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return!e||e.length<=t?e:"".concat(e.substr(0,t),"...")}var yi=function(e){return e.includes("\u2764\ufe0f")||!e||e.includes("h\u1eb1ng")||e.includes("H\u1eb1ng")?"shakeIt":e.includes("ng\xe3i")||e.includes("voi")||e.includes("Ng\xe3i")||e.includes("Voi")?"elephant":e.includes("n\xf9ng")?"nung":e.includes("ti\u1ebfu")?"tieu":e.includes("linh")||e.includes("Linh")?"linh":void 0},Ni=function(e,t,n,c,a,s){var i,r=n.id;window.innerWidth<=768&&t({right:!1,left:!1,main:!0}),e.name!==(null===(i=n.conversationTheme)||void 0===i?void 0:i.name)&&s.emit("updateConversationTheme",{theme:e,id:r,userId:c._id,recipient:n.members.map((function(e){return e._id}))},(function(t,i){if(200===t){var o={conversationId:r,contentType:"announcement-changeTheme",sender:c._id,senderPhoto:c.photo,senderName:c.name,recipient:n.members.map((function(e){return e._id}))};s.emit("sendMessage",Object(u.a)(Object(u.a)({},o),{},{text:"userName changed the conversation theme to ".concat(e.name)})),s.emit("sendMessage",Object(u.a)(Object(u.a)({},o),{},{text:"userName changed the default emoji to ".concat(e.emoji)}))}else a.error(i)}))},Ci=function(e,t,n,c,a,s){if(t[e._id]||!n){var i={conversationId:c.id,contentType:"announcement-changeNickName",text:n?"userName set ".concat(e._id," nickname to ").concat(t[e._id]):"userName removed ".concat(e._id," nickname"),sender:a._id,senderName:a.name,senderPhoto:a.photo,recipient:c.members.map((function(e){return e._id})),status:"sent"};s.emit("sendMessage",i),s.emit("changeNickName",{conversationId:c.id,userToChange:e,nickName:n?t[e._id]:""})}},ki=function(e,t,n,c,a,s){if(t.length>=100)return s.error("Conversation name must not exceed 100 characters");if(t&&t!==n.conversationName){var i={conversationId:n.id,contentType:"announcement-conversationName",text:e?"userName named the conversation ".concat(t):"userName removed the conversation name",sender:c._id,senderName:c.name,senderPhoto:c.photo,recipient:n.members};a.emit("sendMessage",i),a.emit("changeChatName",{conversationId:n.id,conversationName:e?t:""})}},wi=function(e,t,n,c,a,s){var i={activeConversation:{id:n.id,members:n.members},member:e,action:t,actionCreator:c};a.emit("groupActions",i,(function(e,t){200!==e&&s.error(t)}))},Si=function(e){var t,n,a=e.mobileActivePanel,s=e.growLargerRef,i=e.activePanel,r=e.handleOpen,o=Xe(),d=o.updateMessageList,u=o.setChatAnimation,j=o.updateMessages,b=o.activeConversation,m=o.updateActiveConversationTheme,h=o.updateSentMessageStatus,p=o.setUnreadMessages,O=o.updateMessageListWithSeenByIds,f=o.updateActiveConversationMemberNames,v=o.unshiftMessageList,g=o.getMore,_=o.updateMessageReaction,y=o.setPinnedMessage,N=o.messageToReply,C=o.userEnteredAndReadMessages,k=o.justOnline,w=b.conversationTheme,S=Object(l.c)((function(e){return e.user})).user,T=Object(c.useRef)(),E=Object(c.useRef)(),A=Object(c.useRef)(),I=Object(c.useRef)(0),M=Object(c.useRef)(),P=Object(c.useRef)(),R=Object(c.useRef)(),D=Object(c.useRef)(!0),L=Object(c.useRef)(),F=Object(c.useRef)(),U={background:null===w||void 0===w?void 0:w.background},V={background:null===w||void 0===w?void 0:w.mBackground,font:null===w||void 0===w?void 0:w.msFont},W={color:null===w||void 0===w?void 0:w.lColor,font:null===w||void 0===w?void 0:w.lFont};M.current=null===(t=E.current)||void 0===t?void 0:t.scrollHeight,Object(c.useEffect)((function(){var e,t={root:E.current,rootMargin:"200px",threshold:1};return L.current=new IntersectionObserver((function(e){var t,n;e[0].isIntersecting&&b.hasMore&&(I.current++,I.current>1&&(t=b.id,n=b.messages[0].createdAt,B.post("/messages/getMore",{conversationId:t,lastMessageDate:n})).then((function(e){var t;E.current.scrollTo({top:P.current-M.current}),g(e.data.messages),P.current=null===(t=E.current)||void 0===t?void 0:t.scrollHeight})))}),t),(null===(e=b.messages)||void 0===e?void 0:e.length)>0&&A.current&&b.id&&L.current.observe(A.current),function(){L.current.disconnect()}})),Object(c.useEffect)((function(){var e={root:E.current,rootMargin:"500px",threshold:.9};return F.current=new IntersectionObserver((function(e){var t,n;e[0].isIntersecting?(null===(t=R.current)||void 0===t||t.classList.remove("show"),D.current=!0):(null===(n=R.current)||void 0===n||n.classList.add("show"),D.current=!1)}),e),F.current.observe(T.current),function(){F.current.disconnect()}}),[]),Object(c.useEffect)((function(){I.current=0}),[b.id]),Object(c.useEffect)((function(){Ho.off("messageDelivered").on("messageDelivered",(function(e){h(e)})),Ho.off("messageRead").on("messageRead",(function(e){var t=e.readById,n=e.message;O({message:n,readById:t})})),Ho.off("justOnline").on("justOnline",(function(e){e.length&&k(e)})),Ho.off("unreadMessages").on("unreadMessages",(function(e){e.length&&p(e)})),Ho.off("otherEndEnteredAndReadTheMessages").on("otherEndEnteredAndReadTheMessages",(function(e){C(e)})),Ho.off("themeUpdated").on("themeUpdated",(function(e){m(e)})),Ho.off("nickNameChanged").on("nickNameChanged",(function(e){f(e)})),Ho.off("messagePinned").on("messagePinned",(function(e){e.conversationId===b.id&&y(e)})),Ho.off("messageReacted").on("messageReacted",(function(e){_(e)}))}),[u,d,b.id,j,m,b,p,f,O,h,S._id,v,_,y,k,C]),Object(c.useEffect)((function(){var e;D.current&&(null===(e=T.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[null===b||void 0===b||null===(n=b.messages)||void 0===n?void 0:n.length]);var G=Ds("chat__main__messagesContainer",w&&"glow"!==w.class&&w.class);return Object(x.jsxs)("div",{className:G,children:[b.id&&b.pinnedMessage&&Object(x.jsx)(yt.a,{placement:"bottom",title:"Click to unpin",children:Object(x.jsxs)("div",{onClick:function(){return function(e,t,n){n.emit("setPinnedMessage",{conversationId:e.id,message:null});var c={conversationId:e.id,sender:t._id,senderName:t.name,senderPhoto:t.photo,contentType:"announcement-pinMessage",text:"userName unpinned the message",recipient:e.members};n.emit("sendMessage",c)}(b,S,Ho)},className:Ds("pinnedMessage",w&&w.class),children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"messageAuthor",children:b.pinnedMessage.senderName===S.name?"You: ":b.pinnedMessage.senderName}),Object(x.jsx)("div",{className:"messageText",children:b.pinnedMessage.text})]}),Object(x.jsx)("div",{children:"Pinned Message"})]})}),b&&b.messageToReply&&Object(x.jsx)(yt.a,{title:"Click to remove",placement:"top",children:Object(x.jsxs)("div",{onClick:function(){return N({message:null,mode:"normal"})},className:"replyingTo",children:[Object(x.jsxs)("span",{children:["Replying to"," ",b.messageToReply.senderName===S.name?"yourself":b.messageToReply.senderName]}),Object(x.jsx)("div",{className:"content",children:b.messageToReply.text&&Object(x.jsx)("span",{children:b.messageToReply.text.length>50?_i(b.messageToReply.text,50):b.messageToReply.text})})]})}),a.main&&i.main&&Object(x.jsx)("span",{ref:R,onClick:function(){var e;null===(e=T.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},className:"scrollToBottom",children:Object(x.jsx)(gi.a,{})}),Object(x.jsxs)("div",{ref:E,style:w?U:{},className:"chat__main__messages",children:[b.id&&Object(x.jsx)("div",{ref:A,className:"load-more"}),Object(x.jsx)(fi,{user:S,ls:W,ms:V,ref:s,handleOpen:r}),Object(x.jsx)(Us,{}),Object(x.jsx)(vi,{scrollDown:D.current,scrollToMessage:T.current,activeConversation:b,ls:W}),Object(x.jsx)("div",{className:"scrollToHere",ref:T})]})]})},Ti=n(568),Ei=n.n(Ti),Ai=n(567),Ii=n.n(Ai),Mi=n(565),Pi=n.n(Mi),Ri=n(569),Di=n.n(Ri),Li=n(566),Fi=n.n(Li),Bi=n(564),Ui=n.n(Bi),Vi=(n(942),function(e){var t=e.cl;return Object(x.jsxs)("div",{className:"heartWrapper ".concat(t),children:[Object(x.jsx)("div",{className:"heart x1"}),Object(x.jsx)("div",{className:"heart x2"}),Object(x.jsx)("div",{className:"heart x3"}),Object(x.jsx)("div",{className:"heart x4"}),Object(x.jsx)("div",{className:"heart x5"}),Object(x.jsx)("div",{className:"altheart x6"})]})}),Wi=(n(943),function(e){var t=e.cl;return Object(x.jsxs)("div",{className:"snowflakes ".concat(t),"aria-hidden":"true",children:[Object(x.jsx)("div",{className:"snowflake",children:"\u2745"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2745"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2746"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2744"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2745"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2746"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2744"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2745"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2746"}),Object(x.jsx)("div",{className:"snowflake",children:"\u2744"})]})}),Gi=(n(944),n(598)),zi=function(e,t){return e.find((function(e){return e._id!==t}))},Hi=function(e){var t=e.grow,n=e.send,a=e.cancel,s=Object(c.useRef)(0),i=Object(c.useRef)(),r=Object(c.useState)(""),l=Object(o.a)(r,2),j=l[0],b=l[1],m=Object(c.useState)(!1),h=Object(o.a)(m,2),p=h[0],O=h[1],f=se().user,g=Object(c.useState)({start:!1,stop:!1}),_=Object(o.a)(g,2),y=_[0],N=_[1],C=Object(c.useRef)([]),k=Xe(),w=k.updateMessageList,S=k.activeConversation,T=k.updateMessageListOnFileUpload,E=k.messageToReply,M=Object(c.useRef)(),P=Object(c.useRef)(),R=S.id,D={current:document.querySelector(".emoji-mart-scroll")};function L(){return F.apply(this,arguments)}function F(){return(F=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(Object(u.a)(Object(u.a)({},y),{},{start:!0})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({audio:!0});case 4:P.current=e.sent,(i.current||C.current)&&(i.current=null,C.current=[]),i.current=new MediaRecorder(P.current),i.current.start(),console.log("start recording"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),d.b.error("No audio input found or permission not granted");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function B(){if(i.current){if("inactive"===i.current.state)return;i.current.stop(),i.current.ondataavailable=function(e){C.current.push(e.data)},i.current.onstop=function(e){P.current.getTracks().forEach((function(e){return e.stop()}));var t=new Blob(C.current,{type:"audio/ogg; codecs=opus"});C.current=[];var n=window.URL.createObjectURL(t),c={sender:f._id,senderName:f.name,senderPhoto:f.photo,attachments:[n],conversationId:R,contentType:"text-audio",text:"userName sent an audio",recipient:S.members.map((function(e){return e._id}))};Ho.emit("sendMessage",c)}}}function U(){if(i.current){if("inactive"===i.current.state)return;i.current.stop(),P.current.getTracks().forEach((function(e){return e.stop()})),i.current=null,C.current=[]}}function V(e){if(O(!1),e.preventDefault(),hi("sendMessage",f.userSettings.sounds),j.length>=500)d.b.error("Text message must not exceed 500 characters");else{var t={sender:f._id,senderName:f.name,senderPhoto:f.photo,text:j||S.defaultEmoji,conversationId:R,contentType:"text-plainText",animation:yi(j),recipient:S.members.map((function(e){return e._id})),reactions:[]};if(S.inputMode&&"normal"!==S.inputMode){if(!j)return;Ho.emit("sendMessage",Object(u.a)(Object(u.a)({},t),{},{replyingTo:S.messageToReply,contentType:"text-reply-plainText"})),E({message:null,mode:"normal"})}else{if(!j)return;Ho.emit("sendMessage",t,(function(e){200===e?console.log("message sent and saved to db"):console.log("failed")}))}b("")}}function W(){return(W=Object(I.a)(A.a.mark((function e(t){var n,c,a,i,r,o,l,d;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.current++,n=[],!t.target.files.length){e.next=28;break}c=Array.from(t.target.files).map((function(e){return{url:URL.createObjectURL(e)}})),a={sender:f._id,senderName:f.name,senderPhoto:f.photo,text:"userName sent ".concat(t.target.files.length>1?"".concat(t.target.files.length," photos"):"a photo"),conversationId:R,contentType:"text-photo",recipient:S.members.map((function(e){return e._id})),status:"uploading",attachments:c,createdAt:Date.now(),reactions:[]},w(a),i=function(e){return new Promise((function(t){rn.a.imageFileResizer(e,300,300,"JPEG",100,0,(function(e){t(e)}),"base64")}))},r=0;case 8:if(!(r<t.target.files.length)){e.next=28;break}return e.prev=9,o=t.target.files[r],e.next=13,i(o);case 13:return l=e.sent,e.next=16,bn(l);case 16:d=e.sent,n.push(d.data),n.length===t.target.files.length&&(Ho.emit("sendMessage",Object(u.a)(Object(u.a)({},a),{},{attachments:n})),T(Object(u.a)(Object(u.a)({},a),{},{attachments:n,status:"uploaded"}))),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),console.log(e.t0),T(Object(u.a)(Object(u.a)({},a),{},{status:"failed"}));case 25:r++,e.next=8;break;case 28:case"end":return e.stop()}}),e,null,[[9,21]])})))).apply(this,arguments)}if(ie(D,O),"OneOne"===S.conversationType){if(S.block&&S.block[zi(S.members,f._id)._id])return Object(x.jsx)("div",{className:"blocked",children:"You have blocked this mf"});if(S.block&&S.block[f._id])return Object(x.jsx)("div",{className:"blocked",children:"Snap! You got blocked big time"})}return Object(x.jsxs)("div",{className:"chat__main__footer",children:[Object(x.jsxs)("form",{onSubmit:V,children:[Object(x.jsxs)("div",{className:"emoji",children:[Object(x.jsx)("span",{onClick:function(){O(!p)},children:Object(x.jsx)(Ui.a,{})}),p?Object(x.jsx)(Gi.a,{style:{position:"absolute",bottom:"8%",left:"10px",zIndex:11},theme:"dark",class:"hello",emoji:"point_up",set:"facebook",onSelect:function(e){return b(j+e.native)}}):""]}),Object(x.jsxs)("div",{className:"messageInputWrapper",children:[Object(x.jsx)(v,{placeholder:"Write something...",InputProps:{disableUnderline:!0},type:"text",value:j,onChange:function(e){return b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&!e.shiftKey&&window.innerWidth>=768&&V(e),M.current&&clearTimeout(M.current),M.current=setTimeout((function(){Ho.emit("typing",{userId:f._id,isTyping:!0,conversationId:R})}),800)},onClick:function(){O(!1)}}),Object(x.jsxs)("div",{className:"iconGroup",children:[Object(x.jsxs)("span",{children:[Object(x.jsx)(Pi.a,{}),Object(x.jsx)("input",{className:"uploadPhoto",onChange:function(e){return W.apply(this,arguments)},type:"file",accept:"image/*",multiple:!0})]}),Object(x.jsx)("span",{children:Object(x.jsx)(Fi.a,{})}),Object(x.jsx)("span",{onTouchCancel:B,onTouchStart:L,onTouchEnd:B,onTouchMove:U,onMouseLeave:U,onMouseDown:L,onMouseUp:B,children:Object(x.jsx)(Ii.a,{})})]})]}),Object(x.jsx)("button",{disabled:!R,className:"sendBtn",children:j?Object(x.jsx)(Ei.a,{}):Object(x.jsx)("span",{style:{cursor:"pointer",userSelect:"none"},onMouseDown:function(){t()},onMouseUp:function(){n()},onMouseLeave:function(){a()},onTouchStart:function(){t()},onTouchEnd:function(e){e.preventDefault(),n()},children:""===S.defaultEmoji?Object(x.jsx)(Di.a,{}):S.defaultEmoji})})]}),function(){var e;switch(null===S||void 0===S||null===(e=S.conversationTheme)||void 0===e?void 0:e.name){case"Romantic":return Object(x.jsx)(Vi,{cl:"showEffect"});case"SnowyDay":return Object(x.jsx)(Wi,{cl:"showEffect"});default:return""}}()]})},qi=n(345),Yi=n.n(qi),$i=n(346),Ji=n.n($i),Ki=n(347),Zi=n.n(Ki),Qi=function(e){var t,n,c,a,s,i,r,o,l,d,j=e.mobileActivePanel,b=e.setMobileActivePanel,m=e.setActivePanel,h=e.activePanel,p=e.startCalling,O=Xe(),f=O.activeConversation,v=O.onlineUsers,g=O.setActiveConversation;function _(){window.innerWidth<=768?b({right:!0,left:!1,main:!1}):m(Object(u.a)(Object(u.a)({},h),{},{right:!h.right}))}function y(e){return!!v.find((function(t){return t.userId===e}))}var N=Ds("avatar",y(null===(t=f.otherEnd)||void 0===t?void 0:t._id)&&"circle-multiple"),C=Ds("user-status",y(null===(n=f.otherEnd)||void 0===n?void 0:n._id)&&"online"),k=f.memberNickNames&&f.memberNickNames[null===(c=f.otherEnd)||void 0===c?void 0:c._id]?f.memberNickNames[null===(a=f.otherEnd)||void 0===a?void 0:a._id]:null===(s=f.otherEnd)||void 0===s?void 0:s.name,w=Object(Rs.a)((null===(i=v.find((function(e){var t;return e.userId===(null===(t=f.otherEnd)||void 0===t?void 0:t._id)})))||void 0===i?void 0:i.lastActivity)||(null===(r=f.otherEnd)||void 0===r?void 0:r.lastActivity),"vi_VN");return Object(x.jsxs)("div",{className:"chat__main__header",children:[!j.left&&Object(x.jsx)("div",{onClick:function(){window.innerWidth<=768&&b({right:!1,left:!0,main:!1}),Ho.emit("leaveRoom",f.id),g({})},className:"showIcon-mobile",children:Object(x.jsx)(ks.a,{})}),"OneOne"===f.conversationType?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"chatInfo",children:[Object(x.jsxs)("div",{className:N,children:[Object(x.jsx)("div",{className:"circle"}),Object(x.jsx)("div",{className:"circle"}),Object(x.jsx)("img",{src:null===(o=f.otherEnd)||void 0===o||null===(l=o.photo)||void 0===l?void 0:l.url,alt:""}),Object(x.jsx)("span",{className:C})," "]}),Object(x.jsxs)("div",{className:"info",children:[Object(x.jsx)("b",{className:"name",children:k}),Object(x.jsx)("div",{className:"lastActivity",children:y(null===(d=f.otherEnd)||void 0===d?void 0:d._id)?"online":w})]})]}),Object(x.jsxs)("div",{className:"recipientActions",children:[!Object.values(f.block||{}).some(Boolean)&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)("div",{className:"phoneCall",children:Object(x.jsx)(Yi.a,{})}),Object(x.jsx)("div",{className:"videoChat",onClick:function(){return p("videoCall")},children:Object(x.jsx)(Ji.a,{})})]}),Object(x.jsx)("div",{className:"moreActions",onClick:_,children:Object(x.jsx)(Zi.a,{})})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"chatInfo",children:[f.conversationPhoto?Object(x.jsx)("img",{src:f.conversationPhoto.url,alt:""}):Object(x.jsx)(As.a,{max:5,children:f.members.map((function(e){return Object(x.jsx)(Ha.a,{alt:e.name,src:e.photo.url},e._id)}))}),"-"," ",Object(x.jsx)("div",{children:Object(x.jsx)("p",{children:f.conversationName||"Chat Name"})})]}),Object(x.jsxs)("div",{className:"recipientActions",children:[Object(x.jsx)("div",{className:"phoneCall",children:Object(x.jsx)(Yi.a,{})}),Object(x.jsx)("div",{className:"videoChat",children:Object(x.jsx)(Ji.a,{})}),Object(x.jsx)("div",{className:"moreActions",onClick:_,children:Object(x.jsx)(Zi.a,{})})]})]})]})},Xi=n(572),er=n.n(Xi),tr=n(570),nr=n.n(tr),cr=n(571),ar=n.n(cr),sr=n(573),ir=n.n(sr),rr=n(258),or=n.n(rr),lr=n(574),dr=n.n(lr),ur=n(575),jr=n.n(ur),br=n(576),mr=n.n(br),hr=function(e){var t=e.children,n=e.setCallAction,c=e.toggleSwap,a=e.isCalling,s=e.callAction,i=e.screenShot,r=e.shutdownCall,o=e.connectionMessage,l=Ds("camera-box",a&&"show",s.minimized&&"minimized");return Object(x.jsxs)(ac.a.div,{className:l,children:[Object(x.jsx)(ac.a.div,{className:"videoWrapper",children:t}),Object(x.jsxs)("div",{className:"connection-message",children:[o,"sdsds"]}),Object(x.jsxs)("div",{className:"call-actions",children:[Object(x.jsx)("button",{className:"call-actions__btns toggle-camera-btn",children:Object(x.jsx)(nr.a,{})}),Object(x.jsx)("button",{className:"call-actions__btns toggle-voice-btn",children:Object(x.jsx)(ar.a,{})}),Object(x.jsx)("button",{onClick:function(){n(Object(u.a)(Object(u.a)({},s),{},{minimized:!0}))},className:"call-actions__btns return-to-chat-btn",children:Object(x.jsx)(or.a,{})}),Object(x.jsx)("button",{onClick:function(){r()},className:"call-actions__btns hangup-btn",children:Object(x.jsx)(er.a,{})})]})," ",Object(x.jsx)("div",{className:"flip-camera-btn",children:Object(x.jsx)(ir.a,{})}),Object(x.jsx)("div",{onClick:function(){return c()},className:"swap-camera-btn",children:Object(x.jsx)(dr.a,{})}),Object(x.jsx)("div",{onClick:i,className:"screen-cap-btn",children:Object(x.jsx)(jr.a,{})}),Object(x.jsx)("div",{onClick:function(){return n(Object(u.a)(Object(u.a)({},s),{},{minimized:!1}))},style:{display:s.minimized?"block":"none"},className:"enlarge-btn",children:Object(x.jsx)(mr.a,{})})]})},pr=function(e,t){var n=Xe(),a=n.activeConversation,s=n.setActiveVideoCall,i=n.activeVideoCall,r=se().user,l=Object(c.useRef)(),u=Object(c.useRef)(),b=(Object(c.useRef)(),Object(c.useRef)(320),Object(c.useRef)(null),Object(c.useRef)(null),Object(c.useRef)(null),Object(c.useState)(!1)),m=Object(o.a)(b,2),h=m[0],p=m[1],O=Object(c.useState)(!1),f=Object(o.a)(O,2),v=f[0],x=f[1],g=Object(c.useState)(!1),_=Object(o.a)(g,2),y=(_[0],_[1],Object(c.useState)("")),N=Object(o.a)(y,2);N[0],N[1];function C(){var e=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]});return e.onicecandidate=P,e.oniceconnectionstatechange=L,e.onicegatheringstatechange=R,e.onsignalingstatechange=D,e.onnegotiationneeded=w,e.ontrack=B,e}function k(){return(k=Object(I.a)(A.a.mark((function t(){var n,c,a=arguments;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"videoCall",p(!0),t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia({audio:!0,video:"videoCall"===n});case 5:if(c=t.sent,e.current.srcObject=c,l.current=c,!u.current){t.next=10;break}return t.abrupt("return");case 10:u.current=C(),l.current.getTracks().forEach((function(e){return u.current.addTrack(e,l.current)})),t.next=24;break;case 14:if(t.prev=14,t.t0=t.catch(2),!t.t0.name.includes("NotFound")){t.next=19;break}return d.b.error("Call initialization failed! No camera or microphone were found "),t.abrupt("return",U());case 19:if(!t.t0.name.includes("Security")){t.next=22;break}return d.b.error("Something went wrong"),t.abrupt("return",U());case 22:if(!t.t0.name.includes("Permission")){t.next=24;break}return t.abrupt("return",U());case 24:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}function w(){return S.apply(this,arguments)}function S(){return(S=Object(I.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.current.createOffer();case 3:if(t=e.sent,"stable"===u.current.signalingState){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,u.current.setLocalDescription(t);case 8:n={target:a.members.find((function(e){return e._id!==r._id}))._id,caller:r._id,sdp:u.current.localDescription},Ho.emit("offer",n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function T(e){return E.apply(this,arguments)}function E(){return(E=Object(I.a)(A.a.mark((function t(n){var c,i;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 3:c=t.sent,e.current.srcObject=c,l.current=c,u.current=C(),s({participants:a.members.map((function(e){return e._id})),iceConnectionState:u.current.iceConnectionState,signalingState:u.current.signalingState,iceGatheringState:u.current.iceGatheringState,connectionState:u.current.connectionState}),i=new RTCSessionDescription(n.sdp),u.current.setRemoteDescription(i).then((function(){l.current.getTracks().forEach((function(e){return u.current.addTrack(e,l.current)}))})).then((function(){return u.current.createAnswer()})).then((function(e){return u.current.setLocalDescription(e)})).then((function(){var e={target:n.caller,userId:r._id,sdp:u.current.localDescription};Ho.emit("answer",e)}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(e){s({participants:[e.target,e.userId],iceConnectionState:u.current.iceConnectionState,signalingState:u.current.signalingState,iceGatheringState:u.current.iceGatheringState,connectionState:u.current.connectionState});var t=new RTCSessionDescription(e.sdp);u.current.setRemoteDescription(t).catch((function(e){return console.log(e,"answer error")}))}function P(e){if(e.candidate&&a.id){var t={target:a.members.find((function(e){return e._id!==r._id}))._id,candidate:e.candidate};Ho.emit("iceCandidate",t)}}function R(e){console.log(u.current.iceGatheringState)}function D(e){console.log(e)}function L(e){switch(u.current.iceConnectionState){case"closed":case"failed":case"disconnected":U();break;default:return}}function F(e){var t=new RTCIceCandidate(e);u.current&&u.current.addIceCandidate(t).catch((function(e){return console.log(e," error")}))}function B(e){t.current.srcObject||(t.current.srcObject=e.streams[0])}function U(){if(p(!1),u.current){var n,c;u.current.ontrack=null,u.current.onnicecandidate=null,u.current.oniceconnectionstatechange=null,u.current.onsignalingstatechange=null,u.current.onicegatheringstatechange=null,u.current.onnotificationneeded=null,u.current.getTransceivers().forEach((function(e){e.stop()})),(null===(n=e.current)||void 0===n?void 0:n.srcObject)&&(e.current.pause(),e.current.srcObject.getTracks().forEach((function(e){e.stop()}))),(null===(c=t.current)||void 0===c?void 0:c.srcObject)&&(t.current.pause(),t.current.srcObject.getTracks().forEach((function(e){e.stop()}))),u.current.close(),u.current=null,l.current=null,e.current.removeAttribute("src"),e.current.removeAttribute("srcObject"),t.current.removeAttribute("src"),t.current.removeAttribute("srcObject");var a={target:Object(j.a)(i.participants.filter((function(e){return e!==r._id}))),personEndingTheCall:r._id};Ho.emit("connection-ended",a)}}return Object(c.useEffect)((function(){var n={};u.current&&e.current&&t.current&&(n=t.current.srcObject,t.current.srcObject=e.current.srcObject,e.current.srcObject=n)}),[v,e,t]),Object(c.useEffect)((function(){Ho.off("offer").on("offer",T),Ho.off("answer").on("answer",M),Ho.off("ice-candidate").on("ice-candidate",F),Ho.off("connection-ended").on("connection-ended",F),Ho.off("call-ended").on("call-ended",(function(){return U}))})),{startCall:function(){return k.apply(this,arguments)},endCall:U,toggleSwap:function(){x(!v)},isCalling:h}},Or=function(e){var t=Object(c.useRef)(),n=Object(c.useRef)(0),a=se().user,s=Xe().activeConversation,i=s.id;function r(c){!c&&window.innerWidth>=769&&hi("cancel",a.userSettings.sounds),t.current&&clearInterval(t.current),e.current.style.visibility="hidden",e.current.style.transform="scale(".concat(0,")"),n.current=0}return Object(c.useEffect)((function(){e.current.style.transform="scale(".concat(0,")")}),[s]),{grow:function(){e.current.style.visibility="visible",t.current=setInterval((function(){n.current+=.6,n.current<=60?(e.current.style.transform="translateX(".concat(4*(.5-Math.random()),"px)"),e.current.style.fontSize="".concat(n.current,"px")):window.innerWidth>=768?r("piupiu"):(e.current.style.transform=" translateX(".concat(5*(.5-Math.random()),"px)"),e.current.style.fontSize="50px)")}),40)},cancel:r,send:function(){var c={sender:a._id,senderName:a.name,senderPhoto:a.photo,text:s.defaultEmoji,conversationId:i,contentType:"text-plainText",animation:"shakeIt",cssProperty:{scale:n.current<=16?16:n.current>=60?60:n.current},recipient:s.members.map((function(e){return e._id}))};Ho.emit("sendMessage",c),t.current&&clearInterval(t.current),e.current.style.visibility="hidden",e.current.style.transform="scale(0)",n.current=0},growLarger:e}},fr=["handleOpen"],vr=function(e){var t=e.handleOpen,n=Object(m.a)(e,fr),a=Object(c.useRef)(),s=Object(c.useRef)({}),i=Object(c.useRef)(),r=Object(c.useRef)(),l=Object(c.useState)({minimized:!1}),d=Object(o.a)(l,2),j=d[0],b=d[1],h=pr(i,r),p=h.startCall,O=h.endCall,f=h.toggleSwap,v=h.isCalling,g=Or(a),_=g.grow,y=g.cancel,N=g.send;return Object(x.jsxs)("div",{ref:s,className:Ds("chat__main",n.mobileActivePanel.main&&"active-mobile"),children:[Object(x.jsxs)(hr,{isCalling:v,setCallAction:b,callAction:j,toggleSwap:f,shutdownCall:O,children:[Object(x.jsx)(ac.a.div,{className:"remote-video-wrapper",children:Object(x.jsx)("video",{autoPlay:!0,ref:r,id:"remote_video"})}),Object(x.jsx)(ac.a.div,{className:"local-video-wrapper",children:Object(x.jsx)(ac.a.video,{drag:!0,dragConstraints:{top:0,left:0,right:0,bottom:0},ref:i,id:"local_video",autoPlay:!0,muted:!0})})]}),Object(x.jsx)(Qi,Object(u.a)(Object(u.a)({},n),{},{startCalling:p})),Object(x.jsx)(Si,Object(u.a)({growLargerRef:a,handleOpen:t},n)),Object(x.jsx)(Hi,{grow:_,send:N,cancel:y})]})},xr=(n(946),function(e){var t=e.children,n=e.handleOpen,c=e.type,a=e.open;return Object(x.jsx)(x.Fragment,{children:a[c]&&Object(x.jsx)("div",{onClick:function(){return n(Object(T.a)({},c,!1))},className:"modals",children:t})})}),gr=n(581),_r=n.n(gr),yr=n(582),Nr=n.n(yr),Cr=n(583),kr=n.n(Cr),wr=(n(947),n(578)),Sr=n.n(wr),Tr=n(577),Er=n.n(Tr),Ar=function(e){var t=e.children,n=e.title,a=e.cl,s=void 0===a?"":a,i=e.active,r=void 0!==i&&i,l=Object(c.useState)(r),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(c.useState)(0),m=Object(o.a)(b,2),h=m[0],p=m[1],O=Object(c.useRef)();return Object(c.useEffect)((function(){p(O.current.scrollHeight)}),[t]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"accordion",onClick:function(){return j(!u)},children:[Object(x.jsx)("span",{children:n}),u?Object(x.jsx)(Er.a,{}):Object(x.jsx)(Sr.a,{})]}),Object(x.jsx)("div",{ref:O,style:{maxHeight:u?h:0},className:"panel ".concat(u?"active":""," ").concat(s),children:t})]})},Ir=n(579),Mr=n.n(Ir),Pr=n(200),Rr=n.n(Pr),Dr=n(201),Lr=n.n(Dr),Fr=n(580),Br=n.n(Fr),Ur=function(){var e=Xe().activeConversation.id,t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){var t;(t=e,B.get("/messages/photos/".concat(t))).then((function(e){s(e.data.photos)}))}),[s,e]),Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)("div",{className:"conversationPhotos",children:[a&&a.length>0&&a.map((function(e){return Object(x.jsx)($s.a,{children:Object(x.jsx)("img",{className:"conversationPhoto",src:e.url,alt:""})},e.public_id)}))," "]})]})},Vr=function(e){var t,n,a=e.setMobileActivePanel,s=e.mobileActivePanel,i=e.activePanel,r=se().user,l=Xe().activeConversation,j=l.otherEnd,b=Object.values(l.block||{}).some(Boolean)&&l.block[null===j||void 0===j?void 0:j._id],m=Object(c.useState)({myName:!1,theirName:!1}),h=Object(o.a)(m,2),p=h[0],O=h[1],f=Object(c.useState)({myName:"",theirName:""}),v=Object(o.a)(f,2),g=v[0],_=v[1];function y(e){window.confirm(e?"After blocking this mf, you won't be able to send messages to each other. Are you sure?":"After unblocking this mf, they will be able to send messages to you again. Are you sure?")&&Ho.emit("blockThisPerson",{personToBlock:null===j||void 0===j?void 0:j._id,conversationId:l.id,block:e,blockedBy:r._id})}var N=Ds("chat__right",s.right&&"active-mobile",i.right&&"active");return Object(x.jsxs)("div",{className:N,children:[Object(x.jsxs)("div",{className:"otherEndInfo",children:[Object(x.jsx)("div",{onClick:function(){window.innerWidth<=768&&a({main:!0,left:!1,right:!1})},className:"showIcon-mobile",children:Object(x.jsx)(ks.a,{})}),Object(x.jsx)("img",{onClick:function(){return a({right:!1,main:!0})},src:null===j||void 0===j||null===(t=j.photo)||void 0===t?void 0:t.url,alt:""}),Object(x.jsx)("h4",{children:null===j||void 0===j?void 0:j.name}),Object(x.jsx)("p",{children:null===j||void 0===j?void 0:j.role}),Object(x.jsxs)("div",{className:"btnGroup",children:[!Object.values(l.block||{}).some(Boolean)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"createGroupBtn",children:Object(x.jsx)(yt.a,{placement:"top",title:"Create a group chat",children:Object(x.jsx)(Mr.a,{})})}),Object(x.jsx)("div",{className:"blockBtn",children:Object(x.jsx)("span",{onClick:function(){return y(!0)},children:Object(x.jsx)(yt.a,{title:"Block this mf",placement:"top",children:Object(x.jsx)(Br.a,{})})})})]}),b&&Object(x.jsx)("div",{className:"blockBtn",children:Object(x.jsx)("span",{onClick:function(){return y(!1)},children:" Unblock"})})]})]}),Object(x.jsxs)(Ar,{title:"Information",children:[Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(_r.a,{}),Object(x.jsx)("p",{children:null===j||void 0===j||null===(n=j.whereabouts)||void 0===n?void 0:n.address})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(Nr.a,{})," ",Object(x.jsx)("p",{children:null===j||void 0===j?void 0:j.phoneNumber})]}),Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsx)(kr.a,{}),Object(x.jsx)("p",{children:null===j||void 0===j?void 0:j.email})]})]}),!Object.values(l.block||{}).some(Boolean)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ar,{title:"Set nicknames",cl:"setNickNames",children:l.members.map((function(e){var t=p[e.name],n=l.memberNickNames&&l.memberNickNames[e._id]?l.memberNickNames[e._id]:e.name,c=l.memberNickNames&&l.memberNickNames[e._id];return Object(x.jsx)("div",{className:"stack editNickNames",children:t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("input",{value:g[e.name],onChange:function(t){return _(Object(u.a)(Object(u.a)({},g),{},Object(T.a)({},e._id,t.target.value)))},type:"text",onKeyDown:function(t){"Enter"===t.key&&(Ci(e,g,!0,l,r,Ho),O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e.name,!1)))),"Escape"===t.key&&(O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e.name,!1))),_(Object(u.a)(Object(u.a)({},g),{},Object(T.a)({},e._id,""))))}})," ",Object(x.jsxs)("div",{className:"btnGroup",children:[Object(x.jsx)("span",{onClick:function(){Ci(e,g,!0,l,r,Ho),O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e.name,!1)))},children:Object(x.jsx)(Rr.a,{})}),Object(x.jsx)("span",{onClick:function(){O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e.name,!1))),_(Object(u.a)(Object(u.a)({},g),{},Object(T.a)({},e._id,"")))},children:Object(x.jsx)(Lr.a,{})})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{children:n}),Object(x.jsxs)("div",{className:"btnGroup",children:[Object(x.jsx)("span",{onClick:function(){return O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e.name,!0)))},children:"Edit"}),c&&Object(x.jsx)("span",{onClick:function(){Ci(e,g,!1,l,r,Ho),O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e.name,!1)))},children:"Remove"})]})]})},e._id)}))})," ",Object(x.jsx)(Ar,{title:"Choose chat theme",children:Object(x.jsx)("div",{className:"themeOptions",children:Vs.map((function(e){return Object(x.jsx)("div",{onClick:function(){return Ni(e,a,l,r,d.b,Ho)},style:{background:e.themeColor},className:"theme ".concat(e.name)},e.name)}))})})]}),Object(x.jsx)(Ar,{title:"Media",cl:"photos",children:Object(x.jsx)(Ur,{})})]})},Wr=n(585),Gr=n.n(Wr),zr=n(584),Hr=n.n(zr),qr=n(586),Yr=n.n(qr);function $r(e,t,n){e.key===t&&n.forEach((function(e){return e()}))}var Jr=function(e){var t=e.setMobileActivePanel,n=e.mobileActivePanel,a=e.activePanel,s=se().user,i=Xe().activeConversation,r=Object(c.useState)({conversationName:!1}),l=Object(o.a)(r,2),j=l[0],b=l[1],m=Object(c.useState)({}),h=Object(o.a)(m,2),p=h[0],O=h[1],f=Object(c.useState)(!1),v=Object(o.a)(f,2),g=v[0],_=v[1],y=Object(c.useState)({membersToAdd:[],user:s}),N=Object(o.a)(y,2),C=N[0],k=N[1],w=Object(c.useState)([]),S=Object(o.a)(w,2),E=S[0],M=S[1],P=Object(c.useContext)(ct)[1],R=Object(c.useState)(i.conversationName||""),D=Object(o.a)(R,2),L=D[0],F=D[1];Object(c.useEffect)((function(){g&&function(e){return B.post("/users/except",{users:e})}(i.members.map((function(e){return e._id}))).then((function(e){M(e.data.users)}))}),[g,i.members]);var U=function(){var e=Object(I.a)(A.a.mark((function e(t){var n,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=i.conversationPhoto)){e.next=4;break}return e.next=4,mn(n._id);case 4:(c=t.target.files[0])&&(P(!0),rn.a.imageFileResizer(c,120,120,"JPEG",100,0,(function(e){bn(e).then((function(e){P(!1),Ho.emit("changeConversationPhoto",{photo:e.data,conversationId:i.id});var t={sender:s._id,senderName:s.name,senderPhoto:s.photo,conversationId:i.id,recipient:i.members.map((function(e){return e._id})),contentType:"announcement-conversationPhoto",text:"userName changed the conversation photo"};Ho.emit("sendMessage",t)})).catch((function(e){P(!1),console.log(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var V=Ds("chat__right",n.right&&"active-mobile",a.right&&"active"),W=i.members.map((function(e,t){return t===i.members.length-1?e.name+".":e.name+", "}));return Object(x.jsxs)("div",{className:V,children:[Object(x.jsxs)("div",{className:"groupChatInfo",children:[Object(x.jsx)("div",{onClick:function(){window.innerWidth<=768&&t({main:!0,left:!1,right:!1})},className:"showIcon-mobile",children:Object(x.jsx)(ks.a,{})}),Object(x.jsxs)("div",{className:Ds("infoWrapper",!i.conversationPhoto&&"default"),children:[Object(x.jsxs)("div",{className:"conversationPhoto",children:[i.conversationPhoto&&Object(x.jsx)("img",{src:i.conversationPhoto.url,alt:""})," ",Object(x.jsx)("div",{className:"cameraIcon",children:Object(x.jsx)(Hr.a,{})}),Object(x.jsx)("input",{className:"conversationPhotoUpload",onChange:U,type:"file",accept:"image/*"})]}),!i.conversationPhoto&&Object(x.jsx)(As.a,{max:2,children:i.members.map((function(e){return Object(x.jsx)(Ha.a,{alt:e.name,src:e.photo.url},e._id)}))}),Object(x.jsxs)("div",{className:"groupChatName",children:[Object(x.jsx)("div",{children:j.conversationName?Object(x.jsx)("input",{value:L,onChange:function(e){return F(e.target.value)},type:"text",onKeyDown:function(e){$r(e,"Enter",[function(){return ki(!0,L,i,s,Ho,d.b)},function(){return b(Object(u.a)(Object(u.a)({},j),{},{conversationName:!1}))}]),$r(e,"Escape",[function(){return b(Object(u.a)(Object(u.a)({},j),{},{conversationName:!1}))}])}}):Object(x.jsx)("p",{children:i.conversationName||"Group Chat"})}),Object(x.jsxs)("div",{className:"btnGroup",children:[!j.conversationName&&Object(x.jsx)("span",{onClick:function(){return b(Object(u.a)(Object(u.a)({},j),{},{conversationName:!0}))},className:"editChatName",children:Object(x.jsx)(Gr.a,{})}),j.conversationName&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{onClick:function(){b(Object(u.a)(Object(u.a)({},j),{},{conversationName:!1})),ki(!0,L,i,s,Ho,d.b)},children:Object(x.jsx)(Rr.a,{})}),Object(x.jsx)("span",{onClick:function(){return b(Object(u.a)(Object(u.a)({},j),{},{conversationName:!1}))},children:Object(x.jsx)(Lr.a,{})})]})]})]})]})]}),Object(x.jsxs)(Ar,{active:!0,cl:"groupInfo",title:"Group information",children:[Object(x.jsx)("div",{className:"stack",children:"Date Created:"}),Object(x.jsxs)("div",{className:"stack",children:["Members: ",W," "]}),Object(x.jsxs)("div",{className:"addMoreMember",children:[!g&&Object(x.jsx)("span",{onClick:function(){return _(!0)},children:"+ Add more"}),g&&Object(x.jsxs)("div",{className:"usersToAdd",children:[Object(x.jsx)(fn.a,{multiple:!0,id:"tags-standard",options:E,getOptionLabel:function(e){return e.name||"Loading"},onChange:function(e,t){return k(Object(u.a)(Object(u.a)({},C),{},{membersToAdd:t}))},renderInput:function(e){return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)({},e),{},{variant:"standard",placeholder:"Select user(s)"}))}}),Object(x.jsx)("span",{onClick:function(){if(!C.membersToAdd.length)return function(){return _(!1)};var e,t=Object(re.a)(C.membersToAdd);try{var n=function(){var t=e.value;if(i.blocked.find((function(e){return e===t._id})))return d.b.error("One of the people you selected was banned from this conversation"),_(!1),{v:void 0}};for(t.s();!(e=t.n()).done;){var c=n();if("object"===typeof c)return c.v}}catch(a){t.e(a)}finally{t.f()}Ho.emit("addMoreMember",Object(u.a)(Object(u.a)({},C),{},{conversationId:i.id,members:i.members.map((function(e){return e._id}))})),_(!1)},children:"Confirm"}),Object(x.jsx)("span",{onClick:function(){return _(!1)},children:"Cancel"})]})]})]}),Object(x.jsx)(Ar,{title:"Members",cl:"groupMembers",children:i.members.map((function(e){var t,n,c,a,r=i.memberNickNames&&i.memberNickNames[e._id]?i.memberNickNames[e._id]:e.name,o=null===(t=i.conversationAdmins)||void 0===t?void 0:t.find((function(t){return t===e._id})),l=!(null===(n=i.conversationAdmins)||void 0===n?void 0:n.length)&&e._id===s._id,m=(null===(c=i.conversationAdmins)||void 0===c?void 0:c.length)>0,h=i.conversationAdmins.find((function(e){return e===s._id})),f=null===(a=i.conversationAdmins)||void 0===a?void 0:a.find((function(t){return t===e._id})),v=i.memberNickNames&&i.memberNickNames[e._id],g=e._id!==s._id;return Object(x.jsxs)("div",{className:"stack editNickNames",children:[j[e.name]?Object(x.jsx)("div",{className:"editField",children:Object(x.jsx)("input",{value:p[e.name],onChange:function(t){return O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e._id,t.target.value)))},type:"text",onKeyDown:function(t){"Enter"===t.key&&(Ci(e,p,!0,i,s,Ho),b(Object(u.a)(Object(u.a)({},j),{},Object(T.a)({},e.name,!1)))),"Escape"===t.key&&(b(Object(u.a)(Object(u.a)({},j),{},Object(T.a)({},e.name,!1))),O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e._id,""))))}})}):Object(x.jsxs)("span",{children:[r," - ",o?"Admin":"Peasant"," ",e._id===s._id?"(You)":""]}),Object(x.jsx)("div",{className:"btnGroup",children:j[e.name]?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("span",{onClick:function(){Ci(e,p,!0,i,s,Ho),b(Object(u.a)(Object(u.a)({},j),{},Object(T.a)({},e.name,!1)))},children:Object(x.jsx)(Rr.a,{})}),Object(x.jsx)("span",{onClick:function(){b(Object(u.a)(Object(u.a)({},j),{},Object(T.a)({},e.name,!1))),O(Object(u.a)(Object(u.a)({},p),{},Object(T.a)({},e._id,"")))},children:Object(x.jsx)(Lr.a,{})})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"moreMemActions",children:[Object(x.jsx)("span",{children:Object(x.jsx)(Yr.a,{})}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)("span",{onClick:function(){return b(Object(u.a)(Object(u.a)({},j),{},Object(T.a)({},e.name,!0)))},children:"Set nickname"})}),Object(x.jsx)("li",{children:v&&Object(x.jsx)("span",{onClick:function(){Ci(e,p,!1,i,s,Ho),b(Object(u.a)(Object(u.a)({},j),{},Object(T.a)({},e.name,!1)))},children:"Remove nickname"})}),m&&h&&Object(x.jsx)("li",{children:f?Object(x.jsx)("span",{onClick:function(){return wi(e,"removeAdmin",i,s,Ho,d.b)},children:"Remove as admin"}):Object(x.jsx)("span",{onClick:function(){return wi(e,"makeAdmin",i,s,Ho,d.b)},children:"Make admin"})}),l&&Object(x.jsx)("li",{children:Object(x.jsx)("span",{onClick:function(){return wi(e,"makeAdmin",i,s,Ho,d.b)},children:"Claim as admin"})}),g&&h&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{children:Object(x.jsx)("span",{onClick:function(){return wi(e,"removeMember-fromGroup",i,s,Ho,d.b)},children:"Remove"})}),Object(x.jsx)("li",{children:Object(x.jsx)("span",{onClick:function(){return wi(e,"removeMember-andBlock",i,s,Ho,d.b)},children:"Remove and block"})})]})]})]})})})]})}))}),Object(x.jsx)(Ar,{cl:"blockeds",title:"Blocked from this group",children:Object(x.jsx)("div",{className:"stack",children:"Blocked from this group"})}),Object(x.jsx)(Ar,{title:"Choose chat theme",children:Object(x.jsx)("div",{className:"themeOptions",children:Vs.map((function(e){return Object(x.jsx)("div",{onClick:function(){return Ni(e,t,i,s,d.b,Ho)},style:{background:e.themeColor},className:"theme ".concat(e.name)},e.name)}))})})," ",Object(x.jsx)(Ar,{title:"Media",cl:"photos",children:Object(x.jsx)(Ur,{})}),Object(x.jsx)("div",{onClick:function(){if(window.confirm("You are about to leave this group chat. Are you sure?")){Ho.emit("leaveConversation",{userId:s._id,conversationId:i.id});var e={sender:s._id,senderName:s.name,senderPhoto:s.photo,conversationId:i.id,text:s.name+" left the conversation",contentType:"announcement-leaveConversation",recipient:i.members};Ho.emit("sendMessage",e),t({left:!0,main:!1,right:!1})}},className:"leaveBtn",children:Object(x.jsx)("span",{children:" Leave the chat"})})]})};var Kr=n(1001),Zr=function(){var e=se(),t=e.user,n=e.update,a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],r=s[1],l=Object(c.useContext)(ct)[1],d=Object(c.useState)({sounds:t.userSettings.sounds,darkMode:t.userSettings.darkMode}),j=Object(o.a)(d,2),b=j[0],m=j[1],h=function(e){m((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(T.a)({},e,!t[e]))}))},p=Object(c.useCallback)(function(){var e=Object(I.a)(A.a.mark((function e(c){var a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),!(a=t.photo)){e.next=6;break}return e.next=5,mn(a._id);case 5:l(!1);case 6:(s=c[0])&&(l(!0),rn.a.imageFileResizer(s,320,320,"JPEG",100,0,(function(e){bn(e).then((function(e){l(!1),r(URL.createObjectURL(s));var t=e.data,c=t.public_id,a=t.url;n({photo:{public_id:c,url:a}})})).catch((function(e){console.log(e)}))})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,n,t.photo]);return Object(x.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:Ds("modal settings",t.userSettings.darkMode?"darkMode":""),children:[Object(x.jsxs)("div",{className:"avatarSettings",children:[Object(x.jsx)(Oa,{accept:"image/*",file:i,maxSize:3145728,onDrop:p,defaultPhoto:t.photo,caption:Object(x.jsxs)(fa.a,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",Object(x.jsx)("br",{})," max size of 3.1MB"]})}),Object(x.jsxs)("div",{className:"avatarFrames",children:[Object(x.jsx)("p",{children:"Choose your avatar frame"}),Object(x.jsx)("span",{children:"COMING SOON"})]})]}),Object(x.jsxs)("div",{className:"chatSettings",children:[Object(x.jsx)(Dc.a,{control:Object(x.jsx)(Kr.a,{checked:b.sounds,onChange:function(){return h("sounds")},name:"checkedA",color:"primary"}),label:"Sounds and notifications"}),Object(x.jsx)(Dc.a,{control:Object(x.jsx)(Kr.a,{checked:b.darkMode,onChange:function(){return h("darkMode")},name:"checkedA",color:"primary"}),label:"Dark mode"})]}),Object(x.jsx)("button",{onClick:function(e){e.preventDefault(),n({userSettings:b})},className:"confirm-btn",children:"Update"})]})},Qr=function(e){var t=e.handleOpen,n=se().user,a=n._id,s=n.userSettings,i=n.name,r=n.photo,l=Xe().forwardMessage,j=Object(c.useState)({}),b=Object(o.a)(j,2),m=b[0],h=b[1],p=Object(c.useState)([]),O=Object(o.a)(p,2),f=O[0],v=O[1];function g(e){return e.members.find((function(e){return e._id!==a}))}return Object(c.useEffect)((function(){(function(e){return B.get("/conversations/"+e)})(a).then((function(e){return v(e.data.conversations)}))}),[a]),console.log(s),Object(x.jsxs)("div",{className:Ds("modal forwardMessage",s.darkMode?"darkMode":""),onClick:function(e){return e.stopPropagation()},children:[Object(x.jsx)("div",{onClick:function(){return t({forwardMessage:!1})},className:"closeBtn",children:Object(x.jsx)(Gt.a,{})}),Object(x.jsx)("div",{className:"forwardingTo",children:f.length>0&&f.map((function(e){var t,n,c;return Object(x.jsxs)("div",{className:"stack",children:[Object(x.jsxs)("div",{className:"conversationInfo",children:[Object(x.jsx)("div",{className:"conversationImg",children:"OneOne"===e.conversationType?Object(x.jsx)("img",{width:50,height:50,src:null===(t=g(e))||void 0===t||null===(n=t.photo)||void 0===n?void 0:n.url,alt:""}):Object(x.jsxs)(x.Fragment,{children:[" ",e.photo?Object(x.jsx)("img",{src:"",alt:""}):Object(x.jsx)(As.a,{max:2,children:e.members.map((function(e){return Object(x.jsx)(Ha.a,{alt:e.name,src:e.photo.url},e._id)}))})]})}),Object(x.jsx)("div",{className:"conversationName",children:"OneOne"===e.conversationType?null===(c=g(e))||void 0===c?void 0:c.name:e.name||"Group Chat"})]}),m[e._id]?Object(x.jsx)("div",{children:"Forwarded"}):Object(x.jsx)("div",{onClick:function(){return function(e){var t,n=Object(u.a)(Object(u.a)({},l),{},{contentType:(t=l.contentType,t.endsWith("plainText")?"text-forward-plainText":t.endsWith("photo")?"text-forward-photo":t.endsWith("audio")?"text-forward-audio":void 0),conversationId:e._id,sender:a,senderName:i,senderPhoto:r,recipient:e.members});Ho.emit("sendMessage",n,(function(t){200===t?h(Object(u.a)(Object(u.a)({},m),{},Object(T.a)({},e._id,!0))):d.b.error("something went wrong")}))}(e)},className:"forwardBtn",children:"Forward"})]})}))})]})},Xr=n(587),eo=n.n(Xr),to=[{type:"accountSettings",component:Zr},{type:"newMessage",component:function(e){var t=e.handleOpen,n=se().user,a=Object(c.useState)([]),s=Object(o.a)(a,2),i=s[0],r=s[1];Object(c.useEffect)((function(){rc().then((function(e){return r(e.data.users)}))}),[r]);var l=Object(c.useState)({recipients:[],text:"",userId:n._id,userInfo:{photo:n.photo,name:n.name}}),j=Object(o.a)(l,2),b=j[0],m=j[1];function h(){return(h=Object(I.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),b.text&&b.recipients.length&&b.text.length<=500?(Ho.emit("newMessage",b,(function(e,t){200!==e&&d.b.error(t)})),t({newMessage:!1})):d.b.error("You must select at least one recipient and your text must not exceed 500 characters");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:Ds("modal newMessage",n.userSettings.darkMode?"darkMode":""),children:Object(x.jsxs)("form",{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(x.jsx)("h2",{children:"New Message"}),Object(x.jsx)("div",{className:"search",children:Object(x.jsx)(fn.a,{multiple:!0,id:"tags-standard",options:i,getOptionLabel:function(e){return e.name},onChange:function(e,t){return m(Object(u.a)(Object(u.a)({},b),{},{recipients:t.map((function(e){return e._id}))}))},renderInput:function(e){return Object(x.jsx)(Qt.a,Object(u.a)(Object(u.a)({},e),{},{variant:"standard",placeholder:"Select Recipient(s)"}))}})}),Object(x.jsxs)("div",{className:"textField",children:[Object(x.jsx)(Qt.a,{fullWidth:!0,multiline:!0,variant:"standard",minRows:"16",margin:"normal",placeholder:"Write something",onChange:function(e){m(Object(u.a)(Object(u.a)({},b),{},{text:e.target.value}))}})," ",Object(x.jsx)("button",{type:"submit",children:Object(x.jsx)(eo.a,{})}),Object(x.jsx)("span",{className:b.text.length>500?"error":"",children:b.text.length})]})]})})}},{type:"forwardMessage",component:Qr}],no=function(){var e=Xe(),t=e.setConversations,n=e.activeConversation,a=e.setActiveConversation,s=e.setMessageList,i=e.updateMessageList,r=e.updateMessages,l=e.updateConversationListLatestMessage,d=e.rearrangeConversationList,j=e.setChatAnimation,b=e.updateMessageListStatus,m=e.updateBlock,h=e.updateChatName,p=e.removeConversation,O=e.updateChatPhoto,f=e.updateConversationList,v=e.updateConversationMembers,g=e.userEnteredAndReadMessages,_=e.userLeftConversation,y=e.updateIndividualMessage,N=e.conversations,C=e.updateConversation,k=Object(c.useRef)(),w=se().user,S=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){return window.addEventListener("resize",(function(){a(window.innerWidth)})),window.removeEventListener("resize",(function(){}))}),[]),n}(),T=Object(c.useState)({left:S<768,right:!1,main:!1}),E=Object(o.a)(T,2),M=E[0],P=E[1],R=Object(c.useState)({left:S<768,right:!0,main:!0}),D=Object(o.a)(R,2),L=D[0],F=D[1],B=Object(c.useState)({}),U=Object(o.a)(B,2),V=U[0],W=U[1],G=function(e){W(Object(u.a)(Object(u.a)({},V),e))};Object(c.useEffect)((function(){return Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})))(),function(){a({})}}),[t,a]),Object(c.useEffect)((function(){Ho.emit("enter",w._id)}),[w._id,a]),Object(c.useEffect)((function(){Ho.off("getMessages").on("getMessages",(function(e){var t=e.messages,c=e.conversation,s=e.hasMore;c._id===n.id&&a(Object(u.a)(Object(u.a)({},c),{},{messages:t,hasMore:s,otherEnd:"OneOne"===c.conversationType?c.members.find((function(e){return e._id!==w._id})):{}}))}))}),[n,s,a,w._id]),Object(c.useEffect)((function(){Ho.off("sendBack").on("sendBack",(function(e,t,c){var s,r,o;if(t&&n.id!==c._id&&e.sender===w._id)return Ho.emit("joinConversationAndReadMessages",c._id,w._id),Ho.emit("joinConversation",{conversationId:c._id,userId:w._id}),a({id:c._id,conversationType:c.conversationType,animation:{class:""},conversationTheme:c.conversationTheme,defaultEmoji:c.defaultEmoji,pinnedMessage:c.pinnedMessage,inputMode:"normal",lastSeenMessage:c.lastSeenMessage||{},conversationCreator:c.conversationCreator,members:c.members,block:c.block,conversationName:c.conversationName,conversationPhoto:c.conversationPhoto}),void(window.innerWidth<=768&&P({left:!1,main:!0,right:!1}));((null===(s=e.text)||void 0===s?void 0:s.includes("ch\u01b0a 18"))||(null===(r=e.text)||void 0===r?void 0:r.includes("loli")))&&hi("fbi",w.userSettings.sounds),i(Object(u.a)(Object(u.a)({},e),{},{isSenderCurrentUser:w._id===e.sender})),e.sender!==w._id&&hi("newMessage",w.userSettings.sounds),e.animation&&!(null===(o=n.animation)||void 0===o?void 0:o.class)&&n.id===e.conversationId&&(j({class:e.animation,conversationId:e.conversationId}),setTimeout((function(){j({class:"",conversationId:e.conversationId})}),1e4)),e.sender!==w._id&&(Ho.emit("messageReceived",{id:e._id,status:"delivered"}),n&&n.id===e.conversationId&&!t&&(b({messageId:e._id,status:"seen",conversationId:e.conversationId}),Ho.emit("markAsRead",{id:e._id,userId:w._id})))})),Ho.off("blocked").on("blocked",(function(e){m(e)})),Ho.off("chatNameChanged").on("chatNameChanged",(function(e){h(e)})),Ho.off("removeConversation").on("removeConversation",(function(e){p(e),window.innerWidth<=768&&P({left:!0,main:!1,right:!1}),Ho.emit("leaveRoom",e)})),Ho.off("chatPhotoChanged").on("chatPhotoChanged",(function(e){O(e)})),Ho.off("membersAdded").on("membersAdded",(function(e){v(e)})),Ho.off("gotAdded").on("gotAdded",(function(e){f(e),d()})),Ho.off("otherEndEnteredAndReadTheMessages").on("otherEndEnteredAndReadTheMessages",(function(e){g(e)})),Ho.off("userLeft").on("userLeft",(function(e){_(e)})),Ho.off("updateIndividualMessage").on("updateIndividualMessage",(function(e,t){y({message:e,updatedMessagesReplyingToRecalled:t})})),Ho.off("SendBackActions").on("SendBackActions",(function(e){C(e)}))}),[b,j,r,l,d,a,i,m,h,p,O,f,v,g,_,y,C,n,w.userSettings.sounds,w._id]);var z={activePanel:L,setActivePanel:F,mobileActivePanel:M,setMobileActivePanel:P},H={open:V,handleOpen:G},q=Ds("chat",n.animation&&n.animation.class,w.userSettings.darkMode&&"darkMode");return Object(x.jsxs)("div",{className:"chatPage",children:[to.map((function(e){return Object(x.jsx)(xr,Object(u.a)(Object(u.a)({},H),{},{type:e.type,children:Object(x.jsx)(e.component,{handleOpen:G})}))})),Object(x.jsxs)("div",{className:q,children:[Object(x.jsx)(Bs,Object(u.a)(Object(u.a)({},z),{},{handleOpen:G,ref:k})),n.id?Object(x.jsx)(vr,Object(u.a)(Object(u.a)({},z),{},{handleOpen:G})):Object(x.jsx)(Ls,{searchRef:k,textContent:N.length?"You are currently not in any conversation":"You don't have any conversation. Let's create a new one!",haveConversations:N.length>0}),n.id&&Object(x.jsx)(x.Fragment,{children:"OneOne"===n.conversationType?Object(x.jsx)(Vr,Object(u.a)({},z)):Object(x.jsx)(Jr,Object(u.a)({},z))})]})]})},co=(n(948),[{path:"/",component:Gn},{path:"/collections/:category",component:Ic},{path:"/checkout",component:Qc},{path:"/cart",component:Xc},{path:"/:productSlug",component:wc}]),ao=[{path:"/user/general",component:Aa},{path:"/user/messenger",component:function(){return Object(x.jsx)("div",{className:"messenger",children:Object(x.jsx)(no,{})})}}],so=[{path:"/auth/login",component:Da},{path:"/auth/register",component:Ua}],io=[{path:"/admin",component:is,subRoutes:[{path:"/admin/app",component:rs},{path:"/admin/product/create",component:ms},{path:"/admin/product/edit",component:ms},{path:"/admin/product/list",component:hs},{path:"/admin/coupon",component:Ns},{path:"/admin/messages",component:no}]}],ro=["children"],oo=function(e){var t=e.children,n=Object(m.a)(e,ro),c=Object(et.h)(),a=se(),s=a.isAuthenticated,i=a.user;return Object(x.jsx)(et.b,Object(u.a)(Object(u.a)({},n),{},{render:function(){return s?"admin"===i.role?Object(x.jsx)(et.a,{to:{pathname:"/admin/app"}}):Object(x.jsx)(et.a,{to:{pathname:c.state?c.state.from:"/"}}):t}}))},lo=["children"];function uo(e){var t=e.children,n=Object(m.a)(e,lo),c=se().isAuthenticated;return Object(x.jsx)(et.b,Object(u.a)(Object(u.a)({},n),{},{exact:!0,render:function(e){var n=e.location;return c?t:Object(x.jsx)(et.a,{to:{pathname:"/auth/login",state:{from:n.pathname}}})}}))}var jo=["children"],bo=function(e){var t=e.children,n=Object(m.a)(e,jo),c=se(),a=c.isAuthenticated,s=c.user.role;return Object(x.jsx)(et.b,Object(u.a)(Object(u.a)({},n),{},{render:function(){return a&&s&&"admin"===s?t:Object(x.jsx)(et.a,{to:{pathname:"/"}})}}))},mo=n(126),ho=n.n(mo),po=n(596),Oo=n.n(po),fo=n(594),vo=n.n(fo),xo=n(595),go=n.n(xo),_o=(n(949),n(950),function(e){var t=e.category,n=e.setSub,c=e.setActive,a=e.handleOpenSub,s=Object(et.g)();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{className:"contents__title",children:t.name}),Object(x.jsxs)("div",{className:"contents__subs",children:[Object(x.jsx)("ul",{className:"contents__subs__subCates",children:t.subCates.map((function(e,i){return Object(x.jsx)("li",{children:Object(x.jsx)("span",{onClick:function(){n(!1),c(!1),a(t.name),s.push("/collections/".concat(e.slug))},children:e.name.toUpperCase()})},i)}))}),Object(x.jsx)("div",{className:"contents__subs__shop",children:t.shopBy.map((function(e,i){return Object(x.jsxs)("ul",{className:"contents__subs__shop-by",children:[Object(x.jsx)("h4",{children:e.name}),e.options.map((function(e,i){return Object(x.jsx)("li",{onClick:function(){n(!1),c(!1),a(t.name),s.push("/".concat(e.slug))},children:e.name},i)}))]},i)}))}),Object(x.jsxs)("div",{className:"contents__subs__featured-image",children:[Object(x.jsx)("img",{src:t.image.scr,alt:""}),Object(x.jsxs)("div",{className:"contents__subs__featured-image__des",children:[Object(x.jsx)("p",{children:t.image.title}),Object(x.jsx)("p",{children:t.image.subTitle})]})]})]})]})}),yo=(n(951),n(591)),No=n.n(yo),Co=n(590),ko=n.n(Co),wo=n(260),So=n.n(wo),To=n(589),Eo=n.n(To),Ao=n(593),Io=n.n(Ao),Mo=n(592),Po=n.n(Mo),Ro=n(1013),Do=n(588),Lo=n.n(Do),Fo=function(e){var t=e.handleDropDown,n=Xe().resetChatOnLogout,a=Object(c.useState)(!0),s=Object(o.a)(a,2),i=s[0],r=s[1],d=Object(c.useContext)(ct)[1],u=Object(et.g)(),j=se().logout,b=Object(l.c)((function(e){return e.user})).isAuthenticated,m=Object(c.useState)("main"),h=Object(o.a)(m,2),p=h[0],O=h[1],f=Object(c.useState)("auto"),v=Object(o.a)(f,2),g=v[0],_=v[1],y=Object(l.c)((function(e){return e.user.user?e.user.user.role:void 0}));function N(e){_(e.offsetHeight)}function C(e){return Object(x.jsxs)("div",{className:"item",onClick:function(){"switch-page"===e.type&&($t([function(){return e.onClick()}],d),r(!1),t(!1)),"sign-out"===e.type?$t([function(){return e.onClick()}],d):e.goToMenu&&O(e.goToMenu)},children:[Object(x.jsx)("span",{className:"icon-left",children:e.iconRight}),Object(x.jsx)("p",{children:e.children}),Object(x.jsx)("span",{className:"icon-right",children:e.iconLeft})]})}var k=Object(c.useRef)();return ie(k,t),Object(x.jsx)(Ro.a,{classNames:"dropdown",in:i,unmountOnExit:!0,timeout:500,children:Object(x.jsxs)("div",{ref:k,style:{height:g+30},className:"drop-down",children:[Object(x.jsx)(Ro.a,{in:"main"===p,unmountOnExit:!0,timeout:500,onEnter:N,classNames:"menu-primary",children:Object(x.jsxs)("div",{className:"menu",children:[b&&"user"===y?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C,{goToMenu:"user",iconRight:Object(x.jsx)(So.a,{}),children:"Profile"}),Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/user/messenger")},iconRight:Object(x.jsx)(or.a,{}),children:"Yahee"})]}):b&&"admin"===y?Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)(C,{goToMenu:"user",iconRight:Object(x.jsx)(So.a,{}),children:"Profile"}),Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/admin/app")},iconRight:Object(x.jsx)(Lo.a,{}),children:"Dashboard"})," "]}):"",b?Object(x.jsx)(C,{type:"sign-out",onClick:function(){j(),n()},iconRight:Object(x.jsx)(Eo.a,{}),children:"Sign out"}):Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/auth/login")},children:"Sign In"}),b?"":Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/auth/register")},children:"Sign Up"})]})}),Object(x.jsx)(Ro.a,{in:"user"===p,unmountOnExit:!0,timeout:500,onEnter:N,classNames:"menu-secondary",children:Object(x.jsxs)("div",{className:"menu",children:[Object(x.jsx)(C,{goToMenu:"main",iconRight:Object(x.jsx)(ko.a,{})}),Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/user/general")},iconRight:Object(x.jsx)(So.a,{}),children:"General"}),Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/user/history")},iconRight:Object(x.jsx)(No.a,{}),children:"Order History"}),Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/user/seen")},iconRight:Object(x.jsx)(Po.a,{}),children:"Seen Products"}),Object(x.jsx)(C,{type:"switch-page",onClick:function(){return u.push("/user/wishlist")},iconRight:Object(x.jsx)(Io.a,{}),children:"Wish List"})]})})]})})};function Bo(){var e=Object(l.c)((function(e){return e.cart})).quantity,t=Object(et.g)(),n=Object(c.useContext)(Mn),a=Object(c.useState)(!1),s=Object(o.a)(a,2),i=s[0],r=s[1],d=Object(c.useState)(!1),j=Object(o.a)(d,2),b=j[0],m=j[1],h=Object(et.h)().pathname,p=Object(c.useState)({flowers:!1,vapes:!1,extracts:!1,edibles:!1,cbd:!1,accessories:!1}),O=Object(o.a)(p,2),f=O[0],v=O[1],g=Object(c.useState)(!1),_=Object(o.a)(g,2),y=_[0],N=_[1],C=function(e){v(Object(u.a)(Object(u.a)({},f),{},Object(T.a)({},e,!f[e])))},k=function(e){v(Object(u.a)(Object(u.a)({},f),{},Object(T.a)({},e,!1)))};return h.startsWith("/admin")||h.startsWith("/checkout")||h.startsWith("/auth/login")||h.startsWith("/auth/register")||h.startsWith("/user/messenger")?"":Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("header",{className:"header",children:Object(x.jsxs)("div",{className:"container header-container",children:[Object(x.jsx)("div",{className:"header-logo",children:Object(x.jsx)(Un.b,{to:"/",children:"C9STORE"})}),Object(x.jsx)("nav",{className:"header-nav ".concat(b?"mobile":""),children:Object(x.jsxs)("ul",{className:"mega-menu ".concat(y?"slide-out":""),children:[Object(x.jsx)("div",{className:"mobile-controls",children:Object(x.jsx)("div",{onClick:function(){return m(!1)},className:" close-menu",children:Object(x.jsx)(ho.a,{})})}),Object(x.jsxs)("li",{className:"menu-item",children:[Object(x.jsx)("span",{onClick:function(){window.innerWidth<=1366&&(N(!0),C("flowers"))},children:"flowers"}),Object(x.jsxs)("div",{className:"sub-menu ".concat(f.flowers?"visible":""),children:[Object(x.jsxs)("div",{className:"sub-menu__controls",children:[Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),C("flowers")},children:Object(x.jsx)(Rc.a,{})}),Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),m(!1),C("flowers")},children:Object(x.jsx)(ho.a,{})})]}),Object(x.jsx)(_o,{setSub:N,setActive:m,category:mt[0],handleOpenSub:k,className:"sub-menu__contents"})]})]}),Object(x.jsxs)("li",{className:"menu-item",children:[Object(x.jsx)("span",{onClick:function(){window.innerWidth<=1366&&(N(!0),C("vapes"))},children:"vapes"}),Object(x.jsxs)("div",{className:"sub-menu ".concat(f.vapes?"visible":""),children:[Object(x.jsxs)("div",{className:"sub-menu__controls",children:[Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),C("vapes")},children:Object(x.jsx)(Rc.a,{})}),Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),m(!1),C("vapes")},children:Object(x.jsx)(ho.a,{})})]}),Object(x.jsx)(_o,{setSub:N,setActive:m,category:mt[1],handleOpenSub:k,className:"sub-menu__contents"})]})]}),Object(x.jsxs)("li",{className:"menu-item",children:[Object(x.jsx)("span",{onClick:function(){window.innerWidth<=1366&&(N(!0),C("extracts"))},children:"extracts"}),Object(x.jsxs)("div",{className:"sub-menu ".concat(f.extracts?"visible":""),children:[Object(x.jsxs)("div",{className:"sub-menu__controls",children:[Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),C("extracts")},children:Object(x.jsx)(Rc.a,{})}),Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),m(!1),C("extracts")},children:Object(x.jsx)(ho.a,{})})]}),Object(x.jsx)(_o,{setSub:N,setActive:m,category:mt[2],handleOpenSub:k,className:"sub-menu__contents"})]})]}),Object(x.jsxs)("li",{className:"menu-item",children:[Object(x.jsx)("span",{onClick:function(){window.innerWidth<=1366&&(N(!0),C("edibles"))},children:"edibles"}),Object(x.jsxs)("div",{className:"sub-menu ".concat(f.edibles?"visible":""),children:[Object(x.jsxs)("div",{className:"sub-menu__controls",children:[Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),C("edibles")},children:Object(x.jsx)(Rc.a,{})}),Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),m(!1),C("edible")},children:Object(x.jsx)(ho.a,{})})]}),Object(x.jsx)(_o,{setSub:N,setActive:m,category:mt[3],handleOpenSub:k,className:"sub-menu__contents"})]})]}),Object(x.jsxs)("li",{className:"menu-item",children:[Object(x.jsx)("span",{onClick:function(){window.innerWidth<=1366&&(N(!0),C("cbd"))},children:"cbd & topicals"}),Object(x.jsxs)("div",{className:"sub-menu ".concat(f.cbd?"visible":""),children:[Object(x.jsxs)("div",{className:"sub-menu__controls",children:[Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),C("cbd")},children:Object(x.jsx)(Rc.a,{})}),Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),m(!1),C("cbd")},children:Object(x.jsx)(ho.a,{})})]}),Object(x.jsx)(_o,{setSub:N,setActive:m,category:mt[4],handleOpenSub:k,className:"sub-menu__contents"})]})]}),Object(x.jsxs)("li",{className:"menu-item",children:[Object(x.jsx)("span",{onClick:function(){window.innerWidth<=1366&&(N(!0),C("accessories"))},children:"accessories"}),Object(x.jsxs)("div",{className:"sub-menu ".concat(f.accessories?"visible":""),children:[Object(x.jsxs)("div",{className:"sub-menu__controls",children:[Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),C("accessories")},children:Object(x.jsx)(Rc.a,{})}),Object(x.jsx)("div",{onClick:function(e){e.stopPropagation(),N(!1),m(!1),C("accessories")},children:Object(x.jsx)(ho.a,{})})]}),Object(x.jsx)(_o,{setSub:N,setActive:m,category:mt[5],handleOpenSub:k,className:"sub-menu__contents"})]})]}),Object(x.jsx)("li",{className:"menu-item",children:Object(x.jsx)("span",{onClick:function(e){t.push("/discussions"),N(!1),m(!1)},children:"discussions"})}),Object(x.jsx)("li",{className:"menu-item",children:Object(x.jsx)("span",{onClick:function(e){t.push("/contact"),N(!1),m(!1)},children:"contact"})})]})}),Object(x.jsxs)("div",{className:"header-widgets",children:[Object(x.jsx)("div",{className:"header-search",children:Object(x.jsx)(vo.a,{})}),Object(x.jsx)("div",{onClick:function(){return n("openDrawer")},className:"header-cart",children:Object(x.jsx)(Vt.a,{badgeContent:e,color:"secondary",children:Object(x.jsx)(Ut.a,{})})}),Object(x.jsxs)("div",{className:"header-account",children:[Object(x.jsxs)("div",{onClick:function(e){e.stopPropagation(),r(!i)},children:[" ",Object(x.jsxs)(Vt.a,{color:"secondary",children:[Object(x.jsx)(go.a,{})," "]})]}),i&&Object(x.jsx)(Fo,{handleDropDown:r})]}),Object(x.jsx)("div",{onClick:function(){return m(!0)},className:"header-burger",children:Object(x.jsx)(Oo.a,{})})]})]})})})}var Uo=function(e){var t=e.children;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Bo,{}),t]})},Vo=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(et.d,{children:[co.map((function(e){return Object(x.jsx)(et.b,{exact:!0,path:e.path,children:Object(x.jsx)(Uo,{children:Object(x.jsx)(e.component,{})})},e.path)})),so.map((function(e){return Object(x.jsx)(oo,{path:e.path,children:Object(x.jsx)(e.component,{})},e.path)})),ao.map((function(e){return Object(x.jsx)(uo,{exact:!0,path:e.path,children:Object(x.jsx)(Uo,{children:Object(x.jsx)(e.component,{})})},e.path)})),io.map((function(e){return Object(x.jsx)(bo,{path:e.path,children:Object(x.jsx)(e.component,Object(u.a)({},e.subRoutes))},e.path)})),Object(x.jsx)(et.b,{children:Object(x.jsx)(kc,{children:"Oi doi oi day la dau @@ "})})]})})},Wo=n(997),Go=Object(Xs.a)((function(e){return{colorPrimary:{backgroundColor:"#559157"},bar:{borderRadius:5,backgroundColor:"#9ac587"}}}))(Wo.a),zo=function(){var e=Object(c.useContext)(ct),t=Object(o.a)(e,1)[0],n=Object(l.b)(),a=Xe(),s=a.updateOnlineUsers,i=a.onlineUsers,r=se(),u=r.initialize,j=r.isInitialized,b=r.user,m=r.isLoading;return Object(c.useEffect)((function(){u()}),[u]),Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cart"));Array.isArray(e)&&n(ot(e))}),[n]),Object(c.useEffect)((function(){qo.off("online-count").on("online-count",(function(e){i.length!==e.length&&s(e)}))}),[s,null===i||void 0===i?void 0:i.length]),Object(c.useEffect)((function(){b._id&&Ho.emit("enter",b._id)}),[b._id]),Object(x.jsx)(x.Fragment,{children:j&&Object(x.jsxs)(x.Fragment,{children:[t||m?Object(x.jsx)(Go,{}):"",Object(x.jsx)(d.a,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,limit:2,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!1}),Object(x.jsx)(Vo,{}),Object(x.jsx)(nt,{}),Object(x.jsx)(tt,{})]})})},Ho=Object(r.io)("http://localhost:8000"),qo=Object(r.io)("".concat("http://localhost:8000","/user"));var Yo=function(){return Object(x.jsx)(zo,{})},$o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1025)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))},Jo=Object(M.c)({name:"notifications",initialState:{notifications:[]},reducers:{UPDATE:function(e,t){e.notifications.push(t.payload)}}}),Ko=(Jo.actions.UPDATE,Jo.reducer),Zo=Object(M.a)({reducer:{cart:ut,user:ae,chat:Qe,notifications:Ko}}),Qo=n(68),Xo=n(597);i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(l.a,{store:Zo,children:Object(x.jsx)(Qo.a,{utils:Xo.a,children:Object(x.jsx)(Uc.b,{options:{"client-id":"Aeo545ZYzuXUHTqXyfiwwcys5Bb_20TyO5qiKLQSzQVveEa4Ykxb-i1wkfHfDVvymIKnOVIafTZTm1fO",currency:"USD",intent:"capture"},children:Object(x.jsx)(Un.a,{children:Object(x.jsx)(st,{children:Object(x.jsx)(Bn,{children:Object(x.jsx)(Yo,{})})})})})})})}),document.getElementById("root")),$o()}},[[952,1,2]]]);